{
  "id": "ch_C05L87V014J_2024-10-03_1727975478.458659_thread",
  "type": "channel",
  "channel_name": "ask-crafting",
  "conversation_type": "thread",
  "participants": [
    "Xindi Xu",
    "sean.donohoe"
  ],
  "messages": [
    {
      "sender": "Xindi Xu",
      "user_id": "U03FT35MAHF",
      "message": "It happened again :cry: . This is the output of `top`",
      "time": "10:11",
      "timestamp": "1727975478.458659",
      "is_reply": false
    },
    {
      "sender": "sean.donohoe",
      "user_id": "U04JYSDMV63",
      "message": "at first glance your load averages look fine, so initial guess is it's related to too much memory being consumed",
      "time": "10:17",
      "timestamp": "1727975840.921109",
      "is_reply": true
    },
    {
      "sender": "sean.donohoe",
      "user_id": "U04JYSDMV63",
      "message": "memory also looks fine though, sitting at 47.5G / 124G consumed :thonk:",
      "time": "10:18",
      "timestamp": "1727975922.134729",
      "is_reply": true
    },
    {
      "sender": "Xindi Xu",
      "user_id": "U03FT35MAHF",
      "message": "Output of `top` without loading frontend for comparison",
      "time": "10:19",
      "timestamp": "1727975946.036599",
      "is_reply": true
    },
    {
      "sender": "Xindi Xu",
      "user_id": "U03FT35MAHF",
      "message": "I wonder if this has to do with my local setup? I noticed that the terminal I ssh into crafting become very lagging when I run the frontend, but the web terminal in crafting works fine",
      "time": "10:19",
      "timestamp": "1727975986.322749",
      "is_reply": true
    },
    {
      "sender": "sean.donohoe",
      "user_id": "U04JYSDMV63",
      "message": "interesting, that does indeed sound like it could be something specific to your laptop -- are you noticing the lag in vscode, or in your terminal?",
      "time": "10:20",
      "timestamp": "1727976059.956639",
      "is_reply": true
    },
    {
      "sender": "Xindi Xu",
      "user_id": "U03FT35MAHF",
      "message": "also, it seems like it only happens when I load the frontend after I ran\n```  sudo iptables -t nat -A PREROUTING -p tcp  --dport 8081 -j DNAT --to-destination 127.0.0.1:8081```",
      "time": "10:21",
      "timestamp": "1727976066.124269",
      "is_reply": true
    },
    {
      "sender": "Xindi Xu",
      "user_id": "U03FT35MAHF",
      "message": "in the terminal only",
      "time": "10:21",
      "timestamp": "1727976077.889549",
      "is_reply": true
    },
    {
      "sender": "sean.donohoe",
      "user_id": "U04JYSDMV63",
      "message": "hmmm, I'm not sure what specifically would be contributing to increased latency there, but it makes me think that either the remote forward is adding too much overhead or your laptop is running too slow to keep up with serving requests",
      "time": "10:24",
      "timestamp": "1727976292.438639",
      "is_reply": true
    },
    {
      "sender": "sean.donohoe",
      "user_id": "U04JYSDMV63",
      "message": "is there any way you could switch to running webpack in crafting rather than locally?",
      "time": "10:25",
      "timestamp": "1727976311.616449",
      "is_reply": true
    },
    {
      "sender": "Xindi Xu",
      "user_id": "U03FT35MAHF",
      "message": "The reason why I switched to running webpack locally is that vscode autocomplete works slower in crafting. I can give it another shot",
      "time": "10:26",
      "timestamp": "1727976366.181999",
      "is_reply": true
    },
    {
      "sender": "sean.donohoe",
      "user_id": "U04JYSDMV63",
      "message": "oh weird, why is vscode using webpack in the first place? I haven't seen that in anyone else's environments yet :sweat_smile:",
      "time": "10:28",
      "timestamp": "1727976484.110909",
      "is_reply": true
    },
    {
      "sender": "Xindi Xu",
      "user_id": "U03FT35MAHF",
      "message": "ah, vscode is not using webpack. It just that autocomplete  for frontend code is faster so I keep editing frontend code locally. And i don't want to keep copy pasting code to crafting so I have webpack running locally as well",
      "time": "10:29",
      "timestamp": "1727976552.392539",
      "is_reply": true
    },
    {
      "sender": "sean.donohoe",
      "user_id": "U04JYSDMV63",
      "message": "ahhh gotcha, thanks for clarifying :slightly_smiling_face:",
      "time": "10:30",
      "timestamp": "1727976617.925339",
      "is_reply": true
    },
    {
      "sender": "Xindi Xu",
      "user_id": "U03FT35MAHF",
      "message": "I noticed that I have to run `workspace service disable webpack` again to start webpack in crafting. Before that, `ppy start webpack` just failed because port 8081 was taken. Loading the frontend in sandbox is very fast. I _feel_ like autocomplete is a bit slower in crafting but not to major. I'll switch to coding the frontend in crafting!",
      "time": "10:51",
      "timestamp": "1727977876.763639",
      "is_reply": true
    },
    {
      "sender": "sean.donohoe",
      "user_id": "U04JYSDMV63",
      "message": "interesting! let me know if any other weird behavior pops up, we can also try clearing those iptables settings if needed",
      "time": "10:53",
      "timestamp": "1727977989.470269",
      "is_reply": true
    },
    {
      "sender": "Xindi Xu",
      "user_id": "U03FT35MAHF",
      "message": "Will do! Thank you for helping out!",
      "time": "10:53",
      "timestamp": "1727978011.140049",
      "is_reply": true
    }
  ],
  "metadata": {
    "channel_id": "C05L87V014J",
    "channel_name": "ask-crafting",
    "date_file": "2024-10-03.json",
    "message_count": 17,
    "start_time": "1727975478.458659",
    "end_time": "1727978011.140049",
    "is_thread": true
  }
}