{
  "id": "ch_C06FA6A23_2022-04-04_1649103687.051149_thread",
  "type": "channel",
  "channel_name": "discuss-engineering",
  "conversation_type": "thread",
  "participants": [
    "Xi Cheng",
    "lenny",
    "Heymian"
  ],
  "messages": [
    {
      "sender": "lenny",
      "user_id": "U02BTGKFVAR",
      "message": ":warning:  *PSA: Please make sure you are using `grpcio-tools==1.37.0`*!\n\nTo check your current version:\n`pip show grpcio-tools`\n\nTo upgrade:\n`make update-python` from `tools/devtools` to upgrade all python dependencies, or `pip install grpcio-tools==1.37.0` to upgrade just `grpcio-tools` to the correct version\n\nWe upgraded our version of `grpcio-tools` a few months ago (https://github.com/instabase/instabase/pull/23474), which changed how proto files were generated. This led to huge spurious diffs (https://instabase.slack.com/archives/C06FA6A23/p1645573216287579) when regenerating proto files with the newer version. I have just merged a PR (https://github.com/instabase/instabase/pull/25306) to regenerate all protos using the correct version; if you have any outstanding PRs that touch any protos, please make sure to regenerate them using the correct version of `grpcio-tools` to keep your diffs small. Thank you! <!here>",
      "time": "13:21",
      "timestamp": "1649103687.051149",
      "is_reply": false
    },
    {
      "sender": "Xi Cheng",
      "user_id": "U01F946DGEP",
      "message": "Hi Lenny, thanks for the heads up. The PR you referred here is huge and we are right before code cut, so we need to monitor closely if anything can be broken because of this. tagging @Heymian @Kerry @shaunak @lydia for visibility.",
      "time": "13:24",
      "timestamp": "1649103843.863879",
      "is_reply": true
    },
    {
      "sender": "Xi Cheng",
      "user_id": "U01F946DGEP",
      "message": "And I ran into the following error when `make update-python`:\n```ERROR: pip's dependency resolver does not currently take into account all the packages that are installed. This behaviour is the source of the following dependency conflicts.\ninstabase-foundation 0.0.3 requires mypy==0.790, but you have mypy 0.701 which is incompatible.```\nAny suggestions?",
      "time": "13:26",
      "timestamp": "1649103975.819489",
      "is_reply": true
    },
    {
      "sender": "lenny",
      "user_id": "U02BTGKFVAR",
      "message": "the changes are just in autogenerated proto files, and they're almost all just formatting changes, so should hopefully not cause any issues!",
      "time": "13:27",
      "timestamp": "1649104060.946919",
      "is_reply": true
    },
    {
      "sender": "lenny",
      "user_id": "U02BTGKFVAR",
      "message": "haven't seen that error, perhaps `pip install mypy==0.790` and then try `make update-python` again?",
      "time": "13:28",
      "timestamp": "1649104084.813529",
      "is_reply": true
    },
    {
      "sender": "Xi Cheng",
      "user_id": "U01F946DGEP",
      "message": "and this error as well:\n```ERROR: pip's dependency resolver does not currently take into account all the packages that are installed. This behaviour is the source of the following dependency conflicts.\ntavern 1.14.2 requires pyjwt<2,>=1.7.1, but you have pyjwt 2.1.0 which is incompatible.\ntavern 1.14.2 requires pytest<7,>=6, but you have pytest 3.8.1 which is incompatible.\nlocust 1.5.3 requires msgpack>=0.6.2, but you have msgpack 0.5.6 which is incompatible.```",
      "time": "13:28",
      "timestamp": "1649104125.907799",
      "is_reply": true
    },
    {
      "sender": "Xi Cheng",
      "user_id": "U01F946DGEP",
      "message": "@lenny Yeah let me try",
      "time": "13:29",
      "timestamp": "1649104156.389149",
      "is_reply": true
    },
    {
      "sender": "lenny",
      "user_id": "U02BTGKFVAR",
      "message": "if you don't want to update all of your python dependencies right now, you can also just `pip install grpcio-tools==1.37.0` to upgrade this one dependency",
      "time": "13:29",
      "timestamp": "1649104174.053879",
      "is_reply": true
    },
    {
      "sender": "Xi Cheng",
      "user_id": "U01F946DGEP",
      "message": "yep, just confirmed that I have the new grpcio-tools version:\n```xicheng@xis-macbook-pro devtools % pip show grpcio-tools\nName: grpcio-tools\nVersion: 1.37.0\nSummary: Protobuf code generator for gRPC\nHome-page: https://grpc.io\nAuthor: The gRPC Authors\nAuthor-email: <mailto:grpc-io@googlegroups.com|grpc-io@googlegroups.com>\nLicense: Apache License 2.0\nLocation: /Users/xicheng/.pyenv/versions/3.7.3/lib/python3.7/site-packages\nRequires: setuptools, protobuf, grpcio\nRequired-by```",
      "time": "13:31",
      "timestamp": "1649104277.219229",
      "is_reply": true
    },
    {
      "sender": "Heymian",
      "user_id": "UADQ9V8PK",
      "message": "Thanks Lenny! This is great, definitely get this in before the code cut this afternoon.",
      "time": "13:46",
      "timestamp": "1649105165.680919",
      "is_reply": true
    },
    {
      "sender": "Heymian",
      "user_id": "UADQ9V8PK",
      "message": "Xi, I think @lydia has a TODO to remove the foundation library. Thatâ€™s no longer needed, so comment that out and keep mypy version locked to 0.701",
      "time": "13:46",
      "timestamp": "1649105194.896679",
      "is_reply": true
    },
    {
      "sender": "Xi Cheng",
      "user_id": "U01F946DGEP",
      "message": "sounds good",
      "time": "13:46",
      "timestamp": "1649105214.214559",
      "is_reply": true
    },
    {
      "sender": "Heymian",
      "user_id": "UADQ9V8PK",
      "message": "edited, should be 701.",
      "time": "13:47",
      "timestamp": "1649105270.105589",
      "is_reply": true
    },
    {
      "sender": "Heymian",
      "user_id": "UADQ9V8PK",
      "message": "remove foundation from the local build: https://github.com/instabase/instabase/pull/25309",
      "time": "13:49",
      "timestamp": "1649105395.804739",
      "is_reply": true
    }
  ],
  "metadata": {
    "channel_id": "C06FA6A23",
    "channel_name": "discuss-engineering",
    "date_file": "2022-04-04.json",
    "message_count": 14,
    "start_time": "1649103687.051149",
    "end_time": "1649105395.804739",
    "is_thread": true
  }
}