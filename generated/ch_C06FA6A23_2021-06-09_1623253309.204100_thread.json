{
  "id": "ch_C06FA6A23_2021-06-09_1623253309.204100_thread",
  "type": "channel",
  "channel_name": "discuss-engineering",
  "conversation_type": "thread",
  "participants": [
    "Mohit",
    "Kerry",
    "lydia",
    "Erick"
  ],
  "messages": [
    {
      "sender": "lydia",
      "user_id": "UJK4LKYSJ",
      "message": "",
      "time": "08:41",
      "timestamp": "1623253309.204100",
      "is_reply": false
    },
    {
      "sender": "Kerry",
      "user_id": "UCX3VGDJR",
      "message": "@Mohit and @Naveen are the memory profiling experts I worked with :slightly_smiling_face:",
      "time": "08:43",
      "timestamp": "1623253403.204200",
      "is_reply": true
    },
    {
      "sender": "lydia",
      "user_id": "UJK4LKYSJ",
      "message": "oo nice!",
      "time": "08:48",
      "timestamp": "1623253725.204400",
      "is_reply": true
    },
    {
      "sender": "lydia",
      "user_id": "UJK4LKYSJ",
      "message": "yea so I’m just not seeing a mprofile_* file written to disk. is it because I have to kill the celery works with Ctrl-C?",
      "time": "08:49",
      "timestamp": "1623253749.204600",
      "is_reply": true
    },
    {
      "sender": "lydia",
      "user_id": "UJK4LKYSJ",
      "message": "works great if i just have a single python file and run it with `mprof run test.py` . my guess is it only writes the data to disk when the function finishes running, but there’s something weird with me force-quitting the celery workers?",
      "time": "08:50",
      "timestamp": "1623253800.204800",
      "is_reply": true
    },
    {
      "sender": "lydia",
      "user_id": "UJK4LKYSJ",
      "message": "I believe @Felicia has used this before as well, but might be a bit early for west coast peeps :slightly_smiling_face:",
      "time": "08:50",
      "timestamp": "1623253838.205000",
      "is_reply": true
    },
    {
      "sender": "lydia",
      "user_id": "UJK4LKYSJ",
      "message": "```worker: Hitting Ctrl+C again will terminate all running tasks!\nTraceback (most recent call last):\n  File \"/Users/lydiagu/venv37/bin/mprof\", line 8, in <module>\n\nworker: Warm shutdown (MainProcess)\n    sys.exit(main())\n  File \"/Users/lydiagu/venv37/lib/python3.7/site-packages/mprof.py\", line 877, in main\n[2021-06-09 11:58:38,244: DEBUG/MainProcess] | Worker: Closing Hub...\n[2021-06-09 11:58:38,245: DEBUG/MainProcess] | Worker: Closing Pool...\n    actions[get_action()]()\n  File \"/Users/lydiagu/venv37/lib/python3.7/site-packages/mprof.py\", line 281, in run_action\n[2021-06-09 11:58:38,245: DEBUG/MainProcess] | Worker: Closing Consumer...\n    multiprocess=args.multiprocess, stream=f)\n[2021-06-09 11:58:38,245: DEBUG/MainProcess] | Worker: Stopping Consumer...\n  File \"/Users/lydiagu/venv37/lib/python3.7/site-packages/memory_profiler.py\", line 386, in memory_usage\n[2021-06-09 11:58:38,245: DEBUG/MainProcess] | Consumer: Closing Connection...\n[2021-06-09 11:58:38,245: DEBUG/MainProcess] | Consumer: Closing Events...\n    time.sleep(interval)\nKeyboardInterrupt```",
      "time": "08:58",
      "timestamp": "1623254337.205200",
      "is_reply": true
    },
    {
      "sender": "Erick",
      "user_id": "ULQK30Z7V",
      "message": "@lydia this is the guide I followed when profiling refiner https://docs.google.com/document/d/1EfNYKJ7s50efO13w8Xtu_TMYNOJNnBwaVpyq7G5izWA/edit#heading=h.5jagdagk3xg9",
      "time": "09:04",
      "timestamp": "1623254650.205400",
      "is_reply": true
    },
    {
      "sender": "Erick",
      "user_id": "ULQK30Z7V",
      "message": "I think just adding `@profile` worked for me with the `mprof run --multiprocessing make runlocal` iirc",
      "time": "09:05",
      "timestamp": "1623254756.205800",
      "is_reply": true
    },
    {
      "sender": "Erick",
      "user_id": "ULQK30Z7V",
      "message": "Oh or `make runlocal-profile`",
      "time": "09:06",
      "timestamp": "1623254774.206000",
      "is_reply": true
    },
    {
      "sender": "lydia",
      "user_id": "UJK4LKYSJ",
      "message": "and how did you stop the server? Do you need to stop it to get the plot data?",
      "time": "09:08",
      "timestamp": "1623254890.206200",
      "is_reply": true
    },
    {
      "sender": "Erick",
      "user_id": "ULQK30Z7V",
      "message": "Hmm I think it generates it continuously. The output is in the `/build` directory",
      "time": "09:09",
      "timestamp": "1623254958.206400",
      "is_reply": true
    },
    {
      "sender": "lydia",
      "user_id": "UJK4LKYSJ",
      "message": "ahhh you’re right! i forgot the make command cd’s into the build dir",
      "time": "09:10",
      "timestamp": "1623255010.206600",
      "is_reply": true
    },
    {
      "sender": "lydia",
      "user_id": "UJK4LKYSJ",
      "message": "uggghh it’s all there hahah",
      "time": "09:10",
      "timestamp": "1623255021.206900",
      "is_reply": true
    },
    {
      "sender": "Erick",
      "user_id": "ULQK30Z7V",
      "message": "Haha all good. Happy profiling!",
      "time": "09:10",
      "timestamp": "1623255028.207100",
      "is_reply": true
    },
    {
      "sender": "Mohit",
      "user_id": "ULPBBF8PR",
      "message": "Glad this is resolved, have fun profiling @lydia :slightly_smiling_face: . LMK if you need any help. My profiling stack is a bit different than the one above ^  though.",
      "time": "10:24",
      "timestamp": "1623259479.208300",
      "is_reply": true
    },
    {
      "sender": "Erick",
      "user_id": "ULQK30Z7V",
      "message": ":open_mouth: any chance you can share a link to explore? The stack I’ve been using is a bit clunky, and if you’re willing to document + demo it in a demo day potentially, we might be able to get more people up and running with memory profiling",
      "time": "10:34",
      "timestamp": "1623260088.209000",
      "is_reply": true
    },
    {
      "sender": "Mohit",
      "user_id": "ULPBBF8PR",
      "message": "@Erick  yes i plan to document and demo with a case study, havent got time to get to it yet.",
      "time": "12:39",
      "timestamp": "1623267594.211700",
      "is_reply": true
    }
  ],
  "metadata": {
    "channel_id": "C06FA6A23",
    "channel_name": "discuss-engineering",
    "date_file": "2021-06-09.json",
    "message_count": 18,
    "start_time": "1623253309.204100",
    "end_time": "1623267594.211700",
    "is_thread": true
  }
}