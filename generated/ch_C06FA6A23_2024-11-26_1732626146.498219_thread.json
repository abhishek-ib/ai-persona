{
  "id": "ch_C06FA6A23_2024-11-26_1732626146.498219_thread",
  "type": "channel",
  "channel_name": "discuss-engineering",
  "conversation_type": "thread",
  "participants": [
    "Abhishek",
    "Rakesh",
    "pauline.comising",
    "Goto Tools Go Links"
  ],
  "messages": [
    {
      "sender": "Abhishek",
      "user_id": "U01T5NS31NE",
      "message": "Hey team, *`post-install-action-ml-studio-config-setup` on `release-24.04.0-enterprise` is failing to build locally (`using make bazel-build`) due to missing deps.*\n*I added them, and then the build went fine, but it's failing on `bazel-test` (`using make bazel-test)`*\nThis is blocking this vuln fix pr for 24.04 -> https://github.com/instabase/instabase/pull/65549\nError in :thread:",
      "time": "05:02",
      "timestamp": "1732626146.498219",
      "is_reply": false
    },
    {
      "sender": "Abhishek",
      "user_id": "U01T5NS31NE",
      "message": "Build error\n```INFO: Analyzed 3 targets (1 packages loaded, 7 targets configured).\nINFO: Found 3 targets...\nERROR: /home/owner/instabase/tools/onprem/post-install-action-ml-studio-config-setup/src/go/src/BUILD.bazel:33:8: GoCompilePkg tools/onprem/post-install-action-ml-studio-config-setup/src/go/src/ml-studio-config-setup_test.internal.a failed: (Exit 1): builder failed: error executing command (from target //tools/onprem/post-install-action-ml-studio-config-setup/src/go/src:ml-studio-config-setup_test) bazel-out/k8-opt-exec-2B5CBBC6/bin/external/go_linux_sdk/builder_reset/builder compilepkg -sdk external/go_linux_sdk -installsuffix linux_amd64 -src ... (remaining 57 arguments skipped)\n\nUse --sandbox_debug to see verbose messages from the sandbox and retain the sandbox build root for debugging\ncompilepkg: missing strict dependencies:\n\t/home/owner/.cache/bazel/_bazel_owner/99c13e9d3f9affca3e421b943f545ec7/sandbox/processwrapper-sandbox/2435/execroot/__main__/tools/onprem/post-install-action-ml-studio-config-setup/src/go/src/main.go: import of \"github.com/hashicorp/go-version (http://github.com/hashicorp/go-version)\"\nNo dependencies were provided.\nCheck that imports in Go sources match importpath attributes in deps.\nINFO: Elapsed time: 2.445s, Critical Path: 0.04s\nINFO: 4 processes: 3 internal, 1 processwrapper-sandbox.\nFAILED: Build did NOT complete successfullyINFO: Analyzed 3 targets (1 packages loaded, 7 targets configured).\nINFO: Found 3 targets...\nERROR: /home/owner/instabase/tools/onprem/post-install-action-ml-studio-config-setup/src/go/src/BUILD.bazel:33:8: GoCompilePkg tools/onprem/post-install-action-ml-studio-config-setup/src/go/src/ml-studio-config-setup_test.internal.a failed: (Exit 1): builder failed: error executing command (from target //tools/onprem/post-install-action-ml-studio-config-setup/src/go/src:ml-studio-config-setup_test) bazel-out/k8-opt-exec-2B5CBBC6/bin/external/go_linux_sdk/builder_reset/builder compilepkg -sdk external/go_linux_sdk -installsuffix linux_amd64 -src ... (remaining 57 arguments skipped)\n\nUse --sandbox_debug to see verbose messages from the sandbox and retain the sandbox build root for debugging\ncompilepkg: missing strict dependencies:\n\t/home/owner/.cache/bazel/_bazel_owner/99c13e9d3f9affca3e421b943f545ec7/sandbox/processwrapper-sandbox/2435/execroot/__main__/tools/onprem/post-install-action-ml-studio-config-setup/src/go/src/main.go: import of \"github.com/hashicorp/go-version (http://github.com/hashicorp/go-version)\"\nNo dependencies were provided.\nCheck that imports in Go sources match importpath attributes in deps.\nINFO: Elapsed time: 2.445s, Critical Path: 0.04s\nINFO: 4 processes: 3 internal, 1 processwrapper-sandbox.\nFAILED: Build did NOT complete successfully```",
      "time": "05:02",
      "timestamp": "1732626172.712449",
      "is_reply": true
    },
    {
      "sender": "Goto Tools Go Links",
      "user_id": "U07NAC7GVNY",
      "message": "https://goto.tools/src/ml-studio-config-setup_test",
      "time": "05:02",
      "timestamp": "1732626173.532229",
      "is_reply": true
    },
    {
      "sender": "Goto Tools Go Links",
      "user_id": "U07NAC7GVNY",
      "message": "https://goto.tools/src/BUILD",
      "time": "05:02",
      "timestamp": "1732626173.535879",
      "is_reply": true
    },
    {
      "sender": "Goto Tools Go Links",
      "user_id": "U07NAC7GVNY",
      "message": "https://goto.tools/src:ml-studio-config-setup_test)",
      "time": "05:02",
      "timestamp": "1732626173.539699",
      "is_reply": true
    },
    {
      "sender": "Goto Tools Go Links",
      "user_id": "U07NAC7GVNY",
      "message": "https://goto.tools/src/main",
      "time": "05:02",
      "timestamp": "1732626173.541409",
      "is_reply": true
    },
    {
      "sender": "Goto Tools Go Links",
      "user_id": "U07NAC7GVNY",
      "message": "https://goto.tools/src:ml-studio-config-setup_test)",
      "time": "05:02",
      "timestamp": "1732626173.543079",
      "is_reply": true
    },
    {
      "sender": "Goto Tools Go Links",
      "user_id": "U07NAC7GVNY",
      "message": "https://goto.tools/src/main",
      "time": "05:02",
      "timestamp": "1732626173.543269",
      "is_reply": true
    },
    {
      "sender": "Goto Tools Go Links",
      "user_id": "U07NAC7GVNY",
      "message": "https://goto.tools/src/BUILD",
      "time": "05:02",
      "timestamp": "1732626173.546949",
      "is_reply": true
    },
    {
      "sender": "Goto Tools Go Links",
      "user_id": "U07NAC7GVNY",
      "message": "https://goto.tools/src/ml-studio-config-setup_test",
      "time": "05:02",
      "timestamp": "1732626173.552139",
      "is_reply": true
    },
    {
      "sender": "Abhishek",
      "user_id": "U01T5NS31NE",
      "message": "Test error\n```FAIL: //tools/onprem/post-install-action-ml-studio-config-setup/src/go/src:ml-studio-config-setup_test (see /home/owner/.cache/bazel/_bazel_owner/99c13e9d3f9affca3e421b943f545ec7/execroot/__main__/bazel-out/k8-fastbuild/testlogs/tools/onprem/post-install-action-ml-studio-config-setup/src/go/src/ml-studio-config-setup_test/test.log)\nINFO: From Testing //tools/onprem/post-install-action-ml-studio-config-setup/src/go/src:ml-studio-config-setup_test:\n==================== Test output for //tools/onprem/post-install-action-ml-studio-config-setup/src/go/src:ml-studio-config-setup_test:\n2024/11/26 12:56:17 INFO utils/db/test/setup.go:184 -- Test env vars: &{false [] false false false false true false localhost 0.0.0.0 localhost localhost ERROR}\n\n----------------------------------------------------------------------\nFAIL: tools/onprem/post-install-action-ml-studio-config-setup/src/go/src/main_test.go:100: ActionsTestSuite.TestMLStudioConfigSetup_Failure\n\ntools/onprem/post-install-action-ml-studio-config-setup/src/go/src/main_test.go:112:\n    ...open tools/onprem/post-install-action-ml-studio-config-setup/src/go/src/main_test.go: no such file or directory\n... obtained string = \"postinstallactionml-studio-config-setup action run: action.setupMLStudioConfig: postinstallactionml-studio-config-setup action send setup request: unexpected response when setting up ml studio config. StatusCode: 500, Body: {\\\"status\\\":\\\"ERROR\\\", \\\"msg\\\":\\\"Error setting site configs: test error\\\"}\"\n... expected string = \"ml-studio-config-setup action run: action.setupMLStudioConfig: ml-studio-config-setup action send setup request: unexpected response when setting up ml studio config. StatusCode: 500, Body: {\\\"status\\\":\\\"ERROR\\\", \\\"msg\\\":\\\"Error setting site configs: test error\\\"}\"\n\n2024/11/26 12:56:17 ERROR tools/onprem/post-install-action-ml-studio-config-setup/src/go/src/main.go:294 -- failed to roll MLStudio Setup action Err: postinstallactionml-studio-config-setup action send setup request: invalid character 'e' looking for beginning of value\n\n----------------------------------------------------------------------\nFAIL: tools/onprem/post-install-action-ml-studio-config-setup/src/go/src/main_test.go:193: ActionsTestSuite.TestRollback_Failure\n\ntools/onprem/post-install-action-ml-studio-config-setup/src/go/src/main_test.go:249:\n    ...open tools/onprem/post-install-action-ml-studio-config-setup/src/go/src/main_test.go: no such file or directory\n... obtained string = \"postinstallactionml-studio-config-setup action send setup request: invalid character 'e' looking for beginning of value\"\n... expected string = \"ml-studio-config-setup action send setup request: invalid character 'e' looking for beginning of value\"\n\n2024/11/26 12:56:17 ERROR tools/onprem/post-install-action-ml-studio-config-setup/src/go/src/main.go:294 -- failed to roll MLStudio Setup action Err: cannot rollback MLStudio Setup further\nOOPS: 3 passed, 2 FAILED\n--- FAIL: Test (0.31s)\nFAIL\n================================================================================\nINFO: Elapsed time: 0.465s, Critical Path: 0.36s\nINFO: 2 processes: 1 internal, 1 processwrapper-sandbox.\nINFO: Build completed, 1 test FAILED, 2 total actions\n//tools/onprem/post-install-action-ml-studio-config-setup/src/go/src:ml-studio-config-setup_test FAILED in 0.4s```",
      "time": "05:03",
      "timestamp": "1732626205.352729",
      "is_reply": true
    },
    {
      "sender": "Goto Tools Go Links",
      "user_id": "U07NAC7GVNY",
      "message": "https://goto.tools/src/main_test",
      "time": "05:03",
      "timestamp": "1732626206.319269",
      "is_reply": true
    },
    {
      "sender": "Goto Tools Go Links",
      "user_id": "U07NAC7GVNY",
      "message": "https://goto.tools/src/main_test",
      "time": "05:03",
      "timestamp": "1732626206.327389",
      "is_reply": true
    },
    {
      "sender": "Goto Tools Go Links",
      "user_id": "U07NAC7GVNY",
      "message": "https://goto.tools/src/main",
      "time": "05:03",
      "timestamp": "1732626206.331829",
      "is_reply": true
    },
    {
      "sender": "Goto Tools Go Links",
      "user_id": "U07NAC7GVNY",
      "message": "https://goto.tools/src/main_test",
      "time": "05:03",
      "timestamp": "1732626206.336999",
      "is_reply": true
    },
    {
      "sender": "Goto Tools Go Links",
      "user_id": "U07NAC7GVNY",
      "message": "https://goto.tools/src/main_test",
      "time": "05:03",
      "timestamp": "1732626206.339789",
      "is_reply": true
    },
    {
      "sender": "Goto Tools Go Links",
      "user_id": "U07NAC7GVNY",
      "message": "https://goto.tools/src:ml-studio-config-setup_test:",
      "time": "05:03",
      "timestamp": "1732626206.340439",
      "is_reply": true
    },
    {
      "sender": "Goto Tools Go Links",
      "user_id": "U07NAC7GVNY",
      "message": "https://goto.tools/src/main",
      "time": "05:03",
      "timestamp": "1732626206.343669",
      "is_reply": true
    },
    {
      "sender": "Goto Tools Go Links",
      "user_id": "U07NAC7GVNY",
      "message": "https://goto.tools/src:ml-studio-config-setup_test:",
      "time": "05:03",
      "timestamp": "1732626206.347729",
      "is_reply": true
    },
    {
      "sender": "Goto Tools Go Links",
      "user_id": "U07NAC7GVNY",
      "message": "https://goto.tools/src:ml-studio-config-setup_test",
      "time": "05:03",
      "timestamp": "1732626206.347979",
      "is_reply": true
    },
    {
      "sender": "Goto Tools Go Links",
      "user_id": "U07NAC7GVNY",
      "message": "https://goto.tools/src:ml-studio-config-setup_test",
      "time": "05:03",
      "timestamp": "1732626206.364489",
      "is_reply": true
    },
    {
      "sender": "Goto Tools Go Links",
      "user_id": "U07NAC7GVNY",
      "message": "https://goto.tools/src/ml-studio-config-setup_test/test",
      "time": "05:03",
      "timestamp": "1732626206.364899",
      "is_reply": true
    },
    {
      "sender": "Goto Tools Go Links",
      "user_id": "U07NAC7GVNY",
      "message": "https://goto.tools/src/main_test",
      "time": "05:03",
      "timestamp": "1732626206.377569",
      "is_reply": true
    },
    {
      "sender": "Goto Tools Go Links",
      "user_id": "U07NAC7GVNY",
      "message": "https://goto.tools/src/main_test",
      "time": "05:03",
      "timestamp": "1732626206.411789",
      "is_reply": true
    },
    {
      "sender": "Abhishek",
      "user_id": "U01T5NS31NE",
      "message": "cc @Rakesh",
      "time": "05:04",
      "timestamp": "1732626285.898469",
      "is_reply": true
    },
    {
      "sender": "Abhishek",
      "user_id": "U01T5NS31NE",
      "message": "Same error is visible on CI pipeline as well ->https://jenkins.instabase.com/blue/organizations/jenkins/instabase/detail/PR-65549/2/pipeline/",
      "time": "05:05",
      "timestamp": "1732626346.505289",
      "is_reply": true
    },
    {
      "sender": "Rakesh",
      "user_id": "U01668DGQCE",
      "message": "@Abhishek\nThis is more of test error specifically for ML Studio config Post install action based on error looks like that?",
      "time": "06:23",
      "timestamp": "1732631015.861249",
      "is_reply": true
    },
    {
      "sender": "Rakesh",
      "user_id": "U01668DGQCE",
      "message": "Tagging @pauline.comising for assistance here on fixing the tests for unblocking vulnerabilities closure. Abhishek can you connect with Pauline on this one ?\ncc: @lydia",
      "time": "06:24",
      "timestamp": "1732631067.786619",
      "is_reply": true
    },
    {
      "sender": "pauline.comising",
      "user_id": "U03TWMC0T24",
      "message": "Hmm looking at the test failures it looks like the obtained and expected error strings are the same except for a prefixed `postinstallaction`. Let me see if I can find what changes added this prefix, but it seems like the fix would be to add this new prefix to the error string",
      "time": "06:38",
      "timestamp": "1732631921.857369",
      "is_reply": true
    },
    {
      "sender": "pauline.comising",
      "user_id": "U03TWMC0T24",
      "message": "Here's the PR (https://github.com/instabase/instabase/pull/65562) to update the expected string. I couldn't find any recent PRs that literally added this prefix, so I wonder if it's some built in go error wrapping that introduced this new message. Should this fix be applied to any other release branches/are any other release vulns blocked by this same test failure?",
      "time": "07:05",
      "timestamp": "1732633518.800859",
      "is_reply": true
    }
  ],
  "metadata": {
    "channel_id": "C06FA6A23",
    "channel_name": "discuss-engineering",
    "date_file": "2024-11-26.json",
    "message_count": 30,
    "start_time": "1732626146.498219",
    "end_time": "1732633518.800859",
    "is_thread": true
  }
}