{
  "id": "ch_CSY11CK7T_2024-02-28_1709159253.100459_thread",
  "type": "channel",
  "channel_name": "discuss-frontend",
  "conversation_type": "thread",
  "participants": [
    "CJ",
    "Jessica"
  ],
  "messages": [
    {
      "sender": "Jessica",
      "user_id": "UDEF3M2NP",
      "message": "Can anyone think of any endpoints we use - in the platform or in AI Hub - where if we get HTML back, it's _not_ an error? I want to do a better job of handling 400, 404, 500, 403, 410, and particularly CSRF errors from apps-server and webapp. To do this, I'm thinking about doing something this:\n\n1. For all responses from window.fetch, check the content-type; if it's json, do nothing\n2. If it's not json, try to use a DOMParser on the text response\n3. If that fails, then do nothing because it's not HTML\n4. If it's HTML, parse out the error\nThe reason we have to do this in the frontend instead of the backend is that for apps-server and webapp sometimes we use render_template and sometimes we use json_response :confused:",
      "time": "14:27",
      "timestamp": "1709159253.100459",
      "is_reply": false
    },
    {
      "sender": "CJ",
      "user_id": "U05L4KP9V9P",
      "message": "aaaaa this is one of those things that Morally shd be fixed in the backend i think...... we can def make our frontend more accepting though",
      "time": "14:38",
      "timestamp": "1709159931.163359",
      "is_reply": true
    },
    {
      "sender": "CJ",
      "user_id": "U05L4KP9V9P",
      "message": "would we get html back if we opened an html file in filesystem?",
      "time": "14:39",
      "timestamp": "1709159954.422379",
      "is_reply": true
    },
    {
      "sender": "Jessica",
      "user_id": "UDEF3M2NP",
      "message": "Morally we'd have to do a lot to fix that :persevere: We basically use webapp and apps-server for anything internal these days, so they can be templates or internal api endpoints",
      "time": "14:42",
      "timestamp": "1709160168.876749",
      "is_reply": true
    },
    {
      "sender": "Jessica",
      "user_id": "UDEF3M2NP",
      "message": "Good call, let me check that, I can't remember how we do that. Same for custom UIs",
      "time": "14:43",
      "timestamp": "1709160210.570489",
      "is_reply": true
    }
  ],
  "metadata": {
    "channel_id": "CSY11CK7T",
    "channel_name": "discuss-frontend",
    "date_file": "2024-02-28.json",
    "message_count": 5,
    "start_time": "1709159253.100459",
    "end_time": "1709160210.570489",
    "is_thread": true
  }
}