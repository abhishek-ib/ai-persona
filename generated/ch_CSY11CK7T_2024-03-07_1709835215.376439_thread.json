{
  "id": "ch_CSY11CK7T_2024-03-07_1709835215.376439_thread",
  "type": "channel",
  "channel_name": "discuss-frontend",
  "conversation_type": "thread",
  "participants": [
    "Paul H",
    "Xindi Xu",
    "Ashwin",
    "William Helmrath",
    "Jessica",
    "Serena"
  ],
  "messages": [
    {
      "sender": "Jessica",
      "user_id": "UDEF3M2NP",
      "message": "Bump from React 16 to 17 is ready! https://github.com/instabase/instabase/pull/54324\n\nThe reason we want to make this upgrade is because React 17 starts supporting gradual upgrades, and we'll want to upgrade to 18 and 19. This is an intermediate step. Before we do upgrade to 18, there are unfortunately some packages we'll need to replace :grimacing:  The upgrade to React 17 is not itself too bad. There have been some breaking unit tests I've seen along the way, but those are usually due to the tests themselves, not the components. You can read about the few breaking changes there are here: https://legacy.reactjs.org/blog/2020/08/10/react-v17-rc.html\n\nEven the breaking changes aren't that bad, but they're pretty hard to search for. I'd love if people could read through these and think whether they've seen/written any of these patterns that maybe affected!",
      "time": "10:13",
      "timestamp": "1709835215.376439",
      "is_reply": false
    },
    {
      "sender": "Serena",
      "user_id": "U01CZ3LBFU4",
      "message": "we do use `document.addEventListener` and `e.stopPropagation` in a bunch of places\n\nbut based on the documentation, i can’t immediately think of any bugs that would occur",
      "time": "10:26",
      "timestamp": "1709835976.402259",
      "is_reply": true
    },
    {
      "sender": "Serena",
      "user_id": "U01CZ3LBFU4",
      "message": "should we also do the same react v17 upgrade for the deployment manager frontend? ex: `cloud-console/admiral/app/client/`\n\ncc @Ashwin",
      "time": "10:26",
      "timestamp": "1709835994.203849",
      "is_reply": true
    },
    {
      "sender": "Jessica",
      "user_id": "UDEF3M2NP",
      "message": "Yeah all the packages are upgraded so we can do the deployment manager upgrade in a separate PR easily!",
      "time": "10:29",
      "timestamp": "1709836183.290569",
      "is_reply": true
    },
    {
      "sender": "Xindi Xu",
      "user_id": "U03FT35MAHF",
      "message": "I searched thru the codebase for this case. I do see some useEffect clean ups depends on the ref:\n• lib/src/IBComponents/CopyButton/index.tsx\n• apps/src/flow-review/components/FlowReviewResults/FlowReviewRecord/AnnotationPopover.tsx\n(and more...)\nWe need to dig into these",
      "time": "10:32",
      "timestamp": "1709836348.589879",
      "is_reply": true
    },
    {
      "sender": "Jessica",
      "user_id": "UDEF3M2NP",
      "message": "Thanks Xindi!! I'm thinking the best thing to do is for me to just fix these, since fixing can't hurt",
      "time": "10:36",
      "timestamp": "1709836585.909139",
      "is_reply": true
    },
    {
      "sender": "Paul H",
      "user_id": "U011UPRAPNV",
      "message": "Thanks for doing this upgrade @Jessica! Another step towards the modern era yay.\n\nFun fact: I love the fact that in v17, React’s `e.stopPropagation()` will actually stop triggering native event handlers attached to the `document`. I talked about it all the way back in September 2021 (https://github.com/instabase/frontend-docs/blob/master/guild-agenda.md#september-15-2021) and I remember I was very mad :old_man_yells_at_cloud:",
      "time": "11:54",
      "timestamp": "1709841295.147919",
      "is_reply": true
    },
    {
      "sender": "Jessica",
      "user_id": "UDEF3M2NP",
      "message": "Whoa, throwback!!!",
      "time": "11:55",
      "timestamp": "1709841334.885459",
      "is_reply": true
    },
    {
      "sender": "Ashwin",
      "user_id": "U02R2LS2TPS",
      "message": "cc @William Helmrath for decision on upgrading DM / ICC to react 17",
      "time": "16:03",
      "timestamp": "1709856222.324319",
      "is_reply": true
    },
    {
      "sender": "Jessica",
      "user_id": "UDEF3M2NP",
      "message": "@William Helmrath and @Ashwin I would definitely recommend it, it should be really easy to do. Also because future versions of pollen, toast etc will upgrade to 18 and unless you're on 17 you won't be able to use the more recent versions anymore :grimacing:",
      "time": "16:07",
      "timestamp": "1709856472.647359",
      "is_reply": true
    },
    {
      "sender": "William Helmrath",
      "user_id": "U03T41Q3ZTP",
      "message": "Ooh yeah we should definitely do this. Surprisingly control plane has always been on React 17 but yeah I should update admiral",
      "time": "16:09",
      "timestamp": "1709856597.492539",
      "is_reply": true
    }
  ],
  "metadata": {
    "channel_id": "CSY11CK7T",
    "channel_name": "discuss-frontend",
    "date_file": "2024-03-07.json",
    "message_count": 11,
    "start_time": "1709835215.376439",
    "end_time": "1709856597.492539",
    "is_thread": true
  }
}