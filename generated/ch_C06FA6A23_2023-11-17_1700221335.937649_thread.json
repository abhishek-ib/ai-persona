{
  "id": "ch_C06FA6A23_2023-11-17_1700221335.937649_thread",
  "type": "channel",
  "channel_name": "discuss-engineering",
  "conversation_type": "thread",
  "participants": [
    "mfichman",
    "Travis",
    "Arjun",
    "Serena"
  ],
  "messages": [
    {
      "sender": "mfichman",
      "user_id": "U03DZ9XUE10",
      "message": "I’ll take a look!",
      "time": "03:42",
      "timestamp": "1700221335.937649",
      "is_reply": false
    },
    {
      "sender": "mfichman",
      "user_id": "U03DZ9XUE10",
      "message": "They could be related. The slow query warning is printed for any query taking more than 300ms.",
      "time": "03:43",
      "timestamp": "1700221381.909929",
      "is_reply": true
    },
    {
      "sender": "Arjun",
      "user_id": "U03T41QAMN1",
      "message": "unable to sign in on my local because of this :blob_sad:",
      "time": "07:34",
      "timestamp": "1700235268.553559",
      "is_reply": true
    },
    {
      "sender": "Travis",
      "user_id": "U017E5NNKAP",
      "message": "Is redis running?",
      "time": "07:44",
      "timestamp": "1700235892.828139",
      "is_reply": true
    },
    {
      "sender": "Travis",
      "user_id": "U017E5NNKAP",
      "message": "When it kept crashing on me yesterday it’d make things so slow",
      "time": "07:45",
      "timestamp": "1700235909.824789",
      "is_reply": true
    },
    {
      "sender": "Arjun",
      "user_id": "U03T41QAMN1",
      "message": "looks like it is running in my case — using this as my sign to set up crafting :smile:",
      "time": "08:00",
      "timestamp": "1700236815.027199",
      "is_reply": true
    },
    {
      "sender": "Serena",
      "user_id": "U01CZ3LBFU4",
      "message": "@mfichman have you been able to look into this yet? we’re trying to figure out whether we can rule this out as a possible reason for the `DEADLINE_EXCEEDED` errors in local environments",
      "time": "11:34",
      "timestamp": "1700249643.754569",
      "is_reply": true
    },
    {
      "sender": "Arjun",
      "user_id": "U03T41QAMN1",
      "message": "adding to the thread: I started running into these issues this morning despite not having re-built any services (everything was working fine locally yesterday) which seems to indicate to me that these might be two separate issues (I haven’t seen the `DEADLINE_EXCEEDED` error)",
      "time": "11:37",
      "timestamp": "1700249857.013889",
      "is_reply": true
    },
    {
      "sender": "mfichman",
      "user_id": "U03DZ9XUE10",
      "message": "Not yet, but I'm looking now to see what queries are slow",
      "time": "12:32",
      "timestamp": "1700253136.794329",
      "is_reply": true
    },
    {
      "sender": "mfichman",
      "user_id": "U03DZ9XUE10",
      "message": "Hey folks, the only thing I'm seeing is that the CPU is maxed out (90%) on the Dogfood Oracle DB",
      "time": "12:57",
      "timestamp": "1700254621.887899",
      "is_reply": true
    },
    {
      "sender": "mfichman",
      "user_id": "U03DZ9XUE10",
      "message": "That would definitely cause slowness.",
      "time": "12:57",
      "timestamp": "1700254630.217079",
      "is_reply": true
    },
    {
      "sender": "mfichman",
      "user_id": "U03DZ9XUE10",
      "message": "Also, the CPU credit balance is effectively 0",
      "time": "13:00",
      "timestamp": "1700254825.569529",
      "is_reply": true
    },
    {
      "sender": "mfichman",
      "user_id": "U03DZ9XUE10",
      "message": "",
      "time": "13:00",
      "timestamp": "1700254853.965019",
      "is_reply": true
    },
    {
      "sender": "mfichman",
      "user_id": "U03DZ9XUE10",
      "message": "Past week:",
      "time": "13:01",
      "timestamp": "1700254885.909459",
      "is_reply": true
    },
    {
      "sender": "mfichman",
      "user_id": "U03DZ9XUE10",
      "message": "Past 6 weeks. Looks like it really started to tick up around 10/27",
      "time": "13:02",
      "timestamp": "1700254922.071689",
      "is_reply": true
    },
    {
      "sender": "mfichman",
      "user_id": "U03DZ9XUE10",
      "message": "",
      "time": "13:02",
      "timestamp": "1700254946.329469",
      "is_reply": true
    },
    {
      "sender": "Serena",
      "user_id": "U01CZ3LBFU4",
      "message": "do you think we need to use a bigger db with more cpu?",
      "time": "13:43",
      "timestamp": "1700257386.149869",
      "is_reply": true
    },
    {
      "sender": "mfichman",
      "user_id": "U03DZ9XUE10",
      "message": "I think something about the load profile changed dramatically on 10/31 -- trying to figure out what it is",
      "time": "13:56",
      "timestamp": "1700258207.266679",
      "is_reply": true
    },
    {
      "sender": "mfichman",
      "user_id": "U03DZ9XUE10",
      "message": "Well, 10/29 is when it started actually",
      "time": "13:57",
      "timestamp": "1700258256.802819",
      "is_reply": true
    },
    {
      "sender": "Arjun",
      "user_id": "U03T41QAMN1",
      "message": "this makes sense — i’ve been noticing some slowness for a while",
      "time": "13:57",
      "timestamp": "1700258279.363409",
      "is_reply": true
    },
    {
      "sender": "mfichman",
      "user_id": "U03DZ9XUE10",
      "message": "I think it may have been this https://github.com/instabase/instabase/pull/48920#pullrequestreview-1702277105 :facepalm:",
      "time": "13:59",
      "timestamp": "1700258374.011049",
      "is_reply": true
    },
    {
      "sender": "mfichman",
      "user_id": "U03DZ9XUE10",
      "message": "The top query there is using a lot of CPU `(SELECT (SELECT count(*) FROM v$lock...)`, and that's exactly the query that this PR enables. It's pulling stats from Oracle.",
      "time": "14:00",
      "timestamp": "1700258443.030249",
      "is_reply": true
    },
    {
      "sender": "mfichman",
      "user_id": "U03DZ9XUE10",
      "message": "I just disabled it via controlplane patch -- but it may take a while to settle down. Will also revert the broken part of that PR.",
      "time": "14:01",
      "timestamp": "1700258475.972559",
      "is_reply": true
    },
    {
      "sender": "Arjun",
      "user_id": "U03T41QAMN1",
      "message": "my local works now!",
      "time": "14:31",
      "timestamp": "1700260317.923619",
      "is_reply": true
    },
    {
      "sender": "Arjun",
      "user_id": "U03T41QAMN1",
      "message": "thanks so much @mfichman",
      "time": "14:38",
      "timestamp": "1700260693.657999",
      "is_reply": true
    },
    {
      "sender": "mfichman",
      "user_id": "U03DZ9XUE10",
      "message": "Yep, all fixed!",
      "time": "15:01",
      "timestamp": "1700262061.109199",
      "is_reply": true
    }
  ],
  "metadata": {
    "channel_id": "C06FA6A23",
    "channel_name": "discuss-engineering",
    "date_file": "2023-11-17.json",
    "message_count": 26,
    "start_time": "1700221335.937649",
    "end_time": "1700262061.109199",
    "is_thread": true
  }
}