{
  "id": "ch_C0516UPPMT3_2024-11-12_1731424072.644599_thread",
  "type": "channel",
  "channel_name": "aihub-feedback",
  "conversation_type": "thread",
  "participants": [
    "hannah",
    "Kaustubh (KD)",
    "tony.shi",
    "Anil"
  ],
  "messages": [
    {
      "sender": "Kaustubh (KD)",
      "user_id": "U06G3LGPDFW",
      "message": "cc: @Anil for some the API related questions.",
      "time": "07:07",
      "timestamp": "1731424072.644599",
      "is_reply": false
    },
    {
      "sender": "Kaustubh (KD)",
      "user_id": "U06G3LGPDFW",
      "message": "Number 2 is interesting since we clearly have that value in Human Review (doesn't Human review call the API?)",
      "time": "07:08",
      "timestamp": "1731424107.100239",
      "is_reply": true
    },
    {
      "sender": "tony.shi",
      "user_id": "U03R8QN7VQA",
      "message": "On #2, there are a few ways to find the original value. One way is through the results api at api/v1/flow_binary/results. That response will include both the updated value as well as the original value.\n\nAs an example, I created a deployment which tries to extract airline names from a boarding pass. Instead of a boarding pass, my input consisted of a word doc with the content \"$12.00\". Naturally, AI Hub was not able to find an airline name from my input doc. After updating the field to \"United\", the result api call gives the following response:\n\n```{\n    \"records\": [\n        {\n            \"output_file_path\": \"tonyorg/tony.shi_instabase.com/fs/Instabase Drive/app-runs/b64777e9-21c3-4de7-a80b-cd6fc0766f72/1729788002374/output/s3_apply_refiner/dollars.pdf.ibmsg\",\n            \"results\": [\n                {\n                    \"key\": \"__model_result\",\n                    \"value\": \"{\\\"airline__name\\\": {\\\"line_info\\\": -1.0, \\\"prompt\\\": \\\"airline_name\\\", \\\"prompt_type\\\": \\\"basic\\\", \\\"provenance\\\": [], \\\"image_provenance\\\": [], \\\"confidence\\\": 0.0, \\\"data_type\\\": \\\"TEXT\\\", \\\"value\\\": \\\"\\\"}}\",\n                    \"field_type\": \"DICT\"\n                },\n                {\n                    \"key\": \"airline__name\",\n                    \"value\": \"United\",\n                    \"field_type\": \"TEXT\",\n                    \"ocr_confidence\": 1.0\n                }\n            ],\n            \"record_index\": 0,\n            \"file_name\": \"input_0\",\n            \"layout\": {\n                \"page_layouts\": [\n                    {\n                        \"page_number\": 0,\n                        \"processed_image_path\": \"tonyorg/tony.shi_instabase.com/fs/Instabase Drive/app-runs/b64777e9-21c3-4de7-a80b-cd6fc0766f72/1729788002374/output/s1_process_files/images/dollars.pdf_p0.JPEG.jpeg\",\n                        \"width\": 2550.0,\n                        \"height\": 3301.0,\n                        \"corrected_rotation\": 0,\n                        \"is_blurry\": false,\n                        \"blur_factor\": 0.0,\n                        \"is_image_page\": true,\n                        \"origin_pos\": {\n                            \"x\": 0.0,\n                            \"y\": 0.0\n                        },\n                        \"thumbnail_image_path\": \"tonyorg/tony.shi_instabase.com/fs/Instabase Drive/app-runs/b64777e9-21c3-4de7-a80b-cd6fc0766f72/1729788002374/output/s1_process_files/thumbnails/dollars.pdf_p0.JPEG.JPEG\",\n                        \"model_training_image_path\": \"\",\n                        \"original_page_number\": 0\n                    }\n                ]\n            },\n            \"document_path\": \"tonyorg/tony.shi_instabase.com/fs/Instabase Drive/app-runs/b64777e9-21c3-4de7-a80b-cd6fc0766f72/1729788002374/input/dollars.pdf\",\n            \"checkpoint_results\": {},\n            \"flow_index\": 0,\n            \"file_index\": 0,\n            \"is_manually_reviewed\": true,\n            \"current_step_id\": \"s3\",\n            \"modification_events\": [\n                {\n                    \"timestamp\": \"11/13/2024 00:18:48\",\n                    \"user_id\": \"tony.shi_instabase.com (http://tony.shi_instabase.com)\",\n                    \"step_info\": \"s3\",\n                    \"modifications\": [\n                        {\n                            \"modification_type\": \"field_modification\",\n                            \"field_name\": \"airline__name\",\n                            \"original_value\": \"\",\n                            \"corrected_value\": \"\",\n                            \"message\": \"Added United\",\n                            \"diff_value\": \"\",\n                            \"action_type\": \"CHANGE\"\n                        }\n                    ]\n                },\n                {\n                    \"timestamp\": \"11/13/2024 00:18:50\",\n                    \"user_id\": \"tony.shi_instabase.com (http://tony.shi_instabase.com)\",\n                    \"step_info\": \"s3\",\n                    \"modifications\": [\n                        {\n                            \"modification_type\": \"manually_reviewed_modification\",\n                            \"original_value\": \"False\",\n                            \"corrected_value\": \"True\"\n                        }\n                    ]\n                }\n            ],\n            \"is_human_corrected\": true,\n            \"is_deleted\": false,\n            \"absolute_ibocr_path\": \"tonyorg/tony.shi_instabase.com/fs/Instabase Drive/app-runs/b64777e9-21c3-4de7-a80b-cd6fc0766f72/1729788002374/output/s1_process_files/dollars.pdf.ibmsg\",\n            \"was_classified\": true,\n            \"is_finalized\": true\n        }\n    ],\n    \"binary_path\": \"tonyorg/tony.shi_instabase.com/fs/Instabase Drive/app-runs/b64777e9-21c3-4de7-a80b-cd6fc0766f72/1729788002374/output/bin/app-deployment.ibflowbin\",\n    \"job_id\": \"aab1ce52-9709-4bf2-b8b7-e4ee4f65b555\",\n    \"num_tasks\": 1,\n    \"has_more_tasks\": false,\n    \"next_offset\": 1,\n    \"can_resume\": false,\n    \"on_last_resumable_step\": false\n}```\nFor #3, this should be easy to implement. However, it will require code changes - it is currently not available through configurations",
      "time": "16:27",
      "timestamp": "1731457645.133379",
      "is_reply": true
    },
    {
      "sender": "hannah",
      "user_id": "U01385H7VJL",
      "message": "Hey jumping in here:\n1. \n    a. I believe we should have docIDs for each split doc. Is it the case that they're not populating or just not easy to understand @Hamish?\n    b. This seems to be a bug. @Anil or @tony.shi can we look into why this isn't populating?\n        i. The results should be optional as we wanted to allow users the ability to customize their results depending on what they care about. Are you seeing that everything is returned always? If so that might be a bug as well\n    c. This is an initiative that we're currently working on where a user will be able to get the file path of the split doc (not individual images) cc: @Rakesh \n2. @tony.shi we should not be encouraging users to use the older endpoint. We should update our newer endpoint (<//aihub.instabase.com/api/v2/apps/runs/:run_id/results|api/v2/apps/runs/:run_id/results>) to include this information. Ideally`edit_history` can just include the original value. Can we make this improvement @Anil @tony.shi? I can create a ticket for it. \n3. This is not in the original implementation, but it is something that we can expand in future. @Hamish can you file a ticket for this?",
      "time": "16:37",
      "timestamp": "1731458257.681399",
      "is_reply": true
    },
    {
      "sender": "Anil",
      "user_id": "U01BH8XBR55",
      "message": "@Abhishek Adupa is the best person to look into this. He is away today, Will let him take a look through this and get back.\nI do see page numbers missing - which is something we should add.",
      "time": "16:44",
      "timestamp": "1731458676.674379",
      "is_reply": true
    }
  ],
  "metadata": {
    "channel_id": "C0516UPPMT3",
    "channel_name": "aihub-feedback",
    "date_file": "2024-11-12.json",
    "message_count": 5,
    "start_time": "1731424072.644599",
    "end_time": "1731458676.674379",
    "is_thread": true
  }
}