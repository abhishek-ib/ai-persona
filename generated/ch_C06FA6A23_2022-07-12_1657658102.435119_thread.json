{
  "id": "ch_C06FA6A23_2022-07-12_1657658102.435119_thread",
  "type": "channel",
  "channel_name": "discuss-engineering",
  "conversation_type": "thread",
  "participants": [
    "Kerry",
    "Ashley Sun"
  ],
  "messages": [
    {
      "sender": "Ashley Sun",
      "user_id": "U03F7QMCVRU",
      "message": "Anyone know what to make of these errors when starting *ocr* and *celery app tasks*? It seems like something to do with installing dependencies? (pasted the errors in reply)",
      "time": "13:35",
      "timestamp": "1657658102.435119",
      "is_reply": false
    },
    {
      "sender": "Ashley Sun",
      "user_id": "U03F7QMCVRU",
      "message": "for OCR:\n```#6 602.5 dpkg: dependency problems prevent configuration of libghc-old-locale-prof:\n#6 602.5  libghc-old-locale-prof depends on libghc-old-locale-dev (= 1.0.0.7-9build2); however:\n#6 602.5   Package libghc-old-locale-dev is not configured yet.\n#6 602.5  libghc-old-locale-prof depends on libghc-base-prof-4.13.0.0-2f220; however:\n#6 602.5   Package libghc-base-prof-4.13.0.0-2f220 is not installed.\n#6 602.5   Package ghc-prof which provides libghc-base-prof-4.13.0.0-2f220 is not configured yet.\n#6 602.5\n#6 602.5 dpkg: error processing package libghc-old-locale-prof (--configure):\n#6 602.5  dependency problems - leaving unconfigured\n#6 602.5 Setting up libopencv-dnn-dev:amd64 (4.5.3+dfsg-1ubuntu1) ...\n#6 602.5 dpkg: dependency problems prevent configuration of libghc-ansi-wl-pprint-prof:\n#6 602.5  libghc-ansi-wl-pprint-prof depends on libghc-ansi-wl-pprint-dev (= 0.6.9-2build3); however:\n#6 602.5   Package libghc-ansi-wl-pprint-dev is not configured yet.\n#6 602.5  libghc-ansi-wl-pprint-prof depends on libghc-ansi-terminal-prof-0.10.3-1c365; however:\n#6 602.5   Package libghc-ansi-terminal-prof-0.10.3-1c365 is not installed.\n#6 602.5   Package libghc-ansi-terminal-prof which provides libghc-ansi-terminal-prof-0.10.3-1c365 is not configured yet.\n#6 602.5  libghc-ansi-wl-pprint-prof depends on libghc-base-prof-4.13.0.0-2f220; however:\n#6 602.5   Package libghc-base-prof-4.13.0.0-2f220 is not installed.\n#6 602.5   Package ghc-prof which provides libghc-base-prof-4.13.0.0-2f220 is not configured yet.\n#6 602.5\n#6 602.5 dpkg: error processing package libghc-ansi-wl-pprint-prof (--configure):\n#6 602.5  dependency problems - leaving unconfigured\n#6 602.5 dpkg: dependency problems prevent configuration of libghc-regex-base-prof:\n#6 602.5  libghc-regex-base-prof depends on libghc-regex-base-dev (= 0.94.0.0-1build2); however:\n#6 602.5   Package libghc-regex-base-dev is not configured yet.\n#6 602.5  libghc-regex-base-prof depends on libghc-array-prof-0.5.4.0-ddbb2; however:\n#6 602.5   Package libghc-array-prof-0.5.4.0-ddbb2 is not installed.\n#6 602.5   Package ghc-prof which provides libghc-array-prof-0.5.4.0-ddbb2 is not configured yet.\n#6 602.5  libghc-regex-base-prof depends on libghc-base-prof-4.13.0.0-2f220; however:\n#6 602.5   Package libghc-base-prof-4.13.0.0-2f220 is not installed.\n#6 602.5   Package ghc-prof which provides libghc-base-prof-4.13.0.0-2f220 is not configured yet.\n#6 602.5  libghc-regex-base-prof depends on libghc-bytestring-prof-0.10.10.1-c40ee; however:\n#6 602.5   Package libghc-bytestring-prof-0.10.10.1-c40ee is not installed.\n#6 602.5   Package ghc-prof which provides libghc-bytestring-prof-0.10.10.1-c40ee is not configured yet.\n#6 602.5  libghc-regex-base-prof depends on libghc-containers-prof-0.6.2.1-ab1cf; however:\n#6 602.5   Package libghc-containers-prof-0.6.2.1-ab1cf is not installed.\n#6 602.5   Package ghc-prof which provides libghc-containers-prof-0.6.2.1-ab1cf is not configured yet.\n#6 602.5  libghc-regex-base-prof depends on libghc-mtl-prof-2.2.2-7208c; however:\n#6 602.5   Package libghc-mtl-prof-2.2.2-7208c is not installed.\n#6 602.5   Package ghc-prof which provides libghc-mtl-prof-2.2.2-7208c is not configured yet.\n#6 602.5  libghc-regex-base-prof depends on libghc-text-prof-1.2.4.0-a7a6e; however:\n#6 602.5   Package libghc-text-prof-1.2.4.0-a7a6e is not installed.\n#6 602.5   Package ghc-prof which provides libghc-text-prof-1.2.4.0-a7a6e is not configured yet.\n#6 602.5\n#6 602.5 dpkg: error processing package libghc-regex-base-prof (--configure):\n#6 602.5  dependency problems - leaving unconfigured\n#6 602.5 Setting up libcups2:amd64 (2.3.3op2-7ubuntu2.1) ...\n#6 602.5 Setting up libnetcdf18:amd64 (1:4.7.4-1build1) ...\n#6 602.6 Setting up libswscale5:amd64 (7:4.4.2-0ubuntu0.21.10.1) ...\n#6 602.6 Setting up mesa-va-drivers:amd64 (21.2.6-0ubuntu0.1) ...\n#6 602.6 Setting up libpangoft2-1.0-0:amd64 (1.48.10+ds1-1) ...\n#6 602.6 Setting up i965-va-driver:amd64 (2.4.1+dfsg1-1) ...\n#6 602.6 Setting up libpangocairo-1.0-0:amd64 (1.48.10+ds1-1) ...\n#6 602.6 Setting up libavutil-dev:amd64 (7:4.4.2-0ubuntu0.21.10.1) ...\n#6 602.6 Setting up mesa-vdpau-drivers:amd64 (21.2.6-0ubuntu0.1) ...\n#6 602.6 Setting up libopencv-calib3d4.5:amd64 (4.5.3+dfsg-1ubuntu1) ...\n#6 602.6 Setting up libglx-mesa0:amd64 (21.2.6-0ubuntu0.1) ...\n#6 602.6 Setting up libglx0:amd64 (1.3.3-1) ...\n#6 602.7 Setting up dconf-gsettings-backend:amd64 (0.40.0-1) ...\n#6 602.7 Setting up libopencv-shape4.5:amd64 (4.5.3+dfsg-1ubuntu1) ...\n#6 602.7 Setting up libopencv-photo-dev:amd64 (4.5.3+dfsg-1ubuntu1) ...\n#6 602.7 Setting up libswresample3:amd64 (7:4.4.2-0ubuntu0.21.10.1) ...\n#6 602.7 Setting up librsvg2-2:amd64 (2.50.7+dfsg-1) ...\n#6 602.7 Setting up libopencv-video4.5:amd64 (4.5.3+dfsg-1ubuntu1) ...\n#6 602.7 Setting up libgl1:amd64 (1.3.3-1) ...\n#6 602.7 Setting up va-driver-all:amd64 (2.12.0-2) ...\n#6 602.7 Setting up libswscale-dev:amd64 (7:4.4.2-0ubuntu0.21.10.1) ...\n#6 602.7 Setting up libopencv-stitching4.5:amd64 (4.5.3+dfsg-1ubuntu1) ...\n#6 602.8 Setting up librsvg2-common:amd64 (2.50.7+dfsg-1) ...\n#6 602.9 Setting up libopencv-video-dev:amd64 (4.5.3+dfsg-1ubuntu1) ...\n#6 602.9 Setting up vdpau-driver-all:amd64 (1.4-3build1) ...\n#6 602.9 Setting up libglew2.1:amd64 (2.1.0-4) ...\n#6 602.9 Setting up libopencv-objdetect4.5:amd64 (4.5.3+dfsg-1ubuntu1) ...\n#6 602.9 Setting up libavcodec58:amd64 (7:4.4.2-0ubuntu0.21.10.1) ...\n#6 602.9 Setting up libgtk-3-common (3.24.30-1ubuntu1.1) ...\n#6 602.9 Setting up libchromaprint1:amd64 (1.5.0-2) ...\n#6 603.0 Setting up libopencv-shape-dev:amd64 (4.5.3+dfsg-1ubuntu1) ...\n#6 603.0 Setting up libswresample-dev:amd64 (7:4.4.2-0ubuntu0.21.10.1) ...\n#6 603.0 Setting up libavformat58:amd64 (7:4.4.2-0ubuntu0.21.10.1) ...\n#6 603.0 Setting up libavcodec-dev:amd64 (7:4.4.2-0ubuntu0.21.10.1) ...\n#6 603.0 Setting up libavformat-dev:amd64 (7:4.4.2-0ubuntu0.21.10.1) ...\n#6 603.0 Setting up libgl2ps1.4 (1.4.2+dfsg1-1) ...\n#6 603.0 Setting up libvtk9 (9.0.1+dfsg1-8) ...\n#6 603.0 Setting up libopencv-viz4.5:amd64 (4.5.3+dfsg-1ubuntu1) ...\n#6 603.1 Setting up libopencv-viz-dev:amd64 (4.5.3+dfsg-1ubuntu1) ...\n#6 603.1 Setting up odbcinst (2.3.6-0.1build2) ...\n#6 603.1 Setting up adwaita-icon-theme (40.1.1-1ubuntu1) ...\n#6 603.9 update-alternatives: using /usr/share/icons/Adwaita/cursor.theme to provide /usr/share/icons/default/index.theme (x-cursor-theme) in auto mode\n#6 603.9 Setting up odbcinst1debian2:amd64 (2.3.6-0.1build2) ...\n#6 604.0 Setting up libgdal28 (3.2.2+dfsg-3ubuntu2) ...\n#6 604.0 Setting up humanity-icon-theme (0.6.15) ...\n#6 606.1 Setting up ubuntu-mono (20.10-0ubuntu1) ...\n#6 607.0 Setting up libopencv-imgcodecs4.5:amd64 (4.5.3+dfsg-1ubuntu1) ...\n#6 607.1 Setting up libopencv-imgcodecs-dev:amd64 (4.5.3+dfsg-1ubuntu1) ...\n#6 607.1 Setting up libopencv-videoio4.5:amd64 (4.5.3+dfsg-1ubuntu1) ...\n#6 607.1 Setting up libopencv-videoio-dev:amd64 (4.5.3+dfsg-1ubuntu1) ...\n#6 607.2 Setting up libopencv-videostab4.5:amd64 (4.5.3+dfsg-1ubuntu1) ...\n#6 607.3 Processing triggers for libglib2.0-0:amd64 (2.68.4-1ubuntu1) ...\n#6 607.7 Setting up libgtk-3-0:amd64 (3.24.30-1ubuntu1.1) ...\n#6 608.1 Processing triggers for libc-bin (2.34-0ubuntu3.2) ...\n#6 609.0 Setting up libgtk-3-bin (3.24.30-1ubuntu1.1) ...\n#6 609.0 Setting up libopencv-highgui4.5:amd64 (4.5.3+dfsg-1ubuntu1) ...\n#6 609.1 Setting up libopencv-highgui-dev:amd64 (4.5.3+dfsg-1ubuntu1) ...\n#6 609.1 Setting up libopencv-features2d-dev:amd64 (4.5.3+dfsg-1ubuntu1) ...\n#6 609.1 Setting up libopencv-calib3d-dev:amd64 (4.5.3+dfsg-1ubuntu1) ...\n#6 609.1 Setting up libopencv-objdetect-dev:amd64 (4.5.3+dfsg-1ubuntu1) ...\n#6 609.2 Setting up libopencv-contrib4.5:amd64 (4.5.3+dfsg-1ubuntu1) ...\n#6 609.2 Setting up libopencv-videostab-dev:amd64 (4.5.3+dfsg-1ubuntu1) ...\n#6 609.2 Setting up libopencv-stitching-dev:amd64 (4.5.3+dfsg-1ubuntu1) ...\n#6 609.3 Setting up libopencv4.5-jni (4.5.3+dfsg-1ubuntu1) ...\n#6 609.3 Setting up libopencv-superres4.5:amd64 (4.5.3+dfsg-1ubuntu1) ...\n#6 609.3 Setting up libopencv-superres-dev:amd64 (4.5.3+dfsg-1ubuntu1) ...\n#6 609.3 Setting up libopencv4.5-java (4.5.3+dfsg-1ubuntu1) ...\n#6 609.3 Setting up libopencv-contrib-dev:amd64 (4.5.3+dfsg-1ubuntu1) ...\n#6 609.3 Setting up libopencv-dev (4.5.3+dfsg-1ubuntu1) ...\n#6 609.3 Processing triggers for libgdk-pixbuf-2.0-0:amd64 (2.42.6+dfsg-1build2) ...\n#6 609.9 Processing triggers for libc-bin (2.34-0ubuntu3.2) ...\n#6 610.6 Errors were encountered while processing:\n#6 610.6  ghc\n#6 610.6  libghc-src-exts-dev\n#6 610.6  libghc-random-dev\n#6 610.6  libghc-random-prof\n#6 610.6  libghc-colour-dev\n#6 610.6  libghc-regex-posix-dev\n#6 610.6  libghc-test-framework-prof\n#6 610.6  libghc-regex-posix-prof\n#6 610.6  libghc-test-framework-th-dev\n#6 610.6  libghc-language-haskell-extract-dev\n#6 610.6  libghc-colour-prof\n#6 610.6  libghc-old-locale-dev\n#6 610.6  libghc-src-exts-prof\n#6 610.6  libghc-regex-base-dev\n#6 610.6  libghc-ansi-wl-pprint-dev\n#6 610.6  libghc-test-framework-dev\n#6 610.6  libghc-test-framework-th-prof\n#6 610.6  libghc-ansi-terminal-dev\n#6 610.6  libghc-xml-dev\n#6 610.6  ghc-prof\n#6 610.6  libghc-hostname-dev\n#6 610.6  libghc-language-haskell-extract-prof\n#6 610.6  libghc-ansi-terminal-prof\n#6 610.6  libghc-hostname-prof\n#6 610.6  libghc-xml-prof\n#6 610.6  libghc-old-locale-prof\n#6 610.6  libghc-ansi-wl-pprint-prof\n#6 610.6  libghc-regex-base-prof\n#6 611.1 E: Sub-process /usr/bin/dpkg returned an error code (1)\n------\nexecutor failed running [/bin/sh -c apt-get update -y && apt-get install -y     libboost-all-dev     libcurl4-openssl-dev     libeigen3-dev     libgrpc++-dev     libgrpc++1     libgrpc-dev     libgrpc10     liblept5     libtesseract-dev     libopencv-dev 4.5.1     ninja-build     protobuf-compiler-grpc     git     libgoogle-perftools-dev     && rm -rf /var/lib/apt/lists/*]: exit code: 100\nmake: *** [compile-code] Error 1```",
      "time": "13:36",
      "timestamp": "1657658183.162089",
      "is_reply": true
    },
    {
      "sender": "Ashley Sun",
      "user_id": "U03F7QMCVRU",
      "message": "for celery app tasks:\n```#9 1124.3 Installing collected packages: typed-ast, mypy-extensions, mypy, instabase-foundation\n#9 1124.5   Attempting uninstall: mypy-extensions\n#9 1124.5     Found existing installation: mypy-extensions 0.3.0\n#9 1124.5     Uninstalling mypy-extensions-0.3.0:\n#9 1125.7       Successfully uninstalled mypy-extensions-0.3.0\n#9 1132.6 Successfully installed instabase-foundation-0.0.3 mypy-0.790 mypy-extensions-0.4.3 typed-ast-1.4.3\n#9 1132.6 WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv\n#9 1133.1   % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n#9 1133.1                                  Dload  Upload   Total   Spent    Left  Speed\n  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0\n  0     0    0     0    0     0      0      0 --:--:--  0:02:09 --:--:--     0\n#9 1262.1 curl: (28) Failed to connect to codeload.github.com (http://codeload.github.com) port 443: Connection timed out\n------\nexecutor failed running [/bin/sh -c apt-get update -y &&   DEBIAN_FRONTEND=noninteractive apt-get -y --no-install-recommends install $BUILD_PACKAGES $RUNTIME_PACKAGES &&   python -m pip install --user --upgrade pip setuptools wheel &&   python -m pip install --user -r /tmp/requirements.txt &&   python -m pip install --user git+https://github.com/instabase/foundation.git@15c665b9c9f7d3722d1b3ed9a92f1ce0d94c05b8 &&   curl \"https://github.com/facebookresearch/fastText/archive/v0.9.2.zip\" -L -o \"fasttext.zip\" &&   unzip fasttext.zip &&   rm fasttext.zip &&   cd fastText-0.9.2 &&   make &&   git clone https://github.com/facebookresearch/fastText.git &&   cd fastText &&   python -m pip install --user . &&   apt-get remove --purge -y $BUILD_PACKAGES &&   apt-get autoremove -y &&   rm -rf /var/lib/apt/lists/* &&   rm -rf /home/ibuser/.local/lib/python3.7/site-packages/Cryptodome/SelfTest/PublicKey/test_vectors/* &&   rm -rf /home/ibuser/.local/lib/python3.7/site-packages/gevent/tests/* &&   rm -rf /home/ibuser/.local/lib/python3.7/site-packages/tornado/test/* &&   rm -rf rm -rf /home/ibuser/.local/lib/python3.7/site-packages/Werkzeug-1.0.1.dist-info]: exit code: 28\nmake: *** [build-docker-py-default] Error 1```",
      "time": "13:36",
      "timestamp": "1657658195.481739",
      "is_reply": true
    },
    {
      "sender": "Kerry",
      "user_id": "UCX3VGDJR",
      "message": "what command did you run? `make build runlocal` ?",
      "time": "13:43",
      "timestamp": "1657658590.669719",
      "is_reply": true
    },
    {
      "sender": "Ashley Sun",
      "user_id": "U03F7QMCVRU",
      "message": "I ran `make build-docker run-docker`  for both of these",
      "time": "13:46",
      "timestamp": "1657658768.491449",
      "is_reply": true
    },
    {
      "sender": "Kerry",
      "user_id": "UCX3VGDJR",
      "message": "so first of all if you don’t need to make changes to a service (you just need it to be up to run something), you can use the pre-built containers from provisioner. if you need to build something locally, you need to have all the libraries installed. there should be a `requirements.txt` in each service that you can `pip install -r requirements.txt` to install the libraries.\n\nthat being said, i’m not the most up to date on local env setup, so you can also ask your mentor :slightly_smiling_face:",
      "time": "13:50",
      "timestamp": "1657659018.909859",
      "is_reply": true
    },
    {
      "sender": "Ashley Sun",
      "user_id": "U03F7QMCVRU",
      "message": "Ah got it, that's good to know for the future! I am making changes for celery-app-tasks so I would still need to rebuild that right? I also tried running\n`python provisioner.py start ocr-service`  and got this:\n```ERROR - Could not start service - ocr-service. Error=b\"Unable to find image 'instabase/ocr-service:latest' locally\\ndocker: Error response from daemon: pull access denied for instabase/ocr-service, repository does not exist or may require 'docker login': denied: requested access to the resource is denied.\\nSee 'docker run --help'.\\nmake: *** [run-docker] Error 125\\n\"```\nI ran into a bunch of issues with docker and while zooming w my mentor today we resorted to purging the data  & resetting docker to factory defaults today, so I think it would make sense why it couldnt find this image",
      "time": "14:37",
      "timestamp": "1657661870.022449",
      "is_reply": true
    },
    {
      "sender": "Kerry",
      "user_id": "UCX3VGDJR",
      "message": "you need to `docker login` again? i’d suggest follow the onboarding doc again",
      "time": "14:44",
      "timestamp": "1657662251.384969",
      "is_reply": true
    }
  ],
  "metadata": {
    "channel_id": "C06FA6A23",
    "channel_name": "discuss-engineering",
    "date_file": "2022-07-12.json",
    "message_count": 8,
    "start_time": "1657658102.435119",
    "end_time": "1657662251.384969",
    "is_thread": true
  }
}