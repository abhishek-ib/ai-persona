{
  "id": "ch_C073F3T5KRQ_2025-07-02_1751488109.101919_thread",
  "type": "channel",
  "channel_name": "discuss-backend",
  "conversation_type": "thread",
  "participants": [
    "Xindi Xu",
    "mfichman",
    "Anil",
    "Goto Tools Go Links",
    "tony.shi"
  ],
  "messages": [
    {
      "sender": "tony.shi",
      "user_id": "U03R8QN7VQA",
      "message": "Following",
      "time": "13:28",
      "timestamp": "1751488109.101919",
      "is_reply": false
    },
    {
      "sender": "Anil",
      "user_id": "U01BH8XBR55",
      "message": "cc @Abhishek Adupa - is this related to your change by any chance?",
      "time": "13:40",
      "timestamp": "1751488807.894829",
      "is_reply": true
    },
    {
      "sender": "Xindi Xu",
      "user_id": "U03FT35MAHF",
      "message": "ahh, i forgot to update this. I fixed it and the fix was merged into master. Try rebasing!",
      "time": "13:44",
      "timestamp": "1751489071.729189",
      "is_reply": true
    },
    {
      "sender": "Xindi Xu",
      "user_id": "U03FT35MAHF",
      "message": "Matt had a proper fix and that's merged too: https://github.com/instabase/instabase/pull/71874",
      "time": "13:45",
      "timestamp": "1751489131.574819",
      "is_reply": true
    },
    {
      "sender": "tony.shi",
      "user_id": "U03R8QN7VQA",
      "message": "Why testing core-platform locally, I'm running into mockAccessor issues\n\n```(api-server-R9J_7aBi-py3.9) owner@dev:~/instabase/core-services/core-platform-service$ make test\ngolint /home/owner/instabase/core-services/core-platform-service/src/go/src/instabase/coreplatformservice/...\nwarning: \"/home/owner/instabase/core-services/core-platform-service/src/go/src/instabase/coreplatformservice/...\" matched no packages\nINFO: Writing tracer profile to '/home/owner/.cache/bazel/_bazel_owner/99c13e9d3f9affca3e421b943f545ec7/command.profile.gz'\nINFO: Invocation ID: 96d76810-37c8-4335-8fc1-3a60f7af036b\nINFO: Build option --test_env has changed, discarding analysis cache.\nINFO: Analyzed 56 targets (0 packages loaded, 44876 targets configured).\nINFO: Found 45 targets and 11 test targets...\nERROR: /home/owner/instabase/shared-utils/go-utils/src/instabase/coreplatformservice/database/handler/BUILD.bazel:25:11: GoCompilePkg shared-utils/go-utils/src/instabase/coreplatformservice/database/handler/handler_test.internal.a failed: (Exit 1): builder failed: error executing command (from target //shared-utils/go-utils/src/instabase/coreplatformservice/database/handler:handler_test) bazel-out/k8-opt-exec-2B5CBBC6/bin/external/go_linux_sdk/builder_reset/builder compilepkg -sdk external/go_linux_sdk -installsuffix linux_amd64 -src ... (remaining 103 arguments skipped)\n\nUse --sandbox_debug to see verbose messages from the sandbox and retain the sandbox build root for debugging\nshared-utils/go-utils/src/instabase/coreplatformservice/database/handler/database_service_test.go:118:22: cannot use mockAccessor (variable of type *\"instabase/mocks/utils/db/accessor\".PlatformAccessor) as \"instabase/utils/db/accessor\".PlatformAccessor value in argument to New: *\"instabase/mocks/utils/db/accessor\".PlatformAccessor does not implement \"instabase/utils/db/accessor\".PlatformAccessor (missing method DeleteAppDeploymentLinkRequests)\nshared-utils/go-utils/src/instabase/coreplatformservice/database/handler/database_service_test.go:204:22: cannot use mockAccessor (variable of type *\"instabase/mocks/utils/db/accessor\".PlatformAccessor) as \"instabase/utils/db/accessor\".PlatformAccessor value in argument to New: *\"instabase/mocks/utils/db/accessor\".PlatformAccessor does not implement \"instabase/utils/db/accessor\".PlatformAccessor (missing method DeleteAppDeploymentLinkRequests)\nshared-utils/go-utils/src/instabase/coreplatformservice/database/handler/database_service_test.go:226:22: cannot use mockAccessor (variable of type *\"instabase/mocks/utils/db/accessor\".PlatformAccessor) as \"instabase/utils/db/accessor\".PlatformAccessor value in argument to New: *\"instabase/mocks/utils/db/accessor\".PlatformAccessor does not implement \"instabase/utils/db/accessor\".PlatformAccessor (missing method DeleteAppDeploymentLinkRequests)\nshared-utils/go-utils/src/instabase/coreplatformservice/database/handler/database_service_test.go:239:21: cannot use mockAccessor (variable of type *\"instabase/mocks/utils/db/accessor\".PlatformAccessor) as \"instabase/utils/db/accessor\".PlatformAccessor value in argument to New: *\"instabase/mocks/utils/db/accessor\".PlatformAccessor does not implement \"instabase/utils/db/accessor\".PlatformAccessor (missing method DeleteAppDeploymentLinkRequests)\nshared-utils/go-utils/src/instabase/coreplatformservice/database/handler/database_service_test.go:260:22: cannot use mockAccessor (variable of type *\"instabase/mocks/utils/db/accessor\".PlatformAccessor) as \"instabase/utils/db/accessor\".PlatformAccessor value in argument to New: *\"instabase/mocks/utils/db/accessor\".PlatformAccessor does not implement \"instabase/utils/db/accessor\".PlatformAccessor (missing method DeleteAppDeploymentLinkRequests)\nshared-utils/go-utils/src/instabase/coreplatformservice/database/handler/database_service_test.go:281:22: cannot use mockAccessor (variable of type *\"instabase/mocks/utils/db/accessor\".PlatformAccessor) as \"instabase/utils/db/accessor\".PlatformAccessor value in argument to New: *\"instabase/mocks/utils/db/accessor\".PlatformAccessor does not implement \"instabase/utils/db/accessor\".PlatformAccessor (missing method DeleteAppDeploymentLinkRequests)\nshared-utils/go-utils/src/instabase/coreplatformservice/database/handler/database_service_test.go:302:22: cannot use mockAccessor (variable of type *\"instabase/mocks/utils/db/accessor\".PlatformAccessor) as \"instabase/utils/db/accessor\".PlatformAccessor value in argument to New: *\"instabase/mocks/utils/db/accessor\".PlatformAccessor does not implement \"instabase/utils/db/accessor\".PlatformAccessor (missing method DeleteAppDeploymentLinkRequests)\nshared-utils/go-utils/src/instabase/coreplatformservice/database/handler/database_service_test.go:325:22: cannot use mockAccessor (variable of type *\"instabase/mocks/utils/db/accessor\".PlatformAccessor) as \"instabase/utils/db/accessor\".PlatformAccessor value in argument to New: *\"instabase/mocks/utils/db/accessor\".PlatformAccessor does not implement \"instabase/utils/db/accessor\".PlatformAccessor (missing method DeleteAppDeploymentLinkRequests)\nshared-utils/go-utils/src/instabase/coreplatformservice/database/handler/database_service_test.go:339:21: cannot use mockAccessor (variable of type *\"instabase/mocks/utils/db/accessor\".PlatformAccessor) as \"instabase/utils/db/accessor\".PlatformAccessor value in argument to New: *\"instabase/mocks/utils/db/accessor\".PlatformAccessor does not implement \"instabase/utils/db/accessor\".PlatformAccessor (missing method DeleteAppDeploymentLinkRequests)\nshared-utils/go-utils/src/instabase/coreplatformservice/database/handler/database_service_test.go:361:22: cannot use mockAccessor (variable of type *\"instabase/mocks/utils/db/accessor\".PlatformAccessor) as \"instabase/utils/db/accessor\".PlatformAccessor value in argument to New: *\"instabase/mocks/utils/db/accessor\".PlatformAccessor does not implement \"instabase/utils/db/accessor\".PlatformAccessor (missing method DeleteAppDeploymentLinkRequests)\nshared-utils/go-utils/src/instabase/coreplatformservice/database/handler/database_service_test.go:361:22: too many errors\ncompilepkg: error running subcommand PATH=/usr/bin:/bin \\\nCGO_ENABLED=1 \\\nGOARCH=amd64 \\\nGOPATH= \\\nTMPDIR=/tmp \\\nGOTOOLCHAIN=local \\\nGOROOT_FINAL=GOROOT \\\nGOEXPERIMENT=nocoverageredesign \\\nGOOS=linux \\\nGOROOT=bazel-out/k8-fastbuild-ST-b33d65c724e6/bin/external/io_bazel_rules_go/stdlib_ \\\nexternal/go_linux_sdk/pkg/tool/linux_amd64/compile -p instabase/coreplatformservice/database/handler -importcfg /home/owner/.cache/bazel/_bazel_owner/99c13e9d3f9affca3e421b943f545ec7/sandbox/processwrapper-sandbox/1817/execroot/__main__/bazel-out/k8-fastbuild/bin/shared-utils/go-utils/src/instabase/coreplatformservice/database/handler/importcfg4175168621 -pack -trimpath=/home/owner/.cache/bazel/_bazel_owner/99c13e9d3f9affca3e421b943f545ec7/sandbox/processwrapper-sandbox/1817/execroot/__main__ -o /home/owner/.cache/bazel/_bazel_owner/99c13e9d3f9affca3e421b943f545ec7/sandbox/processwrapper-sandbox/1817/execroot/__main__/bazel-out/k8-fastbuild/bin/shared-utils/go-utils/src/instabase/coreplatformservice/database/handler/handler_test.internal.x -linkobj /home/owner/.cache/bazel/_bazel_owner/99c13e9d3f9affca3e421b943f545ec7/sandbox/processwrapper-sandbox/1817/execroot/__main__/bazel-out/k8-fastbuild/bin/shared-utils/go-utils/src/instabase/coreplatformservice/database/handler/handler_test.internal.a -- /home/owner/.cache/bazel/_bazel_owner/99c13e9d3f9affca3e421b943f545ec7/sandbox/processwrapper-sandbox/1817/execroot/__main__/shared-utils/go-utils/src/instabase/coreplatformservice/database/handler/archive.go /home/owner/.cache/bazel/_bazel_owner/99c13e9d3f9affca3e421b943f545ec7/sandbox/processwrapper-sandbox/1817/execroot/__main__/shared-utils/go-utils/src/instabase/coreplatformservice/database/handler/database_service.go /home/owner/.cache/bazel/_bazel_owner/99c13e9d3f9affca3e421b943f545ec7/sandbox/processwrapper-sandbox/1817/execroot/__main__/shared-utils/go-utils/src/instabase/coreplatformservice/database/handler/handler.go /home/owner/.cache/bazel/_bazel_owner/99c13e9d3f9affca3e421b943f545ec7/sandbox/processwrapper-sandbox/1817/execroot/__main__/shared-utils/go-utils/src/instabase/coreplatformservice/database/handler/archive_test.go /home/owner/.cache/bazel/_bazel_owner/99c13e9d3f9affca3e421b943f545ec7/sandbox/processwrapper-sandbox/1817/execroot/__main__/shared-utils/go-utils/src/instabase/coreplatformservice/database/handler/common_test.go /home/owner/.cache/bazel/_bazel_owner/99c13e9d3f9affca3e421b943f545ec7/sandbox/processwrapper-sandbox/1817/execroot/__main__/shared-utils/go-utils/src/instabase/coreplatformservice/database/handler/database_service_test.go /home/owner/.cache/bazel/_bazel_owner/99c13e9d3f9affca3e421b943f545ec7/sandbox/processwrapper-sandbox/1817/execroot/__main__/shared-utils/go-utils/src/instabase/coreplatformservice/database/handler/handler_test.go: exit status 2\nERROR: /home/owner/instabase/shared-utils/go-utils/src/instabase/coreplatformservice/database/handler/BUILD.bazel:25:11 GoCompilePkg shared-utils/go-utils/src/instabase/coreplatformservice/database/handler/handler_test_test.external.a failed: (Exit 1): builder failed: error executing command (from target //shared-utils/go-utils/src/instabase/coreplatformservice/database/handler:handler_test) bazel-out/k8-opt-exec-2B5CBBC6/bin/external/go_linux_sdk/builder_reset/builder compilepkg -sdk external/go_linux_sdk -installsuffix linux_amd64 -src ... (remaining 103 arguments skipped)\n\nUse --sandbox_debug to see verbose messages from the sandbox and retain the sandbox build root for debugging\nINFO: Elapsed time: 7.465s, Critical Path: 5.50s\nINFO: 11 processes: 1 remote cache hit, 10 internal.\nFAILED: Build did NOT complete successfully\n//shared-utils/go-utils/src/instabase/coreplatformservice/account/config:config_test (cached) PASSED in 0.1s\n//shared-utils/go-utils/src/instabase/coreplatformservice/config:config_test (cached) PASSED in 0.0s\n//shared-utils/go-utils/src/instabase/coreplatformservice/mount/config:config_test (cached) PASSED in 0.1s\n//shared-utils/go-utils/src/instabase/coreplatformservice/mount/tableclient:tableclient_test (cached) PASSED in 0.0s\n//shared-utils/go-utils/src/instabase/coreplatformservice/repo/config:config_test (cached) PASSED in 0.1s\n//shared-utils/go-utils/src/instabase/coreplatformservice/account/handler:handler_test NO STATUS\n//shared-utils/go-utils/src/instabase/coreplatformservice/aihub:aihub_test NO STATUS\n//shared-utils/go-utils/src/instabase/coreplatformservice/common:common_test NO STATUS\n//shared-utils/go-utils/src/instabase/coreplatformservice/database/handler:handler_test NO STATUS\n//shared-utils/go-utils/src/instabase/coreplatformservice/mount/handler:handler_test NO STATUS\n//shared-utils/go-utils/src/instabase/coreplatformservice/repo/handler:handler_test NO STATUS\n\nExecuted 0 out of 11 tests: 5 tests pass and 6 were skipped.\nThere were tests whose specified size is too big. Use the --test_verbose_timeout_warnings command line option to see which ones these are.\nmake: *** [Makefile:24: test] Error 1```",
      "time": "14:19",
      "timestamp": "1751491151.612589",
      "is_reply": true
    },
    {
      "sender": "Goto Tools Go Links",
      "user_id": "U07NAC7GVNY",
      "message": "https://goto.tools/src/instabase/coreplatformservice/",
      "time": "14:19",
      "timestamp": "1751491152.648949",
      "is_reply": true
    },
    {
      "sender": "Goto Tools Go Links",
      "user_id": "U07NAC7GVNY",
      "message": "https://goto.tools/stdlib_",
      "time": "14:19",
      "timestamp": "1751491152.651719",
      "is_reply": true
    },
    {
      "sender": "Goto Tools Go Links",
      "user_id": "U07NAC7GVNY",
      "message": "https://goto.tools/src/instabase/coreplatformservice/",
      "time": "14:19",
      "timestamp": "1751491152.661759",
      "is_reply": true
    },
    {
      "sender": "tony.shi",
      "user_id": "U03R8QN7VQA",
      "message": "Also, it looks like we can no longer manually build the db accessor mocks anymore\n```(api-server-R9J_7aBi-py3.9) owner@dev:~/instabase/shared-utils/go-utils/src/instabase/utils/db$ make build-mocks \nMakefile:19: warning: overriding recipe for target 'run-golint'\n/home/owner/instabase/shared-utils/go-utils/src/instabase/utils/db/../../../../../../shared-utils/build-utils/shared/build-go.mk:42: warning: ignoring old recipe for target 'run-golint'\nmake: *** No rule to make target 'build-mocks'.  Stop.```",
      "time": "14:19",
      "timestamp": "1751491176.262779",
      "is_reply": true
    },
    {
      "sender": "tony.shi",
      "user_id": "U03R8QN7VQA",
      "message": "Is there a way to re-trigger the automatic mock build process?",
      "time": "14:20",
      "timestamp": "1751491212.274669",
      "is_reply": true
    },
    {
      "sender": "Anil",
      "user_id": "U01BH8XBR55",
      "message": "@mfichman any chance you can help?\n\nMy guess is the file to regenerate is shared-utils/go-utils/src/instabase/mocks/utils/db/accessor/mocks.go\nI tried to re-generate it hit a different error\n```owner@dev:~/instabase/shared-utils/go-utils/src/instabase$ make generate\ngo generate ./protos\ngo generate ./mocks\n2025-07-02T21:55:32.159180592Z INF Starting mockery config-file=/home/owner/instabase/shared-utils/go-utils/src/instabase/.mockery.yml version=v3.5.0\n2025-07-02T21:55:32.159696890Z INF Parsing configured packages... version=v3.5.0\n2025-07-02T21:55:44.656886131Z ERR unable to parse packages error=\"getting package-level config: package net/http/internal/testcert does not exist in the config\" version=v3.5.0\n2025-07-02T21:55:44.656941198Z FTL app failed error=\"getting package-level config: package net/http/internal/testcert does not exist in the config\" version=v3.5.0\nmocks/generate.go:3: running \"go\": exit status 1\nmake: *** [Makefile:8: generate] Error 1```",
      "time": "16:31",
      "timestamp": "1751499117.941169",
      "is_reply": true
    },
    {
      "sender": "mfichman",
      "user_id": "U03DZ9XUE10",
      "message": "Hey all",
      "time": "18:42",
      "timestamp": "1751506940.393429",
      "is_reply": true
    },
    {
      "sender": "mfichman",
      "user_id": "U03DZ9XUE10",
      "message": "The problem is that the Bazel build for these mocks stopped working b/c of a problem with godror. I'll try to find a workaround in the AM. In the meantime...maybe we can disable the DB mocks and the tests that use the DB mocks. There are not that many, and they're in license-service mostly. Which is going away.",
      "time": "18:43",
      "timestamp": "1751506992.949449",
      "is_reply": true
    },
    {
      "sender": "tony.shi",
      "user_id": "U03R8QN7VQA",
      "message": "Got it. Thank you!!!",
      "time": "18:43",
      "timestamp": "1751507013.920839",
      "is_reply": true
    },
    {
      "sender": "mfichman",
      "user_id": "U03DZ9XUE10",
      "message": "I can tackle that in the morning, but @tony.shi you can also give it a shot to unblock yourself",
      "time": "18:43",
      "timestamp": "1751507020.708329",
      "is_reply": true
    }
  ],
  "metadata": {
    "channel_id": "C073F3T5KRQ",
    "channel_name": "discuss-backend",
    "date_file": "2025-07-02.json",
    "message_count": 15,
    "start_time": "1751488109.101919",
    "end_time": "1751507020.708329",
    "is_thread": true
  }
}