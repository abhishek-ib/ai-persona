{
  "id": "ch_C06FA6A23_2021-03-17_1615999575.008900_thread",
  "type": "channel",
  "channel_name": "discuss-engineering",
  "conversation_type": "thread",
  "participants": [
    "Ashish",
    "Kerry",
    "Heymian",
    "Mohit"
  ],
  "messages": [
    {
      "sender": "Ashish",
      "user_id": "U3UJ09DJ6",
      "message": "we are observing database connection issues in account service",
      "time": "09:46",
      "timestamp": "1615999575.008900",
      "is_reply": false
    },
    {
      "sender": "Ashish",
      "user_id": "U3UJ09DJ6",
      "message": "```2021/03/17 16:42:47 ERROR utils/db/session/dbsession.go:305 -- Prepare statement failed: dial tcp 35.168.160.40:3306: connect: connection timed out\n2021/03/17 16:42:47 panic in processor: runtime error: invalid memory address or nil pointer dereference: goroutine 1184 [running]:\nruntime/debug.Stack(0xc0009853f0, 0xfc36a0, 0x1878700)\n\t/usr/local/go/src/runtime/debug/stack.go:24 +0x9f\ngithub.com/apache/thrift/lib/go/thrift.(*TSimpleServer).processRequests.func1() (http://github.com/apache/thrift/lib/go/thrift.(*TSimpleServer).processRequests.func1())\n\t/root/go/pkg/mod/github.com/apache/thrift@v0.13.0/lib/go/thrift/simple_server.go:234 +0x57\npanic(0xfc36a0, 0x1878700)\n\t/usr/local/go/src/runtime/panic.go:975 +0x3e9\ndatabase/sql.(*Row).Err(...)\n\t/usr/local/go/src/database/sql/sql.go:3240\ninstabase/utils/db/accessor.(*dbAccessor).QueryRow(0xc000120840, 0x1101475, 0x14, 0xc0005f47f1, 0xf, 0xc00089e340, 0x1, 0x1, 0x416390, 0xc00048c050, ...)\n\t/go/src/instabase/shared-utils/go-utils/src/instabase/utils/db/accessor/scanner.go:290 +0xc9\ninstabase/utils/db/accessor.(*dbAccessor).GetUserAccountByUsername(0xc000120840, 0xc000042b00, 0x3, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, ...)\n\t/go/src/instabase/shared-utils/go-utils/src/instabase/utils/db/accessor/user_accessor.go:324 +0x1bb\ninstabase/utils/acl.(*ACLManager).NewUserPrincipal(0xc00011d560, 0xc000042b00, 0x3, 0xc000042af0, 0x4, 0xc00048c050)\n\t/go/src/instabase/shared-utils/go-utils/src/instabase/utils/acl/user_principal.go:131 +0x79\ninstabase/accountservice/handler.(*AccountServiceHandler).getRepoInfo(0xc00019e360, 0xc0007a1ef0, 0x2, 0xc00089e140, 0xc00071bb98, 0xc000985b80, 0x2)\n\t/go/src/instabase/core-services/account-tservice/src/go/src/instabase/accountservice/handler/repo_acl.go:159 +0x287\ninstabase/accountservice/handler.(*AccountServiceHandler).GetFsPerms(0xc00019e360, 0x1237980, 0xc000042048, 0xc0005aee40, 0x0, 0x41cc7d, 0x10f883d)\n\t/go/src/instabase/core-services/account-tservice/src/go/src/instabase/accountservice/handler/repo_acl.go:819 +0x252\ninstabase/account.(*accountServiceProcessorGetFsPerms).Process(0xc00019d910, 0x1237980, 0xc000042048, 0x0, 0x1247fe0, 0xc0004eac40, 0x1247fe0, 0xc0004eacb0, 0x737f01, 0x0, ...)\n\t/go/src/instabase/core-services/account-tservice/build/go/src/instabase/account/account.go:43238 +0x2c5\ninstabase/account.(*AccountServiceProcessor).Process(0xc00011d5a0, 0x1237980, 0xc000042048, 0x1247fe0, 0xc0004eac40, 0x1247fe0, 0xc0004eacb0, 0xc00001a601, 0x0, 0x0)\n\t/go/src/instabase/core-services/account-tservice/build/go/src/instabase/account/account.go:41237 +0x34d\ngithub.com/apache/thrift/lib/go/thrift.(*TSimpleServer).processRequests(0xc0001c81b0 (http://github.com/apache/thrift/lib/go/thrift.(*TSimpleServer).processRequests(0xc0001c81b0), 0x123fbe0, 0xc000576a80, 0x0, 0x0)\n\t/root/go/pkg/mod/github.com/apache/thrift@v0.13.0/lib/go/thrift/simple_server.go:264 +0x23b\ngithub.com/apache/thrift/lib/go/thrift.(*TSimpleServer).innerAccept.func1(0xc0001c81b0 (http://github.com/apache/thrift/lib/go/thrift.(*TSimpleServer).innerAccept.func1(0xc0001c81b0), 0x123fbe0, 0xc000576a80)\n\t/root/go/pkg/mod/github.com/apache/thrift@v0.13.0/lib/go/thrift/simple_server.go:166 +0x6f\ncreated by github.com/apache/thrift/lib/go/thrift.(*TSimpleServer).innerAccept (http://github.com/apache/thrift/lib/go/thrift.(*TSimpleServer).innerAccept)\n\t/root/go/pkg/mod/github.com/apache/thrift@v0.13.0/lib/go/thrift/simple_server.go:164 +0x14d```",
      "time": "09:46",
      "timestamp": "1615999584.009200",
      "is_reply": true
    },
    {
      "sender": "Ashish",
      "user_id": "U3UJ09DJ6",
      "message": "have we made any changes to the database library? cc @Heymian",
      "time": "09:56",
      "timestamp": "1616000219.009500",
      "is_reply": true
    },
    {
      "sender": "Kerry",
      "user_id": "UCX3VGDJR",
      "message": "following this thread - @Ashish if you can update there that when the problem is resolved it’d be :thumbsup: thank you",
      "time": "10:05",
      "timestamp": "1616000734.010000",
      "is_reply": true
    },
    {
      "sender": "Ashish",
      "user_id": "U3UJ09DJ6",
      "message": "@Kerry I think this might be a google cloud level problem",
      "time": "10:21",
      "timestamp": "1616001693.010400",
      "is_reply": true
    },
    {
      "sender": "Ashish",
      "user_id": "U3UJ09DJ6",
      "message": "google cloud is currently facing networking problems between regions and between regions and internet.\n\nhttps://status.cloud.google.com/incident/cloud-networking/21006",
      "time": "10:22",
      "timestamp": "1616001728.010600",
      "is_reply": true
    },
    {
      "sender": "Heymian",
      "user_id": "UADQ9V8PK",
      "message": "yeah, no changes to db library. thanks for the outage catch!",
      "time": "10:30",
      "timestamp": "1616002200.013000",
      "is_reply": true
    },
    {
      "sender": "Mohit",
      "user_id": "ULPBBF8PR",
      "message": "fyi @Naveen [ @Ashish me and @Naveen still think (yet to verify), last week’s dynamic proxy issues were related to DB issues causing account service timeouts.]",
      "time": "15:27",
      "timestamp": "1616020060.015100",
      "is_reply": true
    }
  ],
  "metadata": {
    "channel_id": "C06FA6A23",
    "channel_name": "discuss-engineering",
    "date_file": "2021-03-17.json",
    "message_count": 8,
    "start_time": "1615999575.008900",
    "end_time": "1616020060.015100",
    "is_thread": true
  }
}