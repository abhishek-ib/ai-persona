{
  "id": "ch_C06FA6A23_2022-08-17_1660761679.741579_thread",
  "type": "channel",
  "channel_name": "discuss-engineering",
  "conversation_type": "thread",
  "participants": [
    "jtau",
    "Senthil Anand Govindarajan",
    "shiqi",
    "Ashwin"
  ],
  "messages": [
    {
      "sender": "Senthil Anand Govindarajan",
      "user_id": "U03CHKHHA92",
      "message": "C1 image repackaging for injecting password from vault fails to do a apt-get as part of the DockerFile, and it looks like  ubuntu repos throw up since the OS is EOL.",
      "time": "11:41",
      "timestamp": "1660761679.741579",
      "is_reply": false
    },
    {
      "sender": "shiqi",
      "user_id": "U034SGEJLQ6",
      "message": "what version was C1 running on? we had a patch for the ubuntu repo issue to older releases,\n22.08 has been upgraded to ubuntu 22 but that change hasn't been backported yet as far as I know @jtau @Ashwin",
      "time": "11:46",
      "timestamp": "1660762006.579019",
      "is_reply": true
    },
    {
      "sender": "Senthil Anand Govindarajan",
      "user_id": "U03CHKHHA92",
      "message": "They are upgrading to 22.01",
      "time": "11:47",
      "timestamp": "1660762034.726599",
      "is_reply": true
    },
    {
      "sender": "Senthil Anand Govindarajan",
      "user_id": "U03CHKHHA92",
      "message": "they had a ship sometime in early June ... few of the repackaging of containers went fine since EOL kicked in July 14",
      "time": "11:48",
      "timestamp": "1660762112.584209",
      "is_reply": true
    },
    {
      "sender": "jtau",
      "user_id": "U02F9FESZRN",
      "message": "do we just need to send them updated image tags for their release version?",
      "time": "11:50",
      "timestamp": "1660762202.992109",
      "is_reply": true
    },
    {
      "sender": "jtau",
      "user_id": "U02F9FESZRN",
      "message": "the new tags should be the ones that we backported / fixed",
      "time": "11:50",
      "timestamp": "1660762214.755419",
      "is_reply": true
    },
    {
      "sender": "Ashwin",
      "user_id": "U02R2LS2TPS",
      "message": "No the changes havent been backported yet @shiqi",
      "time": "11:50",
      "timestamp": "1660762231.418639",
      "is_reply": true
    },
    {
      "sender": "Ashwin",
      "user_id": "U02R2LS2TPS",
      "message": "This is something that I still need to handle",
      "time": "11:50",
      "timestamp": "1660762244.320249",
      "is_reply": true
    },
    {
      "sender": "Senthil Anand Govindarajan",
      "user_id": "U03CHKHHA92",
      "message": "Should i raise a zendesk ticket and assign it to you @jtau / @Ashwin ? for the new images with the upgraded OS ?",
      "time": "11:54",
      "timestamp": "1660762498.593329",
      "is_reply": true
    },
    {
      "sender": "Ashwin",
      "user_id": "U02R2LS2TPS",
      "message": "Is the timeline for the new images immediately @Senthil Anand Govindarajan?",
      "time": "11:58",
      "timestamp": "1660762699.917399",
      "is_reply": true
    },
    {
      "sender": "Senthil Anand Govindarajan",
      "user_id": "U03CHKHHA92",
      "message": "well they can keep their DEV running with the pre-delivered images. but to rollout the password inject, have to rebuild images, thats were this issue pops up. But in general yes the new images have to be ready ASAP.",
      "time": "12:01",
      "timestamp": "1660762913.191509",
      "is_reply": true
    },
    {
      "sender": "Senthil Anand Govindarajan",
      "user_id": "U03CHKHHA92",
      "message": "these EOL statuses always create a lot of urgency at customer sites.",
      "time": "12:02",
      "timestamp": "1660762958.825439",
      "is_reply": true
    },
    {
      "sender": "shiqi",
      "user_id": "U034SGEJLQ6",
      "message": "hmm the repo patch (https://github.com/instabase/instabase/pull/28896) is in 22.01 release to make the older version work, even they are EOL, I am curious what error are we getting",
      "time": "12:35",
      "timestamp": "1660764908.710229",
      "is_reply": true
    },
    {
      "sender": "Senthil Anand Govindarajan",
      "user_id": "U03CHKHHA92",
      "message": "captured in https://instabase.zendesk.com/agent/tickets/4018",
      "time": "12:37",
      "timestamp": "1660765033.166749",
      "is_reply": true
    },
    {
      "sender": "shiqi",
      "user_id": "U034SGEJLQ6",
      "message": "I don't have access to zendesk, can somebody paste the logs here? no worries if this is already being taken care of",
      "time": "16:00",
      "timestamp": "1660777225.987419",
      "is_reply": true
    },
    {
      "sender": "Ashwin",
      "user_id": "U02R2LS2TPS",
      "message": "I'm not at my computer rn but I can send over whats on zen desk when I'm a bit. Also I'm actively working on back porting the Ubuntu upgrade all the way to 21.10",
      "time": "17:06",
      "timestamp": "1660781190.978629",
      "is_reply": true
    },
    {
      "sender": "shiqi",
      "user_id": "U034SGEJLQ6",
      "message": "@Ashwin no rush, I am just curious what error we are seeing because with the repo patch it should still be able to pull packages even from 21.10",
      "time": "17:11",
      "timestamp": "1660781470.254149",
      "is_reply": true
    },
    {
      "sender": "Senthil Anand Govindarajan",
      "user_id": "U03CHKHHA92",
      "message": "@shiqi, This is the log capture from C1\n```Repackaging IB containers with the vault password fetch.\n\nImage rebuild fails --\n\n13:42:25 Ign:1 http://security.ubuntu.com/ubuntu impish-security InRelease\n13:42:25 Ign:2 http://archive.ubuntu.com/ubuntu impish InRelease\n13:42:25 Err:3 http://security.ubuntu.com/ubuntu impish-security Release\n13:42:25 404 Not Found [IP: 10.200.10.61 8099]\n13:42:25 Ign:4 http://archive.ubuntu.com/ubuntu impish-updates InRelease\n13:42:25 Ign:5 http://archive.ubuntu.com/ubuntu impish-backports InRelease\n13:42:25 Err:6 http://archive.ubuntu.com/ubuntu impish Release\n13:42:25 404 Not Found [IP: 10.200.8.188 8099]\n13:42:25 Err:7 http://archive.ubuntu.com/ubuntu impish-updates Release\n13:42:25 404 Not Found [IP: 10.200.8.188 8099]\n13:42:25 Err:8 http://archive.ubuntu.com/ubuntu impish-backports Release\n13:42:25 404 Not Found [IP: 10.200.8.188 8099]\n13:42:25 Reading package lists...\n13:42:25 E: The repository 'http://security.ubuntu.com/ubuntu impish-security Release' no longer has a Release file.\n13:42:25 E: The repository 'http://archive.ubuntu.com/ubuntu impish Release' no longer has a Release file.\n13:42:25 E: The repository 'http://archive.ubuntu.com/ubuntu impish-updates Release' no longer has a Release file.\n13:42:25 E: The repository 'http://archive.ubuntu.com/ubuntu impish-backports Release' no longer has a Release file.\n13:42:25 The command '/bin/sh -c apt-get update' returned a non-zero code: 100```",
      "time": "17:20",
      "timestamp": "1660782022.276609",
      "is_reply": true
    },
    {
      "sender": "shiqi",
      "user_id": "U034SGEJLQ6",
      "message": "Oh they are rebuilding our image, is it happening inside of their firewall that could block the traffic to archive.ubuntu.com (http://archive.ubuntu.com)? I am not familiar with how customers take our releases, is it what they usually do? I thought they will just take the images we built. Does it mean they get our source code too?",
      "time": "17:30",
      "timestamp": "1660782625.817969",
      "is_reply": true
    },
    {
      "sender": "Senthil Anand Govindarajan",
      "user_id": "U03CHKHHA92",
      "message": "Not our source code, we are extending our image to include their vault code and repackage it ... inorder to get their vault code, it needs unzip, hence we are triggering a apt-get for unzip and it stalls there since the OS is EOL.",
      "time": "17:32",
      "timestamp": "1660782749.177729",
      "is_reply": true
    },
    {
      "sender": "Senthil Anand Govindarajan",
      "user_id": "U03CHKHHA92",
      "message": "it seems traffic is permitted to archive.ubuntu.com (http://archive.ubuntu.com) we were able to inject vault code and repackage one of our images in early june,  further attempts now are blocked since the OS went EOL in late July. Just to clarify i have also asked their teams if traffic would be permitted to old-releases.ubuntu.com (http://old-releases.ubuntu.com) too incase we can get the workaround in rather than the base OS image upgrade path, waiting for their response.",
      "time": "17:35",
      "timestamp": "1660782937.638049",
      "is_reply": true
    },
    {
      "sender": "shiqi",
      "user_id": "U034SGEJLQ6",
      "message": "Sorry I was typing without checking, actually yeah old-releases is the one we want here",
      "time": "17:38",
      "timestamp": "1660783108.455449",
      "is_reply": true
    },
    {
      "sender": "shiqi",
      "user_id": "U034SGEJLQ6",
      "message": "But the image building environment would have to disable archive and enable old-releases",
      "time": "17:40",
      "timestamp": "1660783203.480179",
      "is_reply": true
    },
    {
      "sender": "shiqi",
      "user_id": "U034SGEJLQ6",
      "message": "Like what we did to our base image",
      "time": "17:40",
      "timestamp": "1660783215.331069",
      "is_reply": true
    },
    {
      "sender": "Senthil Anand Govindarajan",
      "user_id": "U03CHKHHA92",
      "message": "so the fix we are putting in will still be based on the same base image but we want to route the repos.d to the old-releases.ubuntu.com (http://old-releases.ubuntu.com), we are not pushing out Ubuntu 22.04 to the base image ?",
      "time": "17:40",
      "timestamp": "1660783245.291209",
      "is_reply": true
    },
    {
      "sender": "shiqi",
      "user_id": "U034SGEJLQ6",
      "message": "Correct",
      "time": "17:42",
      "timestamp": "1660783332.363429",
      "is_reply": true
    },
    {
      "sender": "Senthil Anand Govindarajan",
      "user_id": "U03CHKHHA92",
      "message": "Ok, let me pass on the message to the C1 team and get their feedback. Their initial response was rebuild the images with a supported OS.",
      "time": "17:43",
      "timestamp": "1660783386.985869",
      "is_reply": true
    },
    {
      "sender": "shiqi",
      "user_id": "U034SGEJLQ6",
      "message": "Hmm I am unsure what they mean, we might want some clarification on that, if they mean rebuilt under a supported OS then it is doable and fairly straightforward, if they mean rebuild it as the supported OS then it essentially means what we are trying to backport, if it is that easy then we’ve already done it",
      "time": "18:10",
      "timestamp": "1660785059.288129",
      "is_reply": true
    },
    {
      "sender": "Senthil Anand Govindarajan",
      "user_id": "U03CHKHHA92",
      "message": "Lets see, trying to push C1 for IB 22.04 release, looks like the OS base image is Ubuntu 22.04 on this release build.",
      "time": "18:25",
      "timestamp": "1660785959.399739",
      "is_reply": true
    },
    {
      "sender": "shiqi",
      "user_id": "U034SGEJLQ6",
      "message": "? I thought only 22.08 is based on Ubuntu 22.04",
      "time": "18:51",
      "timestamp": "1660787510.044759",
      "is_reply": true
    },
    {
      "sender": "shiqi",
      "user_id": "U034SGEJLQ6",
      "message": "I don’t recall reviewing a backport PR for Ubuntu 22.04 upgrade…",
      "time": "18:52",
      "timestamp": "1660787563.369899",
      "is_reply": true
    },
    {
      "sender": "Senthil Anand Govindarajan",
      "user_id": "U03CHKHHA92",
      "message": "@shiqi, I was looking at these PRs as a reference -- https://github.com/instabase/instabase/pull/28897/files\nhttps://github.com/instabase/instabase/pull/29028/files",
      "time": "20:55",
      "timestamp": "1660794957.589979",
      "is_reply": true
    },
    {
      "sender": "Senthil Anand Govindarajan",
      "user_id": "U03CHKHHA92",
      "message": "cc @kunal",
      "time": "20:56",
      "timestamp": "1660794970.224679",
      "is_reply": true
    },
    {
      "sender": "shiqi",
      "user_id": "U034SGEJLQ6",
      "message": "@Senthil Anand Govindarajan those two PRs were merged to master and part of 22.08 but they never got backported yet to any previous releases",
      "time": "20:58",
      "timestamp": "1660795124.978569",
      "is_reply": true
    },
    {
      "sender": "Senthil Anand Govindarajan",
      "user_id": "U03CHKHHA92",
      "message": "Oh ok, then the only option for all of our GA releases is to include the workaround of early-release.ubuntu.com (http://early-release.ubuntu.com) in the repos.d and OS images will be based on Ubuntu 21.10 ?",
      "time": "21:03",
      "timestamp": "1660795392.920019",
      "is_reply": true
    },
    {
      "sender": "shiqi",
      "user_id": "U034SGEJLQ6",
      "message": "generally yes, but I would like to know more details about what is being executed here, how are we extending the image? is this image build process within instabase or being executed by c1?",
      "time": "21:23",
      "timestamp": "1660796638.661149",
      "is_reply": true
    }
  ],
  "metadata": {
    "channel_id": "C06FA6A23",
    "channel_name": "discuss-engineering",
    "date_file": "2022-08-17.json",
    "message_count": 36,
    "start_time": "1660761679.741579",
    "end_time": "1660796638.661149",
    "is_thread": true
  }
}