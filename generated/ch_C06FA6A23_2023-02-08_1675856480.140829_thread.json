{
  "id": "ch_C06FA6A23_2023-02-08_1675856480.140829_thread",
  "type": "channel",
  "channel_name": "discuss-engineering",
  "conversation_type": "thread",
  "participants": [
    "Dale DeLoy",
    "Peelo",
    "hannah",
    "Fred",
    "Jessica",
    "Heymian",
    "jack"
  ],
  "messages": [
    {
      "sender": "Fred",
      "user_id": "U02TWH1DQV6",
      "message": "hi team, when a user creates an account for themselves without a signup token (no SSO), they end up with the following screen. Do we agree that the only way to approve the user is for them to login with a signup token? Or is there is a “pending” list of users that the admin can approve (as would the label suggest) that I haven’t found yet ?\nIf there is no pending list, the label is misleading, let me know if i should file a ticket to fix it :slightly_smiling_face:",
      "time": "03:41",
      "timestamp": "1675856480.140829",
      "is_reply": false
    },
    {
      "sender": "Peelo",
      "user_id": "U03L1DHC94L",
      "message": "Please see instructions here - Token available there https://instabase.atlassian.net/l/cp/se9bk06M",
      "time": "03:59",
      "timestamp": "1675857591.610369",
      "is_reply": true
    },
    {
      "sender": "Fred",
      "user_id": "U02TWH1DQV6",
      "message": "Thanks mark, this is my point. There is no place where an admin can go to approve the accounts so the label is misleading for new admin customers :)",
      "time": "04:12",
      "timestamp": "1675858346.146579",
      "is_reply": true
    },
    {
      "sender": "Dale DeLoy",
      "user_id": "U01T2LEP1FF",
      "message": "I agree that this is the only way to approve a new user is to create a token and have them login with the use token = true",
      "time": "04:21",
      "timestamp": "1675858867.858659",
      "is_reply": true
    },
    {
      "sender": "Dale DeLoy",
      "user_id": "U01T2LEP1FF",
      "message": "I believe this is a known issue that has not received priority",
      "time": "04:21",
      "timestamp": "1675858904.883839",
      "is_reply": true
    },
    {
      "sender": "Fred",
      "user_id": "U02TWH1DQV6",
      "message": "i understand, but i guess just fixing the label would be easy. I’ll create a ticket for that",
      "time": "05:00",
      "timestamp": "1675861257.216019",
      "is_reply": true
    },
    {
      "sender": "Fred",
      "user_id": "U02TWH1DQV6",
      "message": "https://instabase.atlassian.net/jira/polaris/projects/PFR/ideas/view/372748?selectedIssue=PFR-1007&issueViewSection=capture",
      "time": "07:14",
      "timestamp": "1675869295.349659",
      "is_reply": true
    },
    {
      "sender": "jack",
      "user_id": "U03DWCUJUAH",
      "message": "hi @Fred @Dale DeLoy - i'd like to ensure all are aware that access to instabase.com (http://instabase.com) is currently restricted to named employee accounts. when implementing this, we allowed a small list of additional test accounts to remain. generally speaking, we should no longer be creating instabase.com (http://instabase.com) accounts other than for new employees. for all other use cases (customer POVs, demos, interview tests) we should use sandbox environments instead.\n\ndo your questions here relate to creating instabase.com (http://instabase.com) accounts for new employees? if not, what is the current use case?",
      "time": "07:35",
      "timestamp": "1675870553.001899",
      "is_reply": true
    },
    {
      "sender": "Jessica",
      "user_id": "UDEF3M2NP",
      "message": "Core services team is aware of this and improving this login flow will be part of the Saas effort!",
      "time": "07:44",
      "timestamp": "1675871046.352929",
      "is_reply": true
    },
    {
      "sender": "Fred",
      "user_id": "U02TWH1DQV6",
      "message": "Hi Jack, the context in my case is Axa DA taking control of their dev environment and their admin was asking me : \"where is the pending list\".",
      "time": "07:53",
      "timestamp": "1675871600.616089",
      "is_reply": true
    },
    {
      "sender": "Fred",
      "user_id": "U02TWH1DQV6",
      "message": "Thanks Jessica for the info on the login flow. Until then, just a simple update of the label would decrease confusion :)",
      "time": "07:54",
      "timestamp": "1675871693.093009",
      "is_reply": true
    },
    {
      "sender": "jack",
      "user_id": "U03DWCUJUAH",
      "message": "thank you for clarifying that this is a SaaS question @Fred :white_check_mark:\n\nin this case, what is the _current_ recommended flow for SaaS customers to create and approve users @Jessica? are we sharing the login token for users to signup? or should admins create user accounts directly?",
      "time": "08:36",
      "timestamp": "1675874178.717839",
      "is_reply": true
    },
    {
      "sender": "Jessica",
      "user_id": "UDEF3M2NP",
      "message": "Either of those work I think! The core services team could speak more to it",
      "time": "08:37",
      "timestamp": "1675874264.919769",
      "is_reply": true
    },
    {
      "sender": "Fred",
      "user_id": "U02TWH1DQV6",
      "message": "No worries :) good to hear it's in the books :)",
      "time": "08:39",
      "timestamp": "1675874350.920469",
      "is_reply": true
    },
    {
      "sender": "jack",
      "user_id": "U03DWCUJUAH",
      "message": "is it correct that we would need to share the same token that is authorized for signing up users on instabase.com (http://instabase.com)? if so, we would strongly prefer not to do so - and if this token has already been shared with customers, we should change the one used by employees",
      "time": "08:39",
      "timestamp": "1675874378.688629",
      "is_reply": true
    },
    {
      "sender": "Fred",
      "user_id": "U02TWH1DQV6",
      "message": "Token is created by platform and usually short lived",
      "time": "08:40",
      "timestamp": "1675874424.646169",
      "is_reply": true
    },
    {
      "sender": "Heymian",
      "user_id": "UADQ9V8PK",
      "message": "Both approaches work. However, I would recommend having the admin create the account for the new users just to avoid the extra steps/URL to use the verification token.\n\nCorrect, as Frederic said, these tokens are often short lived (hours, or days)",
      "time": "11:43",
      "timestamp": "1675885413.486909",
      "is_reply": true
    },
    {
      "sender": "Heymian",
      "user_id": "UADQ9V8PK",
      "message": "And I’ll get the message in the UI updated asap!",
      "time": "11:44",
      "timestamp": "1675885442.826889",
      "is_reply": true
    },
    {
      "sender": "jack",
      "user_id": "U03DWCUJUAH",
      "message": "got it, thanks all for confirming that the SaaS environments do not have a shared, default token.\n\nfwiw, from a security perspective, it seems much safer for admins to create passwords vs. circulating signup tokens. even though the tokens may be short-lived (noting that expiration is configurable), they are essentially acting as non-MFA passwords that provide unrestricted user-level access to the platform.\n\n*if customers do use signup tokens, it is important that they also monitor the users created while the tokens are active.* having admins create user accounts eliminates this class of concern.",
      "time": "12:09",
      "timestamp": "1675886968.022339",
      "is_reply": true
    },
    {
      "sender": "Dale DeLoy",
      "user_id": "U01T2LEP1FF",
      "message": "My concern with Admins creating UIDs is they also have to share the password and we do not force a password change mechanism on by default",
      "time": "12:19",
      "timestamp": "1675887566.716109",
      "is_reply": true
    },
    {
      "sender": "Dale DeLoy",
      "user_id": "U01T2LEP1FF",
      "message": "All user that are initially created only have access to a personal space so a very restricted access to the platform (whether created by admin or token)",
      "time": "12:20",
      "timestamp": "1675887654.737379",
      "is_reply": true
    },
    {
      "sender": "jack",
      "user_id": "U03DWCUJUAH",
      "message": "@Dale DeLoy just to clarify are you referring to _customers sharing their admin password_ or something else?\n\nwe need to strongly encourage customers to enable MFA site-wide when using native Instabase auth, for exactly this type of reason. we should want do this to protect both our customers and instabase, and should be very concerned if a customer is choosing to use native auth without MFA.. if/when a customer's SaaS admin account is compromised, the impact of a security incident is likely to cause greater harm to instabase than the customer (and it will be a major event for both).",
      "time": "12:32",
      "timestamp": "1675888370.093639",
      "is_reply": true
    },
    {
      "sender": "Dale DeLoy",
      "user_id": "U01T2LEP1FF",
      "message": "I am talking about an admin creating a userID and pwd for a new user vs. using a token - as was the topic of this thread.",
      "time": "12:38",
      "timestamp": "1675888709.587529",
      "is_reply": true
    },
    {
      "sender": "Dale DeLoy",
      "user_id": "U01T2LEP1FF",
      "message": "When an admin creates a new user the system generates a password that then needs to be shared with the new user.  IB does NOT then force that user to change the shared password",
      "time": "12:39",
      "timestamp": "1675888746.509579",
      "is_reply": true
    },
    {
      "sender": "jack",
      "user_id": "U03DWCUJUAH",
      "message": "rather than sharing the generated password, we recommend guiding users to reset their own passwords via the \"Forgot Password\" flow",
      "time": "12:39",
      "timestamp": "1675888781.990269",
      "is_reply": true
    },
    {
      "sender": "jack",
      "user_id": "U03DWCUJUAH",
      "message": "but again, enabling MFA site-wide is the preferred solution and we should be concerned if customers do not want to enable this",
      "time": "12:40",
      "timestamp": "1675888804.855929",
      "is_reply": true
    },
    {
      "sender": "Heymian",
      "user_id": "UADQ9V8PK",
      "message": "Hrm, that doesn’t sound expected. When that new account is created, the user is taken to a login flow that forces them to change their password before they can login the first time. @Dale DeLoy",
      "time": "12:40",
      "timestamp": "1675888823.975519",
      "is_reply": true
    },
    {
      "sender": "jack",
      "user_id": "U03DWCUJUAH",
      "message": "FYI this is the MFA setting i am referring to (in Admin > Site Settings > Configuration)",
      "time": "12:40",
      "timestamp": "1675888841.430829",
      "is_reply": true
    },
    {
      "sender": "Dale DeLoy",
      "user_id": "U01T2LEP1FF",
      "message": "Agree that we should push for MFA.",
      "time": "12:42",
      "timestamp": "1675888964.638889",
      "is_reply": true
    },
    {
      "sender": "Dale DeLoy",
      "user_id": "U01T2LEP1FF",
      "message": "@Heymian - for all the sandboxes I am using the process you describe does not trigger",
      "time": "12:43",
      "timestamp": "1675889018.449079",
      "is_reply": true
    },
    {
      "sender": "Heymian",
      "user_id": "UADQ9V8PK",
      "message": "Hrmm interesting, not triggering for me either.",
      "time": "12:52",
      "timestamp": "1675889523.204689",
      "is_reply": true
    },
    {
      "sender": "Heymian",
      "user_id": "UADQ9V8PK",
      "message": "I’ll take a closer look, that’s not the expected flow iirc. @Jessica please correct me if you remember otherwise",
      "time": "12:52",
      "timestamp": "1675889573.623959",
      "is_reply": true
    },
    {
      "sender": "Jessica",
      "user_id": "UDEF3M2NP",
      "message": "Yeah I would expect the reset step to be in there also",
      "time": "12:53",
      "timestamp": "1675889599.689719",
      "is_reply": true
    },
    {
      "sender": "Jessica",
      "user_id": "UDEF3M2NP",
      "message": "btw code is here: https://github.com/instabase/instabase/blob/master/webserver/webapp/src/py/instabase/webapp/handler/views/account.py#L448",
      "time": "12:55",
      "timestamp": "1675889735.975989",
      "is_reply": true
    },
    {
      "sender": "Dale DeLoy",
      "user_id": "U01T2LEP1FF",
      "message": "The push to use the \"Forgot password?\" path works well until a user tries to use the \"create an account\" link.  Once a user tries to create an account the only path to user approval is to leverage a token (that I know of) and that users email cannot be used until that account is approved.",
      "time": "12:59",
      "timestamp": "1675889943.782469",
      "is_reply": true
    },
    {
      "sender": "hannah",
      "user_id": "U01385H7VJL",
      "message": "To clarify here, this account does have MFA enabled @jack.  This is not an issue with MFA but rather the initial sign up workflow.\n\n@Heymian we should work through the signup flow for SaaS to see if we want admins only to be in control of adding new users or if customers can use tokens. I would be in favor of restricting to just admins and ensuring that the user is forced to reset password upon initial log in. This helps to prevent any misuse or unintended use of the sign up token.",
      "time": "13:07",
      "timestamp": "1675890443.226189",
      "is_reply": true
    },
    {
      "sender": "Dale DeLoy",
      "user_id": "U01T2LEP1FF",
      "message": "We should also eliminate the \"create an account\" link as this forces either the user to get approved with a token or stay locked out.",
      "time": "13:11",
      "timestamp": "1675890686.566979",
      "is_reply": true
    },
    {
      "sender": "hannah",
      "user_id": "U01385H7VJL",
      "message": "Yes that's a good call ^",
      "time": "13:13",
      "timestamp": "1675890807.401109",
      "is_reply": true
    },
    {
      "sender": "jack",
      "user_id": "U03DWCUJUAH",
      "message": "thank you for confirming this account has MFA enabled @hannah, this is useful new information relative to our last discussion\n\nwhen an admin creates an account directly (no signup token) and someone uses the Forgot Password flow, does the system then prompt them to enroll in MFA once their password is reset? would help to understand how MFA enrollment works during sign up workflow",
      "time": "13:52",
      "timestamp": "1675893173.030319",
      "is_reply": true
    },
    {
      "sender": "Heymian",
      "user_id": "UADQ9V8PK",
      "message": "Jack, I would recommend you try it out to see for yourself, that’s arguable the easiest/fastest way for you to understand this.",
      "time": "14:00",
      "timestamp": "1675893643.524279",
      "is_reply": true
    },
    {
      "sender": "jack",
      "user_id": "U03DWCUJUAH",
      "message": "@Heymian sure, i was being mindful not to spin up an environment in admiral just for this purpose and noting that neither instabase.com (http://instabase.com) nor dogfood.instabse.com (http://dogfood.instabse.com) have MFA site-wide enabled. we do have one SaaS environment currently being used for security testing but i can't enable MFA site-wide there without coordinating with the testers. beyond that, trust team is generally not building and running the platform locally as we are not developing code.\n\nif the answer is straightforward to explain then i encourage you to share on this thread for the benefit of other followers (https://instabase.slack.com/archives/C06FA6A23/p1675883829988359) (and for future reference if needed). however if you have a strong preference for my figuring this out on my own, perhaps you can point me to an environment with site-wide MFA enabled that i can run tests in?",
      "time": "14:07",
      "timestamp": "1675894020.771729",
      "is_reply": true
    },
    {
      "sender": "Heymian",
      "user_id": "UADQ9V8PK",
      "message": "I’d recommend flipping it on in UAT (since it’s a lightly used env) even just for 2min while you test it out. Seeing it visually would definitely help you most with understanding this and many of your other password changing questions.",
      "time": "15:46",
      "timestamp": "1675899989.587399",
      "is_reply": true
    }
  ],
  "metadata": {
    "channel_id": "C06FA6A23",
    "channel_name": "discuss-engineering",
    "date_file": "2023-02-08.json",
    "message_count": 42,
    "start_time": "1675856480.140829",
    "end_time": "1675899989.587399",
    "is_thread": true
  }
}