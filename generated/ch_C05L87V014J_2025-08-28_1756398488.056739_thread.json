{
  "id": "ch_C05L87V014J_2025-08-28_1756398488.056739_thread",
  "type": "channel",
  "channel_name": "ask-crafting",
  "conversation_type": "thread",
  "participants": [
    "Xindi Xu",
    "Abhinav",
    "Jason"
  ],
  "messages": [
    {
      "sender": "Abhinav",
      "user_id": "U03V2G5L19A",
      "message": "Can someone delete them manually? looks like spending increased by additional ~500 per day on them.",
      "time": "09:28",
      "timestamp": "1756398488.056739",
      "is_reply": false
    },
    {
      "sender": "Xindi Xu",
      "user_id": "U03FT35MAHF",
      "message": "i'll get a script ready today",
      "time": "09:58",
      "timestamp": "1756400323.092799",
      "is_reply": true
    },
    {
      "sender": "Xindi Xu",
      "user_id": "U03FT35MAHF",
      "message": "Here's the PR to run the clean up script daily at midnight UTC. It will delete all sandboxes for the PRs that were closed within a day.\nI'm running the same script locally to delete sandboxes for PR that were closed since Jul 25 (when we rolled out Cypress CI)\nhttps://github.com/instabase/instabase/pull/74199",
      "time": "10:36",
      "timestamp": "1756402607.696949",
      "is_reply": true
    },
    {
      "sender": "Abhinav",
      "user_id": "U03V2G5L19A",
      "message": "can we not do it as part of test teardown step?",
      "time": "10:40",
      "timestamp": "1756402844.587179",
      "is_reply": true
    },
    {
      "sender": "Xindi Xu",
      "user_id": "U03FT35MAHF",
      "message": "I think it's better to be a cron job because we want to delete sandboxes that are older than 48 hours, not just the closed PRs. We could have both",
      "time": "11:05",
      "timestamp": "1756404315.883519",
      "is_reply": true
    },
    {
      "sender": "Jason",
      "user_id": "U02JRG6MNBS",
      "message": "Do we need the data for test results? Or is the 48 hour hold just in case we need to retest?",
      "time": "11:06",
      "timestamp": "1756404397.185489",
      "is_reply": true
    },
    {
      "sender": "Xindi Xu",
      "user_id": "U03FT35MAHF",
      "message": "If the PR stays open for 2+ days, the next time we push, we'll recreate the sandbox",
      "time": "11:08",
      "timestamp": "1756404529.670089",
      "is_reply": true
    },
    {
      "sender": "Xindi Xu",
      "user_id": "U03FT35MAHF",
      "message": "The 48 hour hold so that pushes within 48 hour can skip sandbox creation. Just to speed up the CI",
      "time": "11:10",
      "timestamp": "1756404635.917269",
      "is_reply": true
    },
    {
      "sender": "Abhinav",
      "user_id": "U03V2G5L19A",
      "message": "How much time does it take to spin up a sandbox ? Is one sandbox shared across PR ?  Lets also delete the sandbox when the PR is closed if we are not already doing so. My recommendation would be to delete sandbox after 2-4h of PR inactivity with max sandbox life of 24h.",
      "time": "11:50",
      "timestamp": "1756407049.229609",
      "is_reply": true
    },
    {
      "sender": "Xindi Xu",
      "user_id": "U03FT35MAHF",
      "message": "It takes around 15 mins.",
      "time": "11:52",
      "timestamp": "1756407167.544249",
      "is_reply": true
    },
    {
      "sender": "Xindi Xu",
      "user_id": "U03FT35MAHF",
      "message": "I manually run the script to clean up the sandboxes. Now the number goes down from 350 to 30",
      "time": "16:31",
      "timestamp": "1756423895.024429",
      "is_reply": true
    }
  ],
  "metadata": {
    "channel_id": "C05L87V014J",
    "channel_name": "ask-crafting",
    "date_file": "2025-08-28.json",
    "message_count": 11,
    "start_time": "1756398488.056739",
    "end_time": "1756423895.024429",
    "is_thread": true
  }
}