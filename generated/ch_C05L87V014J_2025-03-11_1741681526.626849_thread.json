{
  "id": "ch_C05L87V014J_2025-03-11_1741681526.626849_thread",
  "type": "channel",
  "channel_name": "ask-crafting",
  "conversation_type": "thread",
  "participants": [
    "mfichman",
    "Xindi Xu",
    "Goto Tools Go Links",
    "abhijnan",
    "Heymian"
  ],
  "messages": [
    {
      "sender": "abhijnan",
      "user_id": "U056NM536PP",
      "message": "Hey Team, I have a very weird issue where code generators (such as `make build-protos` or `make gen-mocks`) don't create/update these files when run in my crafting sandbox but work locally for the same changes. Any idea what could be going wrong here? I don't see any errors in the logs and these are executed almost instantly compared to when run locally. Link to my sandbox (https://instabase.sandboxes.site/sandboxes/vegi)",
      "time": "01:25",
      "timestamp": "1741681526.626849",
      "is_reply": false
    },
    {
      "sender": "mfichman",
      "user_id": "U03DZ9XUE10",
      "message": "@Xindi Xu recently fixed this by making build-protos run under poetry shell. Is your branch up-to-date?",
      "time": "03:05",
      "timestamp": "1741687549.767159",
      "is_reply": true
    },
    {
      "sender": "abhijnan",
      "user_id": "U056NM536PP",
      "message": "Haven't tried `build-protos` recently but i had the issue with `gen-mocks` yesterday",
      "time": "03:07",
      "timestamp": "1741687628.746389",
      "is_reply": true
    },
    {
      "sender": "mfichman",
      "user_id": "U03DZ9XUE10",
      "message": "Ok! I’m not sure about gen-mocks.",
      "time": "03:07",
      "timestamp": "1741687665.387629",
      "is_reply": true
    },
    {
      "sender": "Xindi Xu",
      "user_id": "U03FT35MAHF",
      "message": "I never run `gen-mocks` before. `build-mocks` works fine for me.",
      "time": "09:39",
      "timestamp": "1741711161.636439",
      "is_reply": true
    },
    {
      "sender": "Heymian",
      "user_id": "UADQ9V8PK",
      "message": "I can’t seem to run build-mocks in the DB module anymore (it used to work when I tried a couple weeks ago)",
      "time": "13:07",
      "timestamp": "1741723654.009209",
      "is_reply": true
    },
    {
      "sender": "Heymian",
      "user_id": "UADQ9V8PK",
      "message": "I get:\n```Makefile:19: warning: overriding recipe for target 'run-golint'\n/home/owner/instabase/shared-utils/go-utils/src/instabase/utils/db/../../../../../../shared-utils/build-utils/shared/build-go.mk:42: warning: ignoring old recipe for target 'run-golint'\nrm -rf session/mock_db_session.go session/mock_tx.go accessor/mock_accessor.go\ngo mod tidy\n\n        github.com/google/go-cmp/cmp (http://github.com/google/go-cmp/cmp): instabase@v0.0.0 (replaced by ./build/go/src/instabase): reading build/go/src/instabase/go.mod: open /home/owner/instabase/shared-utils/go-utils/src/instabase/utils/db/build/go/src/instabase/go.mod: no such file or directory\ninstabase/utils/db/accessor imports\n        instabase/utils/cache tested by\n        instabase/utils/cache.test imports\n        github.com/alicebob/miniredis/v2 (http://github.com/alicebob/miniredis/v2): instabase@v0.0.0 (replaced by ./build/go/src/instabase): reading build/go/src/instabase/go.mod: open /home/owner/instabase/shared-utils/go-utils/src/instabase/utils/db/build/go/src/instabase/go.mod: no such file or directory\ninstabase/utils/db/session imports\n        cloud.google.com/go/cloudsqlconn (http://cloud.google.com/go/cloudsqlconn) tested by\n        cloud.google.com/go/cloudsqlconn.test (http://cloud.google.com/go/cloudsqlconn.test) imports\n        github.com/jackc/pgx/v4 (http://github.com/jackc/pgx/v4): instabase@v0.0.0 (replaced by ./build/go/src/instabase): reading build/go/src/instabase/go.mod: open /home/owner/instabase/shared-utils/go-utils/src/instabase/utils/db/build/go/src/instabase/go.mod: no such file or directory\ninstabase/utils/db/session imports\n        github.com/Azure/go-autorest/autorest/adal (http://github.com/Azure/go-autorest/autorest/adal) tested by\n        github.com/Azure/go-autorest/autorest/adal.test (http://github.com/Azure/go-autorest/autorest/adal.test) imports\n        github.com/Azure/go-autorest/autorest/mocks (http://github.com/Azure/go-autorest/autorest/mocks): instabase@v0.0.0 (replaced by ./build/go/src/instabase): reading build/go/src/instabase/go.mod: open /home/owner/instabase/shared-utils/go-utils/src/instabase/utils/db/build/go/src/instabase/go.mod: no such file or directory\ninstabase/utils/db/session imports\n        github.com/godror/godror (http://github.com/godror/godror) tested by\n        github.com/godror/godror.test (http://github.com/godror/godror.test) imports\n        github.com/oklog/ulid/v2 (http://github.com/oklog/ulid/v2): instabase@v0.0.0 (replaced by ./build/go/src/instabase): reading build/go/src/instabase/go.mod: open /home/owner/instabase/shared-utils/go-utils/src/instabase/utils/db/build/go/src/instabase/go.mod: no such file or directory\ninstabase/utils/db/accessor imports\n        github.com/golang/protobuf/proto (http://github.com/golang/protobuf/proto) imports\n        google.golang.org/protobuf/reflect/protoregistry (http://google.golang.org/protobuf/reflect/protoregistry) tested by\n        google.golang.org/protobuf/reflect/protoregistry.test (http://google.golang.org/protobuf/reflect/protoregistry.test) imports\n        github.com/google/go-cmp/cmp/cmpopts (http://github.com/google/go-cmp/cmp/cmpopts): instabase@v0.0.0 (replaced by ./build/go/src/instabase): reading build/go/src/instabase/go.mod: open /home/owner/instabase/shared-utils/go-utils/src\n        cloud.google.com/go/cloudsqlconn.test (http://cloud.google.com/go/cloudsqlconn.test) imports\n        cloud.google.com/go/cloudsqlconn/postgres/pgxv4 (http://cloud.google.com/go/cloudsqlconn/postgres/pgxv4) imports\n        github.com/jackc/pgx/v4/stdlib (http://github.com/jackc/pgx/v4/stdlib): instabase@v0.0.0 (replaced by ./build/go/src/instabase): reading build/go/src/instabase/go.mod: open /home/owner/instabase/shared-utils/go-utils/src/instabase/utils/db/build/go/src/instabase/go.mod: no such file or directory\ninstabase/utils/db/session imports\n        github.com/uber/jaeger-client-go (http://github.com/uber/jaeger-client-go) tested by\n        github.com/uber/jaeger-client-go.test (http://github.com/uber/jaeger-client-go.test) imports\n        github.com/uber/jaeger-lib/metrics/metricstest (http://github.com/uber/jaeger-lib/metrics/metricstest) imports\n        github.com/HdrHistogram/hdrhistogram-go (http://github.com/HdrHistogram/hdrhistogram-go): instabase@v0.0.0 (replaced by ./build/go/src/instabase): reading build/go/src/instabase/go.mod: open /home/owner/instabase/shared-utils/go-utils/src/instabase/utils/db/build/go/src/instabase/go.mod: no such file or directory\ninstabase/utils/db/session imports\n        github.com/microsoft/go-mssqldb (http://github.com/microsoft/go-mssqldb) tested by\n        github.com/microsoft/go-mssqldb.test (http://github.com/microsoft/go-mssqldb.test) imports\n        github.com/microsoft/go-mssqldb/namedpipe (http://github.com/microsoft/go-mssqldb/namedpipe) imports\n        github.com/microsoft/go-mssqldb/internal/np (http://github.com/microsoft/go-mssqldb/internal/np) imports\n        gopkg.in/natefinch/npipe.v2 (http://gopkg.in/natefinch/npipe.v2): instabase@v0.0.0 (replaced by ./build/go/src/instabase): reading build/go/src/instabase/go.mod: open /home/owner/instabase/shared-utils/go-utils/src/instabase/utils/db/build/go/src/instabase/go.mod: no such file or directory\ninstabase/utils/db/session imports\n        cloud.google.com/go/cloudsqlconn (http://cloud.google.com/go/cloudsqlconn) imports\n        google.golang.org/api/sqladmin/v1beta4 (http://google.golang.org/api/sqladmin/v1beta4) imports\n        google.golang.org/api/internal/gensupport (http://google.golang.org/api/internal/gensupport) imports\n        github.com/googleapis/gax-go/v2 (http://github.com/googleapis/gax-go/v2) tested by\n        github.com/googleapis/gax-go/v2.test (http://github.com/googleapis/gax-go/v2.test) imports\n        google.golang.org/genproto/googleapis/longrunning (http://google.golang.org/genproto/googleapis/longrunning) imports\n        cloud.google.com/go/longrunning/autogen/longrunningpb (http://cloud.google.com/go/longrunning/autogen/longrunningpb): instabase@v0.0.0 (replaced by ./build/go/src/instabase): reading build/go/src/instabase/go.mod: open /home/owner/instabase/shared-utils/go-utils/src/instabase/utils/db/build/go/src/instabase/go.mod: no such file or directory\nmake: *** [Makefile:25: build-mocks] Error 1```",
      "time": "13:08",
      "timestamp": "1741723697.330649",
      "is_reply": true
    },
    {
      "sender": "Goto Tools Go Links",
      "user_id": "U07NAC7GVNY",
      "message": "https://goto.tools/src/instabase/go",
      "time": "13:08",
      "timestamp": "1741723698.366369",
      "is_reply": true
    },
    {
      "sender": "Goto Tools Go Links",
      "user_id": "U07NAC7GVNY",
      "message": "https://goto.tools/src/instabase/go",
      "time": "13:08",
      "timestamp": "1741723698.366849",
      "is_reply": true
    },
    {
      "sender": "Goto Tools Go Links",
      "user_id": "U07NAC7GVNY",
      "message": "https://goto.tools/src/instabase):",
      "time": "13:08",
      "timestamp": "1741723698.367339",
      "is_reply": true
    },
    {
      "sender": "Goto Tools Go Links",
      "user_id": "U07NAC7GVNY",
      "message": "https://goto.tools/src/instabase/go",
      "time": "13:08",
      "timestamp": "1741723698.368199",
      "is_reply": true
    },
    {
      "sender": "Goto Tools Go Links",
      "user_id": "U07NAC7GVNY",
      "message": "https://goto.tools/src/instabase):",
      "time": "13:08",
      "timestamp": "1741723698.368839",
      "is_reply": true
    },
    {
      "sender": "Goto Tools Go Links",
      "user_id": "U07NAC7GVNY",
      "message": "https://goto.tools/src/instabase/go",
      "time": "13:08",
      "timestamp": "1741723698.369049",
      "is_reply": true
    },
    {
      "sender": "Goto Tools Go Links",
      "user_id": "U07NAC7GVNY",
      "message": "https://goto.tools/cloudsqlconn",
      "time": "13:08",
      "timestamp": "1741723698.370519",
      "is_reply": true
    },
    {
      "sender": "Goto Tools Go Links",
      "user_id": "U07NAC7GVNY",
      "message": "https://goto.tools/src/instabase/go",
      "time": "13:08",
      "timestamp": "1741723698.370879",
      "is_reply": true
    },
    {
      "sender": "Goto Tools Go Links",
      "user_id": "U07NAC7GVNY",
      "message": "https://goto.tools/src/instabase/go",
      "time": "13:08",
      "timestamp": "1741723698.372479",
      "is_reply": true
    },
    {
      "sender": "Goto Tools Go Links",
      "user_id": "U07NAC7GVNY",
      "message": "https://goto.tools/cloudsqlconn/postgres/pgxv4%7Ccloud",
      "time": "13:08",
      "timestamp": "1741723698.372519",
      "is_reply": true
    },
    {
      "sender": "Goto Tools Go Links",
      "user_id": "U07NAC7GVNY",
      "message": "https://goto.tools/src/instabase/go",
      "time": "13:08",
      "timestamp": "1741723698.374909",
      "is_reply": true
    },
    {
      "sender": "Goto Tools Go Links",
      "user_id": "U07NAC7GVNY",
      "message": "https://goto.tools/src/instabase/go",
      "time": "13:08",
      "timestamp": "1741723698.376089",
      "is_reply": true
    },
    {
      "sender": "Goto Tools Go Links",
      "user_id": "U07NAC7GVNY",
      "message": "https://goto.tools/src/instabase/go",
      "time": "13:08",
      "timestamp": "1741723698.376189",
      "is_reply": true
    },
    {
      "sender": "Goto Tools Go Links",
      "user_id": "U07NAC7GVNY",
      "message": "https://goto.tools/cloudsqlconn>",
      "time": "13:08",
      "timestamp": "1741723698.379409",
      "is_reply": true
    },
    {
      "sender": "Goto Tools Go Links",
      "user_id": "U07NAC7GVNY",
      "message": "https://goto.tools/src/instabase/go",
      "time": "13:08",
      "timestamp": "1741723698.379619",
      "is_reply": true
    },
    {
      "sender": "Goto Tools Go Links",
      "user_id": "U07NAC7GVNY",
      "message": "https://goto.tools/src/instabase/go",
      "time": "13:08",
      "timestamp": "1741723698.380719",
      "is_reply": true
    },
    {
      "sender": "Goto Tools Go Links",
      "user_id": "U07NAC7GVNY",
      "message": "https://goto.tools/src/instabase/go",
      "time": "13:08",
      "timestamp": "1741723698.380739",
      "is_reply": true
    },
    {
      "sender": "Goto Tools Go Links",
      "user_id": "U07NAC7GVNY",
      "message": "https://goto.tools/src/instabase/go",
      "time": "13:08",
      "timestamp": "1741723698.383239",
      "is_reply": true
    },
    {
      "sender": "Goto Tools Go Links",
      "user_id": "U07NAC7GVNY",
      "message": "https://goto.tools/cloudsqlconn/postgres/pgxv4>",
      "time": "13:08",
      "timestamp": "1741723698.383779",
      "is_reply": true
    },
    {
      "sender": "Goto Tools Go Links",
      "user_id": "U07NAC7GVNY",
      "message": "https://goto.tools/src/instabase):",
      "time": "13:08",
      "timestamp": "1741723698.384919",
      "is_reply": true
    },
    {
      "sender": "Goto Tools Go Links",
      "user_id": "U07NAC7GVNY",
      "message": "https://goto.tools/cloudsqlconn",
      "time": "13:08",
      "timestamp": "1741723698.387449",
      "is_reply": true
    },
    {
      "sender": "Goto Tools Go Links",
      "user_id": "U07NAC7GVNY",
      "message": "https://goto.tools/src/instabase/go",
      "time": "13:08",
      "timestamp": "1741723698.387669",
      "is_reply": true
    },
    {
      "sender": "Goto Tools Go Links",
      "user_id": "U07NAC7GVNY",
      "message": "https://goto.tools/src/instabase):",
      "time": "13:08",
      "timestamp": "1741723698.388089",
      "is_reply": true
    },
    {
      "sender": "Goto Tools Go Links",
      "user_id": "U07NAC7GVNY",
      "message": "https://goto.tools/src/instabase/go",
      "time": "13:08",
      "timestamp": "1741723698.388149",
      "is_reply": true
    },
    {
      "sender": "Goto Tools Go Links",
      "user_id": "U07NAC7GVNY",
      "message": "https://goto.tools/src/instabase):",
      "time": "13:08",
      "timestamp": "1741723698.388159",
      "is_reply": true
    },
    {
      "sender": "Goto Tools Go Links",
      "user_id": "U07NAC7GVNY",
      "message": "https://goto.tools/cloudsqlconn%7Ccloud",
      "time": "13:08",
      "timestamp": "1741723698.389449",
      "is_reply": true
    },
    {
      "sender": "Goto Tools Go Links",
      "user_id": "U07NAC7GVNY",
      "message": "https://goto.tools/src/instabase):",
      "time": "13:08",
      "timestamp": "1741723698.390129",
      "is_reply": true
    },
    {
      "sender": "Goto Tools Go Links",
      "user_id": "U07NAC7GVNY",
      "message": "https://goto.tools/src/instabase):",
      "time": "13:08",
      "timestamp": "1741723698.390739",
      "is_reply": true
    },
    {
      "sender": "Goto Tools Go Links",
      "user_id": "U07NAC7GVNY",
      "message": "https://goto.tools/v2",
      "time": "13:08",
      "timestamp": "1741723698.390829",
      "is_reply": true
    },
    {
      "sender": "Goto Tools Go Links",
      "user_id": "U07NAC7GVNY",
      "message": "https://goto.tools/v2%7Cgithub",
      "time": "13:08",
      "timestamp": "1741723698.391319",
      "is_reply": true
    },
    {
      "sender": "Goto Tools Go Links",
      "user_id": "U07NAC7GVNY",
      "message": "https://goto.tools/v2>",
      "time": "13:08",
      "timestamp": "1741723698.392729",
      "is_reply": true
    },
    {
      "sender": "Goto Tools Go Links",
      "user_id": "U07NAC7GVNY",
      "message": "https://goto.tools/src/instabase/go",
      "time": "13:08",
      "timestamp": "1741723698.393539",
      "is_reply": true
    },
    {
      "sender": "Goto Tools Go Links",
      "user_id": "U07NAC7GVNY",
      "message": "https://goto.tools/longrunning/autogen/longrunningpb>:",
      "time": "13:08",
      "timestamp": "1741723698.395649",
      "is_reply": true
    },
    {
      "sender": "Goto Tools Go Links",
      "user_id": "U07NAC7GVNY",
      "message": "https://goto.tools/cloudsqlconn%7Ccloud",
      "time": "13:08",
      "timestamp": "1741723698.397829",
      "is_reply": true
    },
    {
      "sender": "Goto Tools Go Links",
      "user_id": "U07NAC7GVNY",
      "message": "https://goto.tools/src/instabase):",
      "time": "13:08",
      "timestamp": "1741723698.401149",
      "is_reply": true
    },
    {
      "sender": "Goto Tools Go Links",
      "user_id": "U07NAC7GVNY",
      "message": "https://goto.tools/src/instabase):",
      "time": "13:08",
      "timestamp": "1741723698.415509",
      "is_reply": true
    },
    {
      "sender": "Goto Tools Go Links",
      "user_id": "U07NAC7GVNY",
      "message": "https://goto.tools/src/instabase/go",
      "time": "13:08",
      "timestamp": "1741723698.428699",
      "is_reply": true
    },
    {
      "sender": "Goto Tools Go Links",
      "user_id": "U07NAC7GVNY",
      "message": "https://goto.tools/cloudsqlconn>",
      "time": "13:08",
      "timestamp": "1741723698.432519",
      "is_reply": true
    },
    {
      "sender": "Goto Tools Go Links",
      "user_id": "U07NAC7GVNY",
      "message": "https://goto.tools/src/instabase/go",
      "time": "13:08",
      "timestamp": "1741723698.439309",
      "is_reply": true
    },
    {
      "sender": "Goto Tools Go Links",
      "user_id": "U07NAC7GVNY",
      "message": "https://goto.tools/longrunning/autogen/longrunningpb%7Ccloud",
      "time": "13:08",
      "timestamp": "1741723698.440329",
      "is_reply": true
    },
    {
      "sender": "Goto Tools Go Links",
      "user_id": "U07NAC7GVNY",
      "message": "https://goto.tools/cloudsqlconn",
      "time": "13:08",
      "timestamp": "1741723698.448829",
      "is_reply": true
    },
    {
      "sender": "Goto Tools Go Links",
      "user_id": "U07NAC7GVNY",
      "message": "https://goto.tools/src/instabase):",
      "time": "13:08",
      "timestamp": "1741723698.484709",
      "is_reply": true
    },
    {
      "sender": "Goto Tools Go Links",
      "user_id": "U07NAC7GVNY",
      "message": "https://goto.tools/v2",
      "time": "13:08",
      "timestamp": "1741723698.512649",
      "is_reply": true
    },
    {
      "sender": "Goto Tools Go Links",
      "user_id": "U07NAC7GVNY",
      "message": "https://goto.tools/cloudsqlconn",
      "time": "13:08",
      "timestamp": "1741723698.548729",
      "is_reply": true
    },
    {
      "sender": "Goto Tools Go Links",
      "user_id": "U07NAC7GVNY",
      "message": "https://goto.tools/src/instabase/go",
      "time": "13:08",
      "timestamp": "1741723698.565589",
      "is_reply": true
    },
    {
      "sender": "Heymian",
      "user_id": "UADQ9V8PK",
      "message": "omg I ruined this thread",
      "time": "13:09",
      "timestamp": "1741723788.091889",
      "is_reply": true
    },
    {
      "sender": "mfichman",
      "user_id": "U03DZ9XUE10",
      "message": "LOL!!",
      "time": "13:23",
      "timestamp": "1741724587.805239",
      "is_reply": true
    },
    {
      "sender": "mfichman",
      "user_id": "U03DZ9XUE10",
      "message": "Golinks is very confused :slightly_smiling_face:",
      "time": "13:23",
      "timestamp": "1741724595.156809",
      "is_reply": true
    },
    {
      "sender": "mfichman",
      "user_id": "U03DZ9XUE10",
      "message": "Yeah, `mockery` is a huge pain -- it always seems to break. Mostly b/c it doesn't run inside bazel...so it relies on the old go.mod files.",
      "time": "13:23",
      "timestamp": "1741724622.194129",
      "is_reply": true
    },
    {
      "sender": "mfichman",
      "user_id": "U03DZ9XUE10",
      "message": "I think there is probably a way to get it working inside bazel, but I haven't had the cycles to figure it out.",
      "time": "13:23",
      "timestamp": "1741724635.473779",
      "is_reply": true
    },
    {
      "sender": "mfichman",
      "user_id": "U03DZ9XUE10",
      "message": "Maybe there is a way to fetch the `go.mod` that Bazel generates and use that, but I don't really know how it all works :confused:",
      "time": "13:24",
      "timestamp": "1741724672.237169",
      "is_reply": true
    },
    {
      "sender": "mfichman",
      "user_id": "U03DZ9XUE10",
      "message": "@Heymian for now, try reverting `go.mod` to the version on master -- maybe that will work?",
      "time": "13:30",
      "timestamp": "1741725016.320579",
      "is_reply": true
    },
    {
      "sender": "mfichman",
      "user_id": "U03DZ9XUE10",
      "message": "OH, I remember -- run `make build` first. It does the \"old school\" setup needed for the `go.mod` to work.",
      "time": "13:30",
      "timestamp": "1741725044.151379",
      "is_reply": true
    },
    {
      "sender": "Heymian",
      "user_id": "UADQ9V8PK",
      "message": "ooohh yes, forgot to do that.\n\nI noticed that `protoc-gen-go` is also now missing from the crafting image. Is that something that should've been installed?",
      "time": "13:50",
      "timestamp": "1741726208.452189",
      "is_reply": true
    },
    {
      "sender": "Heymian",
      "user_id": "UADQ9V8PK",
      "message": "```protoc-gen-go: program not found or is not executable```",
      "time": "13:50",
      "timestamp": "1741726210.746739",
      "is_reply": true
    },
    {
      "sender": "mfichman",
      "user_id": "U03DZ9XUE10",
      "message": "I’m pretty sure it is installed on mine; I’ll have to check in the morning!",
      "time": "17:25",
      "timestamp": "1741739150.587799",
      "is_reply": true
    },
    {
      "sender": "Xindi Xu",
      "user_id": "U03FT35MAHF",
      "message": "Sean pointed me to this file (https://github.com/instabase/instabase/blob/2d8a3e697c5ad4aa1927b47ad25f8ea2adefeaa2/platform/crafting/docker/docker-bake.hcl#L4) . It listed out all packages that should be installed in a crafting sandbox. `protoc-gen-go` and `mockery` are included. Maybe it's easier to create a new sandbox at this point :lolcry:",
      "time": "18:06",
      "timestamp": "1741741616.793749",
      "is_reply": true
    },
    {
      "sender": "mfichman",
      "user_id": "U03DZ9XUE10",
      "message": "If you rebuild the sandbox, you won’t have to create a new one. But back up your files first!!",
      "time": "19:40",
      "timestamp": "1741747247.805709",
      "is_reply": true
    }
  ],
  "metadata": {
    "channel_id": "C05L87V014J",
    "channel_name": "ask-crafting",
    "date_file": "2025-03-11.json",
    "message_count": 65,
    "start_time": "1741681526.626849",
    "end_time": "1741747247.805709",
    "is_thread": true
  }
}