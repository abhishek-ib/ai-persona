{
  "id": "ch_C073F3T5KRQ_2025-06-18_1750274337.850729_thread",
  "type": "channel",
  "channel_name": "discuss-backend",
  "conversation_type": "thread",
  "participants": [
    "Xindi Xu",
    "mfichman",
    "Cody Boggs",
    "Goto Tools Go Links",
    "ayesha.ali",
    "jordy.vlan"
  ],
  "messages": [
    {
      "sender": "Xindi Xu",
      "user_id": "U03FT35MAHF",
      "message": "I'm getting some consistent test failures in CI. Can anyone look into this?\nThis run (https://jenkins.instabase.com/blue/organizations/jenkins/instabase/detail/PR-71484/4/pipeline), this run (https://jenkins.instabase.com/blue/organizations/jenkins/instabase/detail/PR-71484/2/pipeline), this run (https://jenkins.instabase.com/blue/organizations/jenkins/instabase/detail/PR-71484/1/pipeline)\n```[2025-06-18T16:54:08.035Z] //shared-utils/py-utils/data-api-utils/test/_sheet:test                  FAILED in 1.1s\n[2025-06-18T16:54:08.035Z]   /root/.cache/bazel/_bazel_root/eecbca7b87c7c33fd2d8ffba03ee98a3/execroot/__main__/bazel-out/k8-fastbuild/testlogs/shared-utils/py-utils/data-api-utils/test/_sheet/test/test.log\n[2025-06-18T16:54:08.035Z] //shared-utils/py-utils/data-api-utils/test/unit/py/instabase:test       FAILED in 0.4s\n[2025-06-18T16:54:08.035Z]   /root/.cache/bazel/_bazel_root/eecbca7b87c7c33fd2d8ffba03ee98a3/execroot/__main__/bazel-out/k8-fastbuild/testlogs/shared-utils/py-utils/data-api-utils/test/unit/py/instabase/test/test.log\n[2025-06-18T16:54:08.035Z] //shared-utils/py-utils/data-api-utils/test/unit/py/instabase/_sheet:test FAILED in 0.7s\n[2025-06-18T16:54:08.035Z]   /root/.cache/bazel/_bazel_root/eecbca7b87c7c33fd2d8ffba03ee98a3/execroot/__main__/bazel-out/k8-fastbuild/testlogs/shared-utils/py-utils/data-api-utils/test/unit/py/instabase/_sheet/test/test.log```",
      "time": "12:18",
      "timestamp": "1750274337.850729",
      "is_reply": false
    },
    {
      "sender": "mfichman",
      "user_id": "U03DZ9XUE10",
      "message": "@Xindi Xu can you run a git blame on those dirs and see who touched them last?",
      "time": "12:22",
      "timestamp": "1750274555.234129",
      "is_reply": true
    },
    {
      "sender": "Xindi Xu",
      "user_id": "U03FT35MAHF",
      "message": "https://github.com/instabase/instabase/commits/master/shared-utils/py-utils/data-api-utils\n~Seems like the test passed in~\n@jordy.vlan's PR https://github.com/instabase/instabase/pull/71401. I'll try running it after rebasing\n\nEdit: nope... it also failed",
      "time": "12:27",
      "timestamp": "1750274863.405089",
      "is_reply": true
    },
    {
      "sender": "Xindi Xu",
      "user_id": "U03FT35MAHF",
      "message": "",
      "time": "12:31",
      "timestamp": "1750275061.894519",
      "is_reply": true
    },
    {
      "sender": "Xindi Xu",
      "user_id": "U03FT35MAHF",
      "message": "@ayesha.ali @pauline.comising I see that you also touched the directory `shared-utils/py-utils/data-api-utils`. Any ideas?",
      "time": "12:33",
      "timestamp": "1750275195.499519",
      "is_reply": true
    },
    {
      "sender": "ayesha.ali",
      "user_id": "U058ZCMJ28L",
      "message": "i think this is running into the same argument list too long errors we've been seeing recently",
      "time": "12:39",
      "timestamp": "1750275585.645969",
      "is_reply": true
    },
    {
      "sender": "ayesha.ali",
      "user_id": "U058ZCMJ28L",
      "message": "https://instabase.slack.com/archives/C035SLYCJ9X/p1750209088490199?thread_ts=1750093035.476299&cid=C035SLYCJ9X",
      "time": "12:40",
      "timestamp": "1750275636.281069",
      "is_reply": true
    },
    {
      "sender": "Xindi Xu",
      "user_id": "U03FT35MAHF",
      "message": "Thank you!!",
      "time": "12:40",
      "timestamp": "1750275653.404429",
      "is_reply": true
    },
    {
      "sender": "Xindi Xu",
      "user_id": "U03FT35MAHF",
      "message": "~That's fixed in 71401 (https://github.com/instabase/instabase/pull/71401). I've rebased my PR and hopefully that would fix it.~\nEdit: still see the the same `Argument list too long` error",
      "time": "12:41",
      "timestamp": "1750275681.393299",
      "is_reply": true
    },
    {
      "sender": "Xindi Xu",
      "user_id": "U03FT35MAHF",
      "message": "Although... This run includes the fix but the tests still failed (see my screenshot above)\n\nhttps://jenkins.instabase.com/blue/organizations/jenkins/instabase/detail/PR-71401/9/pipeline",
      "time": "12:43",
      "timestamp": "1750275782.201409",
      "is_reply": true
    },
    {
      "sender": "jordy.vlan",
      "user_id": "U072CDMB4N8",
      "message": "@Cody Boggs added that fix to ensure my CI would pass, but still failed though :confused: Likely this will keep on blocking any PR that touches on too many py-utils",
      "time": "12:44",
      "timestamp": "1750275895.381199",
      "is_reply": true
    },
    {
      "sender": "Xindi Xu",
      "user_id": "U03FT35MAHF",
      "message": "yea, i was blind... The last CI in your PR still has the same `Argument list too long` error. Same as the runs in my PR.",
      "time": "12:47",
      "timestamp": "1750276026.313359",
      "is_reply": true
    },
    {
      "sender": "Cody Boggs",
      "user_id": "U037PKN4USZ",
      "message": ":sob:\nSorry, I'm having a hard time focusing up today. I'm going to set down everything else for a bit and figure out what on earth to do with this",
      "time": "12:49",
      "timestamp": "1750276174.917509",
      "is_reply": true
    },
    {
      "sender": "Cody Boggs",
      "user_id": "U037PKN4USZ",
      "message": "OH CRAP\nI know exactly what it is\nDammit, it sucks to be this dorkish\nSorry y'all, I'm on it",
      "time": "12:51",
      "timestamp": "1750276273.602309",
      "is_reply": true
    },
    {
      "sender": "Cody Boggs",
      "user_id": "U037PKN4USZ",
      "message": "@Xindi Xu I cherry-picked my (hopeful) fix to your PR branch just to see if it passes. If it works I'll merge MY branch first then we can let yours simply merge afterward, relying on the passed pre-merge from the cherry-pick (so you don't have to wait through the whole stupid run again lol)",
      "time": "13:22",
      "timestamp": "1750278151.877359",
      "is_reply": true
    },
    {
      "sender": "Cody Boggs",
      "user_id": "U037PKN4USZ",
      "message": "https://github.com/instabase/instabase/pull/71484/commits",
      "time": "13:22",
      "timestamp": "1750278157.311699",
      "is_reply": true
    },
    {
      "sender": "Xindi Xu",
      "user_id": "U03FT35MAHF",
      "message": "Thank you!! :crossed_fingers:",
      "time": "13:23",
      "timestamp": "1750278211.037749",
      "is_reply": true
    },
    {
      "sender": "Cody Boggs",
      "user_id": "U037PKN4USZ",
      "message": "Can watch the logs here (https://grafana.infra.instabase.com/explore?schemaVersion=1&panes=%7B%22tuq%22:%7B%22datasource%22:%22loki%22,%22queries%22:%5B%7B%22refId%22:%22A%22,%22expr%22:%22%7Bservice_name%3D%5C%22jenkins-preprod%5C%22%7D%20%7C%20ci_pipeline_id%20%3D%20%60instabase%2FPR-71484%60%20%7C%20ci_pipeline_run_number%20%3D%206%22,%22queryType%22:%22range%22,%22datasource%22:%7B%22type%22:%22loki%22,%22uid%22:%22loki%22%7D,%22editorMode%22:%22code%22,%22direction%22:%22backward%22%7D%5D,%22range%22:%7B%22from%22:%22now-1h%22,%22to%22:%22now%22%7D%7D%7D&orgId=1) (nicer than the Jenkins console IMO lol)",
      "time": "13:23",
      "timestamp": "1750278234.247139",
      "is_reply": true
    },
    {
      "sender": "Cody Boggs",
      "user_id": "U037PKN4USZ",
      "message": "Here's my PR (https://github.com/instabase/instabase/pull/71531) with that commit in it.. will wait to merge of course, til we know if I broke the world. (my PR doesn't trigger any meaningful tests)\n\n<!subteam^S08AA13VAFQ> for stampage",
      "time": "13:26",
      "timestamp": "1750278371.990209",
      "is_reply": true
    },
    {
      "sender": "Cody Boggs",
      "user_id": "U037PKN4USZ",
      "message": "TL;DR for the curious as to why it broke again...\nThe last time we fixed this, it was by way of targeted `make bazel test` target tweaks. Worked like a charm - because `runtest.go` was still running aaaalllll of those individual make targets one after another.\n\nConsolidating the bazel runs to a single invocation _also_ converted the actual test entrypoint from `runtest.go` to a direct `bazel test [...]` command, bypassing the `make bazel test` calls entirely. :upside_down_face:\n\nSo I walked right past my own nice little win and promptly plopped myself into a mudpit.",
      "time": "13:29",
      "timestamp": "1750278570.998029",
      "is_reply": true
    },
    {
      "sender": "Cody Boggs",
      "user_id": "U037PKN4USZ",
      "message": "(slightly more direct query for logs, if you'd like: https://grafana.infra.instabase.com/explore?schemaVersion=1&panes=%7B%22tuq%22:%7B%22datas[â€¦]B%22visualisationType%22:%22logs%22%7D%7D%7D%7D&orgId=1 (https://grafana.infra.instabase.com/explore?schemaVersion=1&panes=%7B%22tuq%22:%7B%22datasource%22:%22loki%22,%22queries%22:%5B%7B%22refId%22:%22A%22,%22expr%22:%22%7Bservice_name%3D%5C%22jenkins-preprod%5C%22%7D%20%7C%20ci_pipeline_id%20%3D%20%60instabase%2FPR-71484%60%20%7C%20ci_pipeline_run_number%20%3D%206%20%7C%3D%20%60Argument%20list%60%22,%22queryType%22:%22range%22,%22datasource%22:%7B%22type%22:%22loki%22,%22uid%22:%22loki%22%7D,%22editorMode%22:%22code%22,%22direction%22:%22backward%22%7D%5D,%22range%22:%7B%22from%22:%22now-1h%22,%22to%22:%22now%22%7D,%22panelsState%22:%7B%22logs%22:%7B%22visualisationType%22:%22logs%22%7D%7D%7D%7D&orgId=1))",
      "time": "13:53",
      "timestamp": "1750280028.496849",
      "is_reply": true
    },
    {
      "sender": "Xindi Xu",
      "user_id": "U03FT35MAHF",
      "message": "Now seeing these 2 failures\n```[2025-06-18T20:37:05.350Z] [0;31m[FAIL]   [0m  (//shared-utils/py-utils/ocr-server-lib/...): exit status 1\n[2025-06-18T20:37:34.648Z] [0;31m[FAIL]   [0m [rabbitmq]: open /instabase_dir/shared-utils/build-utils/envdocs/build/base_configs/instabase/templates/rabbitmq: no such file or directory```\nDoes this log means tests in data-api-utils are passed?\n```[2025-06-18T20:37:05.046Z] //shared-utils/py-utils/data-api-utils/fn-spec-lib/test/unit/py/instabase:test NO STATUS\n[2025-06-18T20:37:05.046Z] //shared-utils/py-utils/data-api-utils/parser-utils/test/unit/py/instabase/_sheet/parser_lib:parser_lib_test NO STATUS\n[2025-06-18T20:37:05.046Z] //shared-utils/py-utils/data-api-utils/parser-utils/types/test/unit/py/instabase/_sheet/parser_lib/types:types_test NO STATUS\n[2025-06-18T20:37:05.046Z] //shared-utils/py-utils/data-api-utils/test:test                      NO STATUS\n[2025-06-18T20:37:05.046Z] //shared-utils/py-utils/data-api-utils/test/_sheet:test               NO STATUS\n[2025-06-18T20:37:05.046Z] //shared-utils/py-utils/data-api-utils/test/unit/py/instabase:test    NO STATUS\n[2025-06-18T20:37:05.046Z] //shared-utils/py-utils/data-api-utils/test/unit/py/instabase/_sheet:test NO STATUS\n[2025-06-18T20:37:05.046Z] //shared-utils/py-utils/data-api-utils/test_data/test/unit/py/instabase:test NO STATUS\n[2025-06-18T20:37:05.046Z] //shared-utils/py-utils/data-api-utils/types/test/unit/py/instabase/data_api_utils/_sheet/types:types_test NO STATUS```",
      "time": "14:27",
      "timestamp": "1750282063.835229",
      "is_reply": true
    },
    {
      "sender": "Cody Boggs",
      "user_id": "U037PKN4USZ",
      "message": "I think @Cheryl Zhou just merged a PR to fix the first error about rabbitmq, so we can ignore that one",
      "time": "14:45",
      "timestamp": "1750283146.021139",
      "is_reply": true
    },
    {
      "sender": "Cody Boggs",
      "user_id": "U037PKN4USZ",
      "message": ":suspicious:\nHmmm, I don't like that output, makes me think it skipped them... though usually it will actually say such",
      "time": "14:47",
      "timestamp": "1750283224.483369",
      "is_reply": true
    },
    {
      "sender": "Cody Boggs",
      "user_id": "U037PKN4USZ",
      "message": "_To the Googles!_",
      "time": "14:47",
      "timestamp": "1750283230.730579",
      "is_reply": true
    },
    {
      "sender": "Cody Boggs",
      "user_id": "U037PKN4USZ",
      "message": "Bah. This damned runtest.go script is tedious. It used to swallow the output and manipulate it per its own parsing of the output it sees from the make targets, but that left the logs empty until the entire consolidated bazel invocation was done - so I instead told it to stream the output to stdout/stderr and also do its own parsing to ensure we catch the right exit codes and such with minimal changes.\n\nBut now the logs are garbage to find the actual failures, especially when so many tests emit the \"expected errors\" in the logs too. :sob:\n\n```FAILED: Build did NOT complete successfully //central-observability/obs-manager/src/go/src/instabase/observability/obsmanager:obs_manager_test```\nIs tucked away in this ONE LINE (https://grafana.infra.instabase.com/goto/_gmPHnPNR?orgId=1)\n:dead:\nOkie doke... I'll see what I can do to make those logs usable again. I hadn't looked into the mess too far before.\n\nEither way, it seems this was definitely not a safe change, because according to the bottom of that _monster_ log line:\n`Executed 0 out of 321 tests: 321 were skipped.FAILED: Build did NOT complete successfully`",
      "time": "14:52",
      "timestamp": "1750283578.930079",
      "is_reply": true
    },
    {
      "sender": "Goto Tools Go Links",
      "user_id": "U07NAC7GVNY",
      "message": "https://goto.tools/src/instabase/observability/obsmanager:obs_manager_test```",
      "time": "14:53",
      "timestamp": "1750283580.759609",
      "is_reply": true
    },
    {
      "sender": "Cody Boggs",
      "user_id": "U037PKN4USZ",
      "message": "I hate bazel :sob:\nlol",
      "time": "14:53",
      "timestamp": "1750283592.333329",
      "is_reply": true
    },
    {
      "sender": "Cody Boggs",
      "user_id": "U037PKN4USZ",
      "message": "And it still took an hour just to say \"Hey I failed a build, sorry about your tests lulz\"\n:thonk:",
      "time": "14:54",
      "timestamp": "1750283673.025759",
      "is_reply": true
    },
    {
      "sender": "Xindi Xu",
      "user_id": "U03FT35MAHF",
      "message": ":lolcry: I was surprised that this run was 1.5 hrs shorter than the previous runs",
      "time": "14:56",
      "timestamp": "1750283779.411189",
      "is_reply": true
    },
    {
      "sender": "Cody Boggs",
      "user_id": "U037PKN4USZ",
      "message": "LOL",
      "time": "15:45",
      "timestamp": "1750286729.307519",
      "is_reply": true
    },
    {
      "sender": "Cody Boggs",
      "user_id": "U037PKN4USZ",
      "message": "oh lawdy",
      "time": "15:45",
      "timestamp": "1750286730.692879",
      "is_reply": true
    },
    {
      "sender": "Cody Boggs",
      "user_id": "U037PKN4USZ",
      "message": "Looks like the flag is indeed too greedy. _sigh_\n```14:37:03  None of PyTorch, TensorFlow >= 2.0, or Flax have been found. Models won't be available and only tokenizers, configuration and file/data utilities can be used.\n14:37:04  INFO: Elapsed time: 835.289s, Critical Path: 31.94s\n14:37:04  INFO: 2781 processes: 1909 remote cache hit, 870 internal, 2 local.\n14:37:04  FAILED: Build did NOT complete successfully```",
      "time": "15:49",
      "timestamp": "1750286972.454319",
      "is_reply": true
    },
    {
      "sender": "Cody Boggs",
      "user_id": "U037PKN4USZ",
      "message": "Actually those might not be causally related after all. The command that failed was a straight-up `poetry run ...` command",
      "time": "15:50",
      "timestamp": "1750287054.417529",
      "is_reply": true
    },
    {
      "sender": "Cody Boggs",
      "user_id": "U037PKN4USZ",
      "message": "Yea I think that's a red herring, sorry",
      "time": "15:55",
      "timestamp": "1750287323.314679",
      "is_reply": true
    },
    {
      "sender": "Cody Boggs",
      "user_id": "U037PKN4USZ",
      "message": "Running the allegedly failed build locally to see if I can repro",
      "time": "15:55",
      "timestamp": "1750287337.414709",
      "is_reply": true
    },
    {
      "sender": "Cody Boggs",
      "user_id": "U037PKN4USZ",
      "message": "_sigh_ it passed fine lol",
      "time": "15:56",
      "timestamp": "1750287367.788009",
      "is_reply": true
    },
    {
      "sender": "Cody Boggs",
      "user_id": "U037PKN4USZ",
      "message": "Well it seems the actual bazel invocation, while failling, wasn't actually as long as it looked at it seemed",
      "time": "16:07",
      "timestamp": "1750288050.067079",
      "is_reply": true
    },
    {
      "sender": "Cody Boggs",
      "user_id": "U037PKN4USZ",
      "message": "I've grabbed the full bazel invocation for that one and put it in a runtest.go-happy file, RIP my crafting sandbox... but hopefully it'll fail the same?",
      "time": "16:11",
      "timestamp": "1750288268.653649",
      "is_reply": true
    },
    {
      "sender": "Cody Boggs",
      "user_id": "U037PKN4USZ",
      "message": "So... it repro'd... I think?\nIgnoring the screwy logging from runtest.go, I got\n```[snip]\n//tools/onprem/post-install-action-system-tests-runner/src/go/src:main_test NO STATUS\n//tools/onprem/post-install-action-test-runner/src/go/src:main_test   NO STATUS\n//shared-utils/py-utils/license-utils/test/unit/py/instabase/license_utils:license_utils_test FAILED TO BUILD\n\nExecuted 0 out of 321 tests: 1 fails to build and 320 were skipped.\nFAILED: Build did NOT complete successfully\nINFO: Build Event Protocol files produced successfully.```",
      "time": "16:26",
      "timestamp": "1750289217.831219",
      "is_reply": true
    },
    {
      "sender": "Goto Tools Go Links",
      "user_id": "U07NAC7GVNY",
      "message": "https://goto.tools/src:main_test",
      "time": "16:26",
      "timestamp": "1750289218.629949",
      "is_reply": true
    },
    {
      "sender": "Goto Tools Go Links",
      "user_id": "U07NAC7GVNY",
      "message": "https://goto.tools/src:main_test",
      "time": "16:26",
      "timestamp": "1750289218.685459",
      "is_reply": true
    },
    {
      "sender": "Cody Boggs",
      "user_id": "U037PKN4USZ",
      "message": "Solo run:\n```ERROR: /home/owner/projects/instabase/shared-utils/py-utils/license-utils/test/unit/py/instabase/license_utils/BUILD.bazel:21:8: Writing: bazel-out/k8-fastbuild/bin/shared-utils/py-utils/license-utils/test/unit/py/instabase/license_utils/pack_srcs.tar.gz failed: (Exit 1): process-wrapper failed: error executing command\n  (cd /home/owner/.cache/bazel/_bazel_owner/9fc0e062b1d93ceecdd77e6ee927b893/sandbox/processwrapper-sandbox/513/execroot/__main__ && \\\n  exec env - \\\n    PATH=/home/owner/.cache/bazelisk/downloads/sha256/a40ac69263440761199fcb8da47ad4e3f328cbe79ffbf4ecc14e5ba252857307/bin:/usr/local/nodenv/versions/22.14.0/bin:/usr/local/nodenv/libexec:/usr/local/nodenv/plugins/node-build/bin:/usr/local/thrift/bin:/usr/local/tfenv/bin:/usr/local/pyenv/shims:/usr/local/pyenv/bin:/usr/local/protoc/bin:/usr/local/poetry/bin:/usr/local/nodenv/shims:/usr/local/nodenv/bin:/usr/local/nodenv/shims:/usr/local/oracle/bin:/usr/local/go/current/bin:/usr/local/go/workspace/bin:/usr/local/aws-cli/v2/current/bin:/usr/local/thrift/bin:/usr/local/tfenv/bin:/usr/local/pyenv/bin:/usr/local/protoc/bin:/usr/local/poetry/bin:/usr/local/nodenv/shims:/usr/local/nodenv/bin:/usr/local/nodenv/shims:/usr/local/oracle/bin:/usr/local/go/current/bin:/usr/local/go/workspace/bin:/usr/local/aws-cli/v2/current/bin:/home/owner/.krew/bin:/usr/local/pyenv/bin:/home/owner/.local/kitty.app/bin:/usr/local/openresty/nginx/sbin:/usr/local/nodenv/bin:/usr/local/go/bin:/home/owner/.local/bin/:/home/owner/bin:/home/owner/.nodenv/shims:/home/owner/.local/bin:/home/owner/.deno/bin:/usr/local/thrift/bin:/usr/local/tfenv/bin:/usr/local/pyenv/bin:/usr/local/protoc/bin:/usr/local/poetry/bin:/usr/local/nodenv/shims:/usr/local/nodenv/bin:/usr/local/nodenv/shims:/usr/local/oracle/bin:/usr/local/go/current/bin:/usr/local/go/workspace/bin:/usr/local/aws-cli/v2/current/bin:/home/owner/.krew/bin:/usr/local/pyenv/bin:/home/owner/.local/kitty.app/bin:/usr/local/openresty/nginx/sbin:/usr/local/nodenv/bin:/usr/local/go/bin:/home/owner/.local/bin/:/home/owner/bin:/home/owner/.nodenv/shims:/home/owner/.local/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/sandboxd/bin:/usr/games:/usr/local/games:/snap/bin \\\n    TMPDIR=/tmp \\\n  /home/owner/.cache/bazel/_bazel_owner/install/20da5ab742b8d3d499c34fdafcd3c8b8/process-wrapper '--timeout=0' '--kill_delay=15' '--stats=/home/owner/.cache/bazel/_bazel_owner/9fc0e062b1d93ceecdd77e6ee927b893/sandbox/processwrapper-sandbox/513/stats.out' bazel-out/k8-opt-exec-2B5CBBC6/bin/external/rules_pkg/pkg/private/tar/build_tar '--output=bazel-out/k8-fastbuild/bin/shared-utils/py-utils/license-utils/test/unit/py/instabase/license_utils/pack_srcs.tar.gz' '--mode=0555' '--owner=0.0' '--owner_name=.' '--directory=/' '--compression=gz' '--mtime=portable' '--manifest=bazel-out/k8-fastbuild/bin/shared-utils/py-utils/license-utils/test/unit/py/instabase/license_utils/pack_srcs.manifest')\nTraceback (most recent call last):\n  File \"/home/owner/.cache/bazel/_bazel_owner/9fc0e062b1d93ceecdd77e6ee927b893/sandbox/processwrapper-sandbox/513/execroot/__main__/bazel-out/k8-opt-exec-2B5CBBC6/bin/external/rules_pkg/pkg/private/tar/build_tar.runfiles/rules_pkg/pkg/private/tar/build_tar.py\", line 21, in <module>\n    from pkg.private import archive\nModuleNotFoundError: No module named 'pkg'\nAspect //third-party/bazel/py/rules_mypy:mypy.bzl%mypy_aspect of //shared-utils/py-utils/license-utils/test/unit/py/instabase/license_utils:license_utils_test failed to build\nUse --verbose_failures to see the command lines of failed build steps.\nINFO: Elapsed time: 0.466s, Critical Path: 0.20s\nINFO: 4 processes: 4 internal.\nFAILED: Build did NOT complete successfully\n//shared-utils/py-utils/license-utils/test/unit/py/instabase/license_utils:license_utils_test FAILED TO BUILD```",
      "time": "16:28",
      "timestamp": "1750289322.939989",
      "is_reply": true
    },
    {
      "sender": "Cody Boggs",
      "user_id": "U037PKN4USZ",
      "message": "Tried with the pythonpath fix commented out, but it fails on redis-server :man-facepalming::skin-tone-3: ~Think my path got borked along the way somehow~\nOh, because I... don't have redis-server installed. That'd do it",
      "time": "16:31",
      "timestamp": "1750289516.185819",
      "is_reply": true
    },
    {
      "sender": "Cody Boggs",
      "user_id": "U037PKN4USZ",
      "message": "_sobs over keyboard while feigning competence_",
      "time": "16:36",
      "timestamp": "1750289812.361019",
      "is_reply": true
    },
    {
      "sender": "Cody Boggs",
      "user_id": "U037PKN4USZ",
      "message": "Ok, yes - indeed the flag breaks this one. Rats. Will see if it's a quick fix. :sweat_smile:",
      "time": "16:42",
      "timestamp": "1750290132.373969",
      "is_reply": true
    },
    {
      "sender": "Cody Boggs",
      "user_id": "U037PKN4USZ",
      "message": "Shoot. It's a bazel rules package that's complaining, not our code... so it'll be:\n1. More widespread than just this label, but not much (5 or 6 I think)\n2. Tricky to fix :grimacing:",
      "time": "17:11",
      "timestamp": "1750291860.180269",
      "is_reply": true
    },
    {
      "sender": "Cody Boggs",
      "user_id": "U037PKN4USZ",
      "message": "Oh, score\nhttps://github.com/bazelbuild/rules_pkg/commit/320107ad11779cf24dbc4c9d247e1e20eed832fa\njust need to update the rules_pkg bits I think. If we can. Because... bazel versions. We'll see!",
      "time": "17:37",
      "timestamp": "1750293470.705069",
      "is_reply": true
    },
    {
      "sender": "Cody Boggs",
      "user_id": "U037PKN4USZ",
      "message": "@Xindi Xu Ok, think I got it. lol Again. :grinning:\n\nPushed a new commit, I'll check in later to see if it passes. :crossed_fingers::skin-tone-3:",
      "time": "17:46",
      "timestamp": "1750293993.898609",
      "is_reply": true
    },
    {
      "sender": "Xindi Xu",
      "user_id": "U03FT35MAHF",
      "message": "Thank you so much! Fingers crossed",
      "time": "17:54",
      "timestamp": "1750294482.696869",
      "is_reply": true
    },
    {
      "sender": "Cody Boggs",
      "user_id": "U037PKN4USZ",
      "message": "```19:16:50  FAIL: //shared-utils/py-utils/nlp-utils/test/unit/py/instabase/nlp_utils/token_matchers:token_matchers_test (see /root/.cache/bazel/_bazel_root/eecbca7b87c7c33fd2d8ffba03ee98a3/execroot/__main__/bazel-out/k8-fastbuild/testlogs/shared-utils/py-utils/nlp-utils/test/unit/py/instabase/nlp_utils/token_matchers/token_matchers_test/test.log)```",
      "time": "18:28",
      "timestamp": "1750296500.043879",
      "is_reply": true
    },
    {
      "sender": "Cody Boggs",
      "user_id": "U037PKN4USZ",
      "message": "So far that's the only meaningful failure, I think",
      "time": "18:31",
      "timestamp": "1750296708.686239",
      "is_reply": true
    },
    {
      "sender": "Xindi Xu",
      "user_id": "U03FT35MAHF",
      "message": "yea... but the good news is that data-api-utils tests all passed :blob-bear-dance:\n```[2025-06-19T01:50:39.397Z] //shared-utils/py-utils/data-api-utils/fn-spec-lib/test/unit/py/instabase:test PASSED in 0.4s\n[2025-06-19T01:50:39.397Z] //shared-utils/py-utils/data-api-utils/parser-utils/test/unit/py/instabase/_sheet/parser_lib:parser_lib_test PASSED in 18.3s\n[2025-06-19T01:50:39.397Z] //shared-utils/py-utils/data-api-utils/parser-utils/types/test/unit/py/instabase/_sheet/parser_lib/types:types_test PASSED in 12.3s\n[2025-06-19T01:50:39.397Z] //shared-utils/py-utils/data-api-utils/test:test                         PASSED in 37.0s\n[2025-06-19T01:50:39.397Z] //shared-utils/py-utils/data-api-utils/test/_sheet:test                  PASSED in 55.7s\n[2025-06-19T01:50:39.397Z] //shared-utils/py-utils/data-api-utils/test/unit/py/instabase:test       PASSED in 0.7s\n[2025-06-19T01:50:39.397Z] //shared-utils/py-utils/data-api-utils/test/unit/py/instabase/_sheet:test PASSED in 21.9s\n[2025-06-19T01:50:39.397Z] //shared-utils/py-utils/data-api-utils/test_data/test/unit/py/instabase:test PASSED in 20.4s\n[2025-06-19T01:50:39.397Z] //shared-utils/py-utils/data-api-utils/types/test/unit/py/instabase/data_api_utils/_sheet/types:types_test PASSED in 26.0s```",
      "time": "19:25",
      "timestamp": "1750299936.154719",
      "is_reply": true
    },
    {
      "sender": "Cody Boggs",
      "user_id": "U037PKN4USZ",
      "message": "Yea!\nDownside is that now it times out because those tests are actually getting run :lolcry:",
      "time": "21:27",
      "timestamp": "1750307276.741979",
      "is_reply": true
    }
  ],
  "metadata": {
    "channel_id": "C073F3T5KRQ",
    "channel_name": "discuss-backend",
    "date_file": "2025-06-18.json",
    "message_count": 54,
    "start_time": "1750274337.850729",
    "end_time": "1750307276.741979",
    "is_thread": true
  }
}