{
  "id": "ch_C0516UPPMT3_2024-04-06_1712435350.265159_thread",
  "type": "channel",
  "channel_name": "aihub-feedback",
  "conversation_type": "thread",
  "participants": [
    "Serena",
    "lydia",
    "Bas"
  ],
  "messages": [
    {
      "sender": "lydia",
      "user_id": "UJK4LKYSJ",
      "message": "Can you share what the generated code looks like? And the test cases",
      "time": "13:29",
      "timestamp": "1712435350.265159",
      "is_reply": false
    },
    {
      "sender": "Bas",
      "user_id": "U0290LSC5QA",
      "message": "Code + test cases",
      "time": "13:32",
      "timestamp": "1712435528.169899",
      "is_reply": true
    },
    {
      "sender": "Serena",
      "user_id": "U01CZ3LBFU4",
      "message": "what is the value of the field with this validation rule? is it a list of countries?",
      "time": "16:50",
      "timestamp": "1712447408.346889",
      "is_reply": true
    },
    {
      "sender": "Bas",
      "user_id": "U0290LSC5QA",
      "message": "Correct",
      "time": "16:50",
      "timestamp": "1712447430.804919",
      "is_reply": true
    },
    {
      "sender": "Serena",
      "user_id": "U01CZ3LBFU4",
      "message": "validation rules return a single result for the entire field, so do your test cases match how the validation rule will actually be run\n\nfor example, test case 1 says that the rule will take in a field called “Country” with the value “USA”\n\nhowever, if the field value is actually a list of countries, i think the value should be something like `[\"USA\", \"USA\", \"USA\"]` ?",
      "time": "16:52",
      "timestamp": "1712447558.527629",
      "is_reply": true
    },
    {
      "sender": "Bas",
      "user_id": "U0290LSC5QA",
      "message": "Got it. What I actually want is flag any row that is not USA",
      "time": "16:54",
      "timestamp": "1712447646.982659",
      "is_reply": true
    },
    {
      "sender": "Serena",
      "user_id": "U01CZ3LBFU4",
      "message": "do you need the particular row number? or do you just need to know that one of the rows is not USA?",
      "time": "16:54",
      "timestamp": "1712447671.878909",
      "is_reply": true
    },
    {
      "sender": "Bas",
      "user_id": "U0290LSC5QA",
      "message": "I’d need the row number to be highlighted ideally",
      "time": "16:55",
      "timestamp": "1712447701.337209",
      "is_reply": true
    },
    {
      "sender": "Serena",
      "user_id": "U01CZ3LBFU4",
      "message": "the example file you uploaded above only has “USA” - are you working with a different file that also has “Iran”?",
      "time": "16:59",
      "timestamp": "1712447978.865189",
      "is_reply": true
    },
    {
      "sender": "Bas",
      "user_id": "U0290LSC5QA",
      "message": "No, one of the entries is Iran",
      "time": "17:00",
      "timestamp": "1712448010.292859",
      "is_reply": true
    },
    {
      "sender": "Serena",
      "user_id": "U01CZ3LBFU4",
      "message": "ah i missed that row",
      "time": "17:00",
      "timestamp": "1712448040.463789",
      "is_reply": true
    },
    {
      "sender": "Serena",
      "user_id": "U01CZ3LBFU4",
      "message": "to answer your original question, yes it’s expected that you just see “Fail” in the Build UI and you don’t see why the validation rule failed\n\nin Human Review, you will see the validation error message",
      "time": "17:01",
      "timestamp": "1712448074.700289",
      "is_reply": true
    },
    {
      "sender": "Serena",
      "user_id": "U01CZ3LBFU4",
      "message": "however, as i mentioned previously, i don’t think your validation rule will work since it expects different input than what you actually have in your field",
      "time": "17:01",
      "timestamp": "1712448092.593849",
      "is_reply": true
    },
    {
      "sender": "Bas",
      "user_id": "U0290LSC5QA",
      "message": "I see. How should I set this up such that it checks all the values to comply with being “USA”?",
      "time": "17:02",
      "timestamp": "1712448145.339539",
      "is_reply": true
    },
    {
      "sender": "Serena",
      "user_id": "U01CZ3LBFU4",
      "message": "i’m trying it out now, but running prompt-based validation takes a while",
      "time": "17:02",
      "timestamp": "1712448154.246789",
      "is_reply": true
    },
    {
      "sender": "Serena",
      "user_id": "U01CZ3LBFU4",
      "message": "er it seems the prompt-based validation UI doesn’t handle showing object values\n\ncc @Eric Han @Weiming Wu",
      "time": "17:06",
      "timestamp": "1712448391.192409",
      "is_reply": true
    },
    {
      "sender": "Bas",
      "user_id": "U0290LSC5QA",
      "message": "Ok, no worries. I think Kerry mentioned before that this functionality will improve in the near future. Dale has kindly offered to write me custom function this week :) That will work. Thanks for having a look!!",
      "time": "17:07",
      "timestamp": "1712448436.498419",
      "is_reply": true
    },
    {
      "sender": "Serena",
      "user_id": "U01CZ3LBFU4",
      "message": "yes this can definitely be handled by a validation custom function, but we should make sure prompt-based validation handles all our field types for sure",
      "time": "17:08",
      "timestamp": "1712448485.202479",
      "is_reply": true
    },
    {
      "sender": "Serena",
      "user_id": "U01CZ3LBFU4",
      "message": "also, strangely i saw the validation result change when i was editing the validation prompt, but i hadn’t clicked “Run” yet\n\nis this expected? @Weiming Wu",
      "time": "17:08",
      "timestamp": "1712448515.290839",
      "is_reply": true
    },
    {
      "sender": "Bas",
      "user_id": "U0290LSC5QA",
      "message": "The objective here is to show a failed validation, and then leverage the underwriting assistant to check whether Incan even underwrite in Iran. It is a pretty cool flow that shows extraction and Chat in the same workflow. \n\nThanks for all the help! Go enjoy the weather - it is beautiful in CA today :)",
      "time": "17:10",
      "timestamp": "1712448619.487659",
      "is_reply": true
    },
    {
      "sender": "Serena",
      "user_id": "U01CZ3LBFU4",
      "message": "yes it is beautiful! i had a great walk with my dog",
      "time": "17:12",
      "timestamp": "1712448775.090769",
      "is_reply": true
    },
    {
      "sender": "Serena",
      "user_id": "U01CZ3LBFU4",
      "message": "i did get the prompt-based validation to create valid test cases, and the generated code makes sense\n\nhowever, i’m unable to get this validation UDF to actually work\n1. the UI just shows “FAIL” even if the UDF didn’t actually successfully run\n2. i inspected an API call and saw this error message - `Udf validate_countries failed to run successfully. Please check the logs` , but the UI doesn’t show the logs",
      "time": "17:27",
      "timestamp": "1712449667.541759",
      "is_reply": true
    },
    {
      "sender": "Serena",
      "user_id": "U01CZ3LBFU4",
      "message": "ah the issue is that the field value actually is `[{'Country': 'USA', 'Legal Entity Name': 'Entity 1'}, …]` , so the generated test cases and code didn’t match that :smiling_face_with_tear:\n\nwe’ll need to come up with some better way to handle this data type for prompt-based validation",
      "time": "17:34",
      "timestamp": "1712450046.648499",
      "is_reply": true
    },
    {
      "sender": "Bas",
      "user_id": "U0290LSC5QA",
      "message": "That’s a good insight. And a good yardstick… If AI Hub can survive me, anyone can use it :joy:",
      "time": "17:35",
      "timestamp": "1712450123.462689",
      "is_reply": true
    }
  ],
  "metadata": {
    "channel_id": "C0516UPPMT3",
    "channel_name": "aihub-feedback",
    "date_file": "2024-04-06.json",
    "message_count": 24,
    "start_time": "1712435350.265159",
    "end_time": "1712450123.462689",
    "is_thread": true
  }
}