{
  "id": "ch_CSY11CK7T_2024-12-18_1734544426.383819_thread",
  "type": "channel",
  "channel_name": "discuss-frontend",
  "conversation_type": "thread",
  "participants": [
    "andy",
    "Jessica",
    "Elan Sharony",
    "Weiming Wu",
    "Serena"
  ],
  "messages": [
    {
      "sender": "Weiming Wu",
      "user_id": "U03DZ9Y4MC2",
      "message": "Are `run-app.spec.ts` and `run-public-app.spec.ts` failing? These are the only tests failing for me (https://cloud.cypress.io/projects/cfhedy/runs/16483/overview?roarHideRunsWithDiffGroupsAndTags=1)\nI'm seeing the same failures in other runs (https://cloud.cypress.io/projects/cfhedy/runs/16480/overview/bde45641-478f-4222-a39d-eecde527134f?roarHideRunsWithDiffGroupsAndTags=1, https://cloud.cypress.io/projects/cfhedy/runs/16478/overview/d4e98e18-fbcb-453d-be1a-950501941acb?roarHideRunsWithDiffGroupsAndTags=1 )\ncc <!subteam^S07855GV3GV>",
      "time": "09:53",
      "timestamp": "1734544426.383819",
      "is_reply": false
    },
    {
      "sender": "Jessica",
      "user_id": "UDEF3M2NP",
      "message": "trace id is 2fd16d4975f496f2\n```{\n  \"message\": \"An unexpected error has occured: Unknown exception\"\n}```",
      "time": "09:56",
      "timestamp": "1734544576.805209",
      "is_reply": true
    },
    {
      "sender": "Jessica",
      "user_id": "UDEF3M2NP",
      "message": "Ahh @Elan Sharony this is us:\n```2024-12-18T17:33:40.035703038Z stdout F level=ERROR time=2024-12-18 17:33:40,035 msg=\"Uncaught exception in webserver while handling request: Error='NoneType' object has no attribute 'secrets'. Traceback=Traceback (most recent call last):;File \"/instabase-api-server/py/instabase/utils/web/handler_util_v2.py\", line 410, in inner_func;return f(*args, **kwargs);File \"/instabase-api-server/py/instabase/utils/oauth2/oauth2.py\", line 260, in wrapped_f;return f(*args, **kwargs);File \"/instabase-api-server/py/instabase/utils/license/license.py\", line 60, in wrapper_f;return f(*args, **kwargs);File \"/instabase-api-server/py/instabase/api_server_apps/handler/api/v2/aihub/projects.py\", line 2358, in post;keys_dict, status = variables_utils.generate_keys_dict_from_db(;File \"/instabase-api-server/py/instabase/aihub_utils/variables_utils.py\", line 198, in generate_keys_dict_from_db;secrets = fetch_secrets(repo_client, username, orgname, repo_name);File \"/instabase-api-server/py/instabase/aihub_utils/variables_utils.py\", line 117, in fetch_secrets;return {secret.alias: secret.value for secret in rpc_resp.secrets};AttributeError: 'NoneType' object has no attribute 'secrets';\" path=\"/instabase-api-server/py/instabase/utils/web/handler_util_v2.py:414\" process=\"MainProcess\" thread=\"ThreadPoolExecutor-0_2\" trace_id=\"2fd16d4975f496f2\"```",
      "time": "09:58",
      "timestamp": "1734544715.159489",
      "is_reply": true
    },
    {
      "sender": "Jessica",
      "user_id": "UDEF3M2NP",
      "message": "`keys` should be able to be undefined on app runs",
      "time": "09:58",
      "timestamp": "1734544734.796559",
      "is_reply": true
    },
    {
      "sender": "Weiming Wu",
      "user_id": "U03DZ9Y4MC2",
      "message": "Yay cypress caught a bug!",
      "time": "09:59",
      "timestamp": "1734544749.250229",
      "is_reply": true
    },
    {
      "sender": "Elan Sharony",
      "user_id": "U02ES3ELJ2Y",
      "message": "ah apologies here, looking into it and will get up a fix",
      "time": "10:09",
      "timestamp": "1734545388.808039",
      "is_reply": true
    },
    {
      "sender": "andy",
      "user_id": "U0130FUMPN3",
      "message": "good job, cypress :clap::cypress-spin:",
      "time": "10:33",
      "timestamp": "1734546783.149439",
      "is_reply": true
    },
    {
      "sender": "Serena",
      "user_id": "U01CZ3LBFU4",
      "message": "btw it seems that this causes extraction jobs to fail as well",
      "time": "12:26",
      "timestamp": "1734553608.004849",
      "is_reply": true
    },
    {
      "sender": "Serena",
      "user_id": "U01CZ3LBFU4",
      "message": "btw i think this is affecting CI runs on your PRs @ayesha.ali @Liam Callanan",
      "time": "12:27",
      "timestamp": "1734553628.518269",
      "is_reply": true
    },
    {
      "sender": "Elan Sharony",
      "user_id": "U02ES3ELJ2Y",
      "message": "@Jessica or @Serena do you mind posting the contents of the request headers and payload? I'm not seeing the same failure via the UI in sandbox which is weird",
      "time": "13:15",
      "timestamp": "1734556510.880239",
      "is_reply": true
    },
    {
      "sender": "Elan Sharony",
      "user_id": "U02ES3ELJ2Y",
      "message": "I'm wondering if the request headers is missing `Ib-Context` potentially?",
      "time": "13:15",
      "timestamp": "1734556540.779699",
      "is_reply": true
    },
    {
      "sender": "Elan Sharony",
      "user_id": "U02ES3ELJ2Y",
      "message": "Oh is this for a community project? That would make a lot of sense",
      "time": "13:17",
      "timestamp": "1734556653.009629",
      "is_reply": true
    },
    {
      "sender": "Jessica",
      "user_id": "UDEF3M2NP",
      "message": "Ohh yup and one is public",
      "time": "13:17",
      "timestamp": "1734556678.007999",
      "is_reply": true
    },
    {
      "sender": "Elan Sharony",
      "user_id": "U02ES3ELJ2Y",
      "message": "ahh okay nice, yeah whenever we fetch keys there's an assumption that it's in an org context :melting_face:\n\nso 2 things coming in the fix:\n1. better error handling for fetching secrets\n    a. that explains the `NoneType`  reference in the logs\n 2.  if `Ib-Context` isn't populated, avoid fetching secrets",
      "time": "13:19",
      "timestamp": "1734556788.176179",
      "is_reply": true
    },
    {
      "sender": "Elan Sharony",
      "user_id": "U02ES3ELJ2Y",
      "message": "Here's the fix: https://github.com/instabase/instabase/pull/66523\n\nWe'll omit fetching secrets in case username == orgname (e.g. community context)",
      "time": "16:04",
      "timestamp": "1734566647.712709",
      "is_reply": true
    }
  ],
  "metadata": {
    "channel_id": "CSY11CK7T",
    "channel_name": "discuss-frontend",
    "date_file": "2024-12-18.json",
    "message_count": 15,
    "start_time": "1734544426.383819",
    "end_time": "1734566647.712709",
    "is_thread": true
  }
}