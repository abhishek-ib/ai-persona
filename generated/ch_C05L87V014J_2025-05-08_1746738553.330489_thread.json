{
  "id": "ch_C05L87V014J_2025-05-08_1746738553.330489_thread",
  "type": "channel",
  "channel_name": "ask-crafting",
  "conversation_type": "thread",
  "participants": [
    "mfichman"
  ],
  "messages": [
    {
      "sender": "mfichman",
      "user_id": "U03DZ9XUE10",
      "message": "Hi all! I've been having trouble with `bazel` constantly rebuilding protobuf. Previous fixes didn't work (https://instabase.slack.com/archives/C070H1089H8/p1744134139440649).\n\nWhat I determined is that `bazel`  will rebuild the protobuf library and protoc compiler whenever the `PATH` var changes even slightly. This then causes a complete rebuild of everything b/c pretty much everything depends on protobufs.\n\nI also found that the `PATH` environment var is unstable in Crafting sandboxes b/c of the way it gets loaded. I'm going to push an update to the Crafting base image to correct this. I'm also going to ensure that `bazel` always gets run with the same `PATH` var by adding a \"shim\" for the bazel command that locks the `PATH` to a deterministic value that doesn't depend on `~/.bashrc` or `~/.bash_profile`.\n\nThe upside is that builds will be faster, and probably vscode jump-to-definition will work more smoothly b/c of fewer bazel cache invalidations.",
      "time": "14:09",
      "timestamp": "1746738553.330489",
      "is_reply": false
    }
  ],
  "metadata": {
    "channel_id": "C05L87V014J",
    "channel_name": "ask-crafting",
    "date_file": "2025-05-08.json",
    "message_count": 1,
    "start_time": "1746738553.330489",
    "end_time": "1746738553.330489",
    "is_thread": true
  }
}