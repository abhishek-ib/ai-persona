{
  "id": "ch_C0516UPPMT3_2023-05-31_1685551731.931169_thread",
  "type": "channel",
  "channel_name": "aihub-feedback",
  "conversation_type": "thread",
  "participants": [
    "Yash Botadra",
    "Kerry",
    "Anil",
    "Ashish",
    "vineeth",
    "Siddhant",
    "shaunak",
    "Rakesh",
    "Serena"
  ],
  "messages": [
    {
      "sender": "Kerry",
      "user_id": "UCX3VGDJR",
      "message": "been waiting for things to process for a while -- job id f7106d06-3193-4051-8385-16cc5f5368c2",
      "time": "09:48",
      "timestamp": "1685551731.931169",
      "is_reply": false
    },
    {
      "sender": "Serena",
      "user_id": "U01CZ3LBFU4",
      "message": "same, my previous flow jobs ran very quickly\n\nmy flow jobs now are just stuck",
      "time": "09:49",
      "timestamp": "1685551790.910659",
      "is_reply": true
    },
    {
      "sender": "Siddhant",
      "user_id": "U02V2C0DFQD",
      "message": "Kerry, can you share the trace_id?",
      "time": "09:49",
      "timestamp": "1685551797.668309",
      "is_reply": true
    },
    {
      "sender": "Siddhant",
      "user_id": "U02V2C0DFQD",
      "message": "Serena - do you have some trace_ids that you can share?",
      "time": "09:50",
      "timestamp": "1685551835.926869",
      "is_reply": true
    },
    {
      "sender": "Kerry",
      "user_id": "UCX3VGDJR",
      "message": "where can I find trace id @Siddhant?",
      "time": "09:50",
      "timestamp": "1685551841.579529",
      "is_reply": true
    },
    {
      "sender": "Kerry",
      "user_id": "UCX3VGDJR",
      "message": "this is a flow run (running an app)",
      "time": "09:50",
      "timestamp": "1685551854.178819",
      "is_reply": true
    },
    {
      "sender": "Kerry",
      "user_id": "UCX3VGDJR",
      "message": "all the other interaction in chat and build app to me are very quick :smile:",
      "time": "09:51",
      "timestamp": "1685551881.816709",
      "is_reply": true
    },
    {
      "sender": "Kerry",
      "user_id": "UCX3VGDJR",
      "message": "i was like things are going so well until i run an app haha",
      "time": "09:51",
      "timestamp": "1685551894.974049",
      "is_reply": true
    },
    {
      "sender": "Rakesh",
      "user_id": "U01668DGQCE",
      "message": "We cannot see flow runs in flow dashboard for other users now (with admin access curtailed)- do we have flow job id ? May be can try grafana",
      "time": "09:53",
      "timestamp": "1685551990.614429",
      "is_reply": true
    },
    {
      "sender": "Siddhant",
      "user_id": "U02V2C0DFQD",
      "message": "> where can I find trace id\nin the network tab -- in the response headers `ib-trace-id`",
      "time": "09:53",
      "timestamp": "1685552001.575719",
      "is_reply": true
    },
    {
      "sender": "Kerry",
      "user_id": "UCX3VGDJR",
      "message": "job id is f7106d06-3193-4051-8385-16cc5f5368c2",
      "time": "09:55",
      "timestamp": "1685552114.702469",
      "is_reply": true
    },
    {
      "sender": "Kerry",
      "user_id": "UCX3VGDJR",
      "message": "`*ib-trace-id:* dd76ef00e94a3b4c`",
      "time": "09:55",
      "timestamp": "1685552140.796999",
      "is_reply": true
    },
    {
      "sender": "Yash Botadra",
      "user_id": "U02QEPQ1M7U",
      "message": "My two document batch is stuck as well.\nJob id for me: `b152ece7-d370-49ae-a020-ba83187794a3`",
      "time": "09:55",
      "timestamp": "1685552150.577889",
      "is_reply": true
    },
    {
      "sender": "Rakesh",
      "user_id": "U01668DGQCE",
      "message": "we have 19000 flow tasks in pending state !",
      "time": "09:56",
      "timestamp": "1685552192.682919",
      "is_reply": true
    },
    {
      "sender": "Kerry",
      "user_id": "UCX3VGDJR",
      "message": "hehe someone tries to break IB, nice",
      "time": "09:57",
      "timestamp": "1685552228.513909",
      "is_reply": true
    },
    {
      "sender": "Serena",
      "user_id": "U01CZ3LBFU4",
      "message": "my flow job ids: `cd10882f-402a-471b-b85b-7c9432ad7fde`, `e6f577bd-d07b-4114-b0f7-0cb6d06d9d57`",
      "time": "09:57",
      "timestamp": "1685552250.461149",
      "is_reply": true
    },
    {
      "sender": "Rakesh",
      "user_id": "U01668DGQCE",
      "message": "Its not stuck, number of tasks are coming down though",
      "time": "09:58",
      "timestamp": "1685552286.733939",
      "is_reply": true
    },
    {
      "sender": "Kerry",
      "user_id": "UCX3VGDJR",
      "message": "this is definitely triggered by some script or someone running an app on a super large folder -- we should set a reasonable limit on that i think (i don't believe we have enough users to trigger 20000 tasks)",
      "time": "09:59",
      "timestamp": "1685552350.853909",
      "is_reply": true
    },
    {
      "sender": "Kerry",
      "user_id": "UCX3VGDJR",
      "message": "@shaunak any way we can see the flow dashboard on prod?",
      "time": "09:59",
      "timestamp": "1685552361.887169",
      "is_reply": true
    },
    {
      "sender": "Kerry",
      "user_id": "UCX3VGDJR",
      "message": "actually, i can see my own :slightly_smiling_face: just not other people's flows i guess",
      "time": "10:00",
      "timestamp": "1685552403.171469",
      "is_reply": true
    },
    {
      "sender": "shaunak",
      "user_id": "UCY6SA014",
      "message": "I think if we log in as admin, we can see everyone’s dashboard.",
      "time": "10:00",
      "timestamp": "1685552419.951199",
      "is_reply": true
    },
    {
      "sender": "vineeth",
      "user_id": "U0175SZ13F0",
      "message": "admin creds are no longer on 1pass :disappointed:",
      "time": "10:00",
      "timestamp": "1685552444.032049",
      "is_reply": true
    },
    {
      "sender": "shaunak",
      "user_id": "UCY6SA014",
      "message": "wow, we have 19K pending tasks … that is a lot …",
      "time": "10:05",
      "timestamp": "1685552715.681409",
      "is_reply": true
    },
    {
      "sender": "shaunak",
      "user_id": "UCY6SA014",
      "message": "there was also a misconfiguration that I ended up fixing on the job-service where the environment variable to update celery-app-tasks was rewritten to 7.  I changed it back to 28 since we have XL configuration.\n\nHowever, that should not create such a large backlog.",
      "time": "10:07",
      "timestamp": "1685552822.271679",
      "is_reply": true
    },
    {
      "sender": "Rakesh",
      "user_id": "U01668DGQCE",
      "message": "We are processing 200 tasks a min - still not fast enough",
      "time": "10:07",
      "timestamp": "1685552832.946059",
      "is_reply": true
    },
    {
      "sender": "shaunak",
      "user_id": "UCY6SA014",
      "message": "I can increase the pod count for app-tasks …",
      "time": "10:07",
      "timestamp": "1685552876.855829",
      "is_reply": true
    },
    {
      "sender": "Rakesh",
      "user_id": "U01668DGQCE",
      "message": "Shaunak\nThat would limit the tasks being put on queue right ? Rough math is App task pods * 8 * 1.1",
      "time": "10:07",
      "timestamp": "1685552877.758549",
      "is_reply": true
    },
    {
      "sender": "Kerry",
      "user_id": "UCX3VGDJR",
      "message": "I think i know what happened -- looks like Mr Matt Weaver sends ~900 of 200 pages+ files to run :slightly_smiling_face:",
      "time": "10:08",
      "timestamp": "1685552889.345309",
      "is_reply": true
    },
    {
      "sender": "Kerry",
      "user_id": "UCX3VGDJR",
      "message": "we map reduce in process files step, so the tasks piled up; everything is running as usual",
      "time": "10:09",
      "timestamp": "1685552942.980979",
      "is_reply": true
    },
    {
      "sender": "Siddhant",
      "user_id": "U02V2C0DFQD",
      "message": "How did you find that? Admin account I guess",
      "time": "10:09",
      "timestamp": "1685552956.387339",
      "is_reply": true
    },
    {
      "sender": "Rakesh",
      "user_id": "U01668DGQCE",
      "message": "We dont need a separate load test :slightly_smiling_face:",
      "time": "10:09",
      "timestamp": "1685552959.398109",
      "is_reply": true
    },
    {
      "sender": "Kerry",
      "user_id": "UCX3VGDJR",
      "message": "yeah i have admin access on 1password",
      "time": "10:10",
      "timestamp": "1685553004.399469",
      "is_reply": true
    },
    {
      "sender": "Kerry",
      "user_id": "UCX3VGDJR",
      "message": "",
      "time": "10:10",
      "timestamp": "1685553036.853489",
      "is_reply": true
    },
    {
      "sender": "Kerry",
      "user_id": "UCX3VGDJR",
      "message": "each job has 90 files, each file has 239 pages",
      "time": "10:11",
      "timestamp": "1685553074.262189",
      "is_reply": true
    },
    {
      "sender": "shaunak",
      "user_id": "UCY6SA014",
      "message": "Yup",
      "time": "10:11",
      "timestamp": "1685553077.860069",
      "is_reply": true
    },
    {
      "sender": "shaunak",
      "user_id": "UCY6SA014",
      "message": "The logs also point to the same …",
      "time": "10:11",
      "timestamp": "1685553098.163729",
      "is_reply": true
    },
    {
      "sender": "Kerry",
      "user_id": "UCX3VGDJR",
      "message": "so flow run is clogged -- other interaction on the platform remains fine",
      "time": "10:11",
      "timestamp": "1685553118.046169",
      "is_reply": true
    },
    {
      "sender": "Rakesh",
      "user_id": "U01668DGQCE",
      "message": "This would clog digitization in converse app as well - but chat runs would be fine",
      "time": "10:12",
      "timestamp": "1685553148.046439",
      "is_reply": true
    },
    {
      "sender": "Siddhant",
      "user_id": "U02V2C0DFQD",
      "message": "yes, model-service-lite does not have much traffic",
      "time": "10:12",
      "timestamp": "1685553149.980959",
      "is_reply": true
    },
    {
      "sender": "Kerry",
      "user_id": "UCX3VGDJR",
      "message": "yeah mainly flow runs",
      "time": "10:12",
      "timestamp": "1685553162.892149",
      "is_reply": true
    },
    {
      "sender": "Rakesh",
      "user_id": "U01668DGQCE",
      "message": "and digitization job from chat app is triggered as higher priority job too - so it gets the first access competing with any build app flow runs.",
      "time": "10:13",
      "timestamp": "1685553202.725999",
      "is_reply": true
    },
    {
      "sender": "shaunak",
      "user_id": "UCY6SA014",
      "message": "https://instabase.slack.com/archives/C04PFH9DYF7/p1685552888101199",
      "time": "10:13",
      "timestamp": "1685553212.323709",
      "is_reply": true
    },
    {
      "sender": "shaunak",
      "user_id": "UCY6SA014",
      "message": "Fun times.",
      "time": "10:13",
      "timestamp": "1685553224.056829",
      "is_reply": true
    },
    {
      "sender": "Rakesh",
      "user_id": "U01668DGQCE",
      "message": "900*24 (24 tasks one for 10 pages each) = 21600 tasks just for digitization - so it all adds up well :slightly_smiling_face:",
      "time": "10:14",
      "timestamp": "1685553282.543629",
      "is_reply": true
    },
    {
      "sender": "Rakesh",
      "user_id": "U01668DGQCE",
      "message": "Actually we cannot upload 100 files in a project via frontend (50 is limit)",
      "time": "10:17",
      "timestamp": "1685553421.476779",
      "is_reply": true
    },
    {
      "sender": "Ashish",
      "user_id": "U3UJ09DJ6",
      "message": "Matt W has been around -- must have written a script! :grinning:",
      "time": "10:17",
      "timestamp": "1685553442.841579",
      "is_reply": true
    },
    {
      "sender": "Ashish",
      "user_id": "U3UJ09DJ6",
      "message": "there are no backend checks on # of files upload per project",
      "time": "10:17",
      "timestamp": "1685553453.948399",
      "is_reply": true
    },
    {
      "sender": "shaunak",
      "user_id": "UCY6SA014",
      "message": "The group algorithm that we had implemented for fairness — did it work as expected here?",
      "time": "10:18",
      "timestamp": "1685553531.341109",
      "is_reply": true
    },
    {
      "sender": "Kerry",
      "user_id": "UCX3VGDJR",
      "message": "@shaunak who aded that algorithm? cc @Anil",
      "time": "10:22",
      "timestamp": "1685553741.408609",
      "is_reply": true
    },
    {
      "sender": "Anil",
      "user_id": "U01BH8XBR55",
      "message": "```  \"MaxConcurrentTasks\": 224,\n  \"GroupConfigs\": {\n    \"default\": {\n      \"Request\": 0,\n      \"Limit\": 112,\n      \"Disabled\": false\n    },\n    \"interactive\": {\n      \"Request\": 0,\n      \"Limit\": 224,\n      \"Disabled\": false\n    }\n  },\n  \"RunningTasksPerGroup\": {\n    \"default\": 0,\n    \"interactive\": 223\n  },\n  \"RunningTasks\": {\n...```",
      "time": "10:28",
      "timestamp": "1685554084.800289",
      "is_reply": true
    },
    {
      "sender": "Anil",
      "user_id": "U01BH8XBR55",
      "message": "All the interactive jobs are running at priority 9.\nKerry’s job - f7106d06-3193-4051-8385-16cc5f5368c2 is at priority 5. So technically it will not make progress till the interactive jobs are done.",
      "time": "10:29",
      "timestamp": "1685554197.436779",
      "is_reply": true
    },
    {
      "sender": "Kerry",
      "user_id": "UCX3VGDJR",
      "message": "I see; my jobs are triggered from the frontend though",
      "time": "10:31",
      "timestamp": "1685554283.683929",
      "is_reply": true
    },
    {
      "sender": "Rakesh",
      "user_id": "U01668DGQCE",
      "message": "@Anil\nHow do we query the above view - is it the scheduler state ?",
      "time": "10:44",
      "timestamp": "1685555098.866869",
      "is_reply": true
    },
    {
      "sender": "Anil",
      "user_id": "U01BH8XBR55",
      "message": "yup https://aihub.instabase.com/api/v1/jobs/view_scheduler_state",
      "time": "10:46",
      "timestamp": "1685555211.610879",
      "is_reply": true
    },
    {
      "sender": "Rakesh",
      "user_id": "U01668DGQCE",
      "message": "Thanks  - I kept thinking I need admin privs for it.",
      "time": "10:49",
      "timestamp": "1685555374.369809",
      "is_reply": true
    },
    {
      "sender": "Ashish",
      "user_id": "U3UJ09DJ6",
      "message": "should this endpoint be protected from non-instabase users? :slightly_smiling_face:",
      "time": "10:52",
      "timestamp": "1685555546.464019",
      "is_reply": true
    },
    {
      "sender": "Anil",
      "user_id": "U01BH8XBR55",
      "message": "security by obscurity :stuck_out_tongue:",
      "time": "10:54",
      "timestamp": "1685555689.999729",
      "is_reply": true
    }
  ],
  "metadata": {
    "channel_id": "C0516UPPMT3",
    "channel_name": "aihub-feedback",
    "date_file": "2023-05-31.json",
    "message_count": 57,
    "start_time": "1685551731.931169",
    "end_time": "1685555689.999729",
    "is_thread": true
  }
}