{
  "id": "ch_C06FA6A23_2020-07-28_1595961364.008600_thread",
  "type": "channel",
  "channel_name": "discuss-engineering",
  "conversation_type": "thread",
  "participants": [
    "Eric Han",
    "Erick",
    "Jonathan Shih"
  ],
  "messages": [
    {
      "sender": "Jonathan Shih",
      "user_id": "UGJD45BCP",
      "message": "oh I see. @Erick I’m also adding the page number to the metadata information, so we will be able to use that instead",
      "time": "11:36",
      "timestamp": "1595961364.008600",
      "is_reply": false
    },
    {
      "sender": "Erick",
      "user_id": "ULQK30Z7V",
      "message": "Gotcha. In that case, there will probably be a decent number of changes required for image viewing logic in different places. Agreed this is a good change to make though! I think right now if you open up a single-page record in refiner 5, it'll show you the whole document no matter what.",
      "time": "11:38",
      "timestamp": "1595961508.008700",
      "is_reply": true
    },
    {
      "sender": "Erick",
      "user_id": "ULQK30Z7V",
      "message": "Are you changing the global `layout` property as well to reflect the first page of the record instead of the first page of the doc?",
      "time": "11:39",
      "timestamp": "1595961588.008900",
      "is_reply": true
    },
    {
      "sender": "Jonathan Shih",
      "user_id": "UGJD45BCP",
      "message": "Yeah haha that’s the same behavior we’re seeing in human review where each record will actually show all pages of the document. I’ll gate this on a flag for now then, so we can slowly transition over.",
      "time": "11:39",
      "timestamp": "1595961595.009100",
      "is_reply": true
    },
    {
      "sender": "Erick",
      "user_id": "ULQK30Z7V",
      "message": "Cool cool. August release is the time for breaking changes though, so it's probably a good one to get in now if we can test it enough",
      "time": "11:40",
      "timestamp": "1595961624.009300",
      "is_reply": true
    },
    {
      "sender": "Erick",
      "user_id": "ULQK30Z7V",
      "message": "Hopefully no customer UDFs rely on the complete `metadata_list`",
      "time": "11:40",
      "timestamp": "1595961634.009500",
      "is_reply": true
    },
    {
      "sender": "Jonathan Shih",
      "user_id": "UGJD45BCP",
      "message": "oh is that what the global layout property did? xD I thought that was just because we had that property first and then realized that we needed a list lol",
      "time": "11:40",
      "timestamp": "1595961639.009700",
      "is_reply": true
    },
    {
      "sender": "Jonathan Shih",
      "user_id": "UGJD45BCP",
      "message": "haha cool. but yeah should the global layout property reflect the first page in the record?",
      "time": "11:41",
      "timestamp": "1595961680.009900",
      "is_reply": true
    },
    {
      "sender": "Jonathan Shih",
      "user_id": "UGJD45BCP",
      "message": "I can make sure I’m making that change too",
      "time": "11:41",
      "timestamp": "1595961691.010100",
      "is_reply": true
    },
    {
      "sender": "Erick",
      "user_id": "ULQK30Z7V",
      "message": "Haha yeah I figured the same thing as you. Pretty sure it's been just the first page though (even for records that don't contain first page)",
      "time": "11:41",
      "timestamp": "1595961692.010300",
      "is_reply": true
    },
    {
      "sender": "Jonathan Shih",
      "user_id": "UGJD45BCP",
      "message": "hahaha right sounds good",
      "time": "11:41",
      "timestamp": "1595961712.010500",
      "is_reply": true
    },
    {
      "sender": "Erick",
      "user_id": "ULQK30Z7V",
      "message": "Yeah I'm not sure it's used anywhere :man-shrugging:",
      "time": "11:41",
      "timestamp": "1595961713.010700",
      "is_reply": true
    },
    {
      "sender": "Erick",
      "user_id": "ULQK30Z7V",
      "message": "cc @Youssef or @yutaka to be on the lookout for if/when this breaks Refiner 5 :stuck_out_tongue:\n\nand I'll check if it might break the document api backend",
      "time": "11:43",
      "timestamp": "1595961803.010900",
      "is_reply": true
    },
    {
      "sender": "Jonathan Shih",
      "user_id": "UGJD45BCP",
      "message": "does this mean I don’t need to gate it? :wink:",
      "time": "11:44",
      "timestamp": "1595961884.011100",
      "is_reply": true
    },
    {
      "sender": "Eric Han",
      "user_id": "UKPHNU5QE",
      "message": "should we add a new item to ibdoc that’s layout-v2 or something? this way it won’t break existing solutions and we can inform app eng to update them appropriately",
      "time": "11:52",
      "timestamp": "1595962341.011400",
      "is_reply": true
    },
    {
      "sender": "Eric Han",
      "user_id": "UKPHNU5QE",
      "message": "on the front end we can handle both cases but use layout-v2 as the default, until we completely move off of layout in other solutions.",
      "time": "11:53",
      "timestamp": "1595962423.011600",
      "is_reply": true
    },
    {
      "sender": "Eric Han",
      "user_id": "UKPHNU5QE",
      "message": "or maybe we just need to ask app-eng and get an idea of if anyone uses the layout field",
      "time": "11:53",
      "timestamp": "1595962436.011900",
      "is_reply": true
    },
    {
      "sender": "Jonathan Shih",
      "user_id": "UGJD45BCP",
      "message": "yeah that might be the safest way to go for now. it just really bothers me when i open an ibocr and every record has the same 200 metadata infos for each record xD",
      "time": "11:53",
      "timestamp": "1595962437.012100",
      "is_reply": true
    },
    {
      "sender": "Erick",
      "user_id": "ULQK30Z7V",
      "message": "Doc api won't be affected actually as long as the layout in s1_process_files is the page itself. I oopsied before -- it's not the first page of the doc -- it's the first page of the record in top-level `layout`",
      "time": "11:55",
      "timestamp": "1595962510.012300",
      "is_reply": true
    },
    {
      "sender": "Jonathan Shih",
      "user_id": "UGJD45BCP",
      "message": "as in the top level layout in s1_process_files is the page itself?",
      "time": "11:57",
      "timestamp": "1595962621.012500",
      "is_reply": true
    },
    {
      "sender": "Jonathan Shih",
      "user_id": "UGJD45BCP",
      "message": "Just to sum this up, it turns out that the metadata list was being populated correctly (though page number is not in the dict representation of a record). The bug we were seeing had to do with how we handle metadata lists in map records, so it’s a completely separate issue.",
      "time": "19:26",
      "timestamp": "1595989607.025500",
      "is_reply": true
    }
  ],
  "metadata": {
    "channel_id": "C06FA6A23",
    "channel_name": "discuss-engineering",
    "date_file": "2020-07-28.json",
    "message_count": 21,
    "start_time": "1595961364.008600",
    "end_time": "1595989607.025500",
    "is_thread": true
  }
}