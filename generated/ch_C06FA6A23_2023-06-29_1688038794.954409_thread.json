{
  "id": "ch_C06FA6A23_2023-06-29_1688038794.954409_thread",
  "type": "channel",
  "channel_name": "discuss-engineering",
  "conversation_type": "thread",
  "participants": [
    "Anil",
    "Gauti"
  ],
  "messages": [
    {
      "sender": "Gauti",
      "user_id": "U01JA04CX1B",
      "message": "Building `Celery-app-tasks` and `Celery-webdriver-tasks` locally are failing on the latest code with scipy import error. I have attached the error message in the thread. This error has got introduced with this PR (https://github.com/instabase/instabase/pull/43054). @Anil can we revert this PR? I have already reverted this commit locally and with that, it fixed the issue.\nCC: @Balaram @Vasu",
      "time": "04:39",
      "timestamp": "1688038794.954409",
      "is_reply": false
    },
    {
      "sender": "Gauti",
      "user_id": "U01JA04CX1B",
      "message": "```Unable to load celery application.\nWhile trying to load the module instabase.registry.tasks the following error occurred:\nTraceback (most recent call last):\n  File \"/home/ibuser/.local/lib/python3.9/site-packages/celery/app/utils.py\", line 384, in find_app\n    sym = symbol_by_name(app, imp=imp)\n  File \"/home/ibuser/.local/lib/python3.9/site-packages/kombu/utils/imports.py\", line 61, in symbol_by_name\n    return getattr(module, cls_name) if cls_name else module\nAttributeError: module 'instabase.registry' has no attribute 'tasks'\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/ibuser/.local/lib/python3.9/site-packages/celery/bin/celery.py\", line 53, in convert\n    return find_app(value)\n  File \"/home/ibuser/.local/lib/python3.9/site-packages/celery/app/utils.py\", line 387, in find_app\n    sym = imp(app)\n  File \"/home/ibuser/.local/lib/python3.9/site-packages/celery/utils/imports.py\", line 100, in import_from_cwd\n    return imp(module, package=package)\n  File \"/opt/python-3.9.15/lib/python3.9/importlib/__init__.py\", line 127, in import_module\n    return _bootstrap._gcd_import(name[level:], package, level)\n  File \"<frozen importlib._bootstrap>\", line 1030, in _gcd_import\n  File \"<frozen importlib._bootstrap>\", line 1007, in _find_and_load\n  File \"<frozen importlib._bootstrap>\", line 986, in _find_and_load_unlocked\n  File \"<frozen importlib._bootstrap>\", line 680, in _load_unlocked\n  File \"<frozen importlib._bootstrap_external>\", line 850, in exec_module\n  File \"<frozen importlib._bootstrap>\", line 228, in _call_with_frames_removed\n  File \"/instabase/workers/celery-app-tasks/py/instabase/registry/tasks.py\", line 57, in <module>\n    import instabase.flow.v1.tasks  # noqa\n  File \"/instabase/workers/celery-app-tasks/py/instabase/flow/v1/tasks.py\", line 19, in <module>\n    from instabase.flow import (apply_classifier_lib, apply_refiner_lib,\n  File \"/instabase/workers/celery-app-tasks/py/instabase/flow/apply_classifier_lib.py\", line 16, in <module>\n    from instabase.flow.runnables import apply_classifier_fns\n  File \"/instabase/workers/celery-app-tasks/py/instabase/flow/runnables/apply_classifier_fns.py\", line 13, in <module>\n    from instabase.flow.runnables import classify_record_fns\n  File \"/instabase/workers/celery-app-tasks/py/instabase/flow/runnables/classify_record_fns.py\", line 21, in <module>\n    from instabase.model_utils.ibclassifier import IBClassifier\n  File \"/instabase/workers/celery-app-tasks/py/instabase/model_utils/ibclassifier.py\", line 10, in <module>\n    from instabase.model_utils.classifier_autotext import AutotextClassifier\n  File \"/instabase/workers/celery-app-tasks/py/instabase/model_utils/classifier_autotext.py\", line 15, in <module>\n    from instabase.model_utils.classifier_utils import get_training_dataset_as_text, ibocr_to_text, get_current_saved_thresholds, KEY_MIN_SIMILARITY_THRESHOLD\n  File \"/instabase/workers/celery-app-tasks/py/instabase/model_utils/classifier_utils.py\", line 17, in <module>\n    from skl2onnx import convert_sklearn  # type: ignore\n  File \"/home/ibuser/.local/lib/python3.9/site-packages/skl2onnx/__init__.py\", line 15, in <module>\n    from .convert import convert_sklearn, to_onnx, wrap_as_onnx_mixin  # noqa\n  File \"/home/ibuser/.local/lib/python3.9/site-packages/skl2onnx/convert.py\", line 8, in <module>\n    from ._parse import parse_sklearn_model\n  File \"/home/ibuser/.local/lib/python3.9/site-packages/skl2onnx/_parse.py\", line 42, in <module>\n    from ._supported_operators import (\n  File \"/home/ibuser/.local/lib/python3.9/site-packages/skl2onnx/_supported_operators.py\", line 163, in <module>\n    from sklearn.cross_decomposition import PLSRegression\n  File \"/home/ibuser/.local/lib/python3.9/site-packages/sklearn/cross_decomposition/__init__.py\", line 1, in <module>\n    from ._pls import PLSCanonical, PLSRegression, PLSSVD, CCA\n  File \"/home/ibuser/.local/lib/python3.9/site-packages/sklearn/cross_decomposition/_pls.py\", line 12, in <module>\n    from scipy.linalg import pinv2, svd\nImportError: cannot import name 'pinv2' from 'scipy.linalg' (/home/ibuser/.local/lib/python3.9/site-packages/scipy/linalg/__init__.py)\n\nmake: *** [run-docker] Error 2```",
      "time": "04:40",
      "timestamp": "1688038832.856719",
      "is_reply": true
    },
    {
      "sender": "Anil",
      "user_id": "U01BH8XBR55",
      "message": "sorry on it now",
      "time": "08:30",
      "timestamp": "1688052604.990499",
      "is_reply": true
    },
    {
      "sender": "Anil",
      "user_id": "U01BH8XBR55",
      "message": "just merged the revert",
      "time": "09:25",
      "timestamp": "1688055937.293789",
      "is_reply": true
    }
  ],
  "metadata": {
    "channel_id": "C06FA6A23",
    "channel_name": "discuss-engineering",
    "date_file": "2023-06-29.json",
    "message_count": 4,
    "start_time": "1688038794.954409",
    "end_time": "1688055937.293789",
    "is_thread": true
  }
}