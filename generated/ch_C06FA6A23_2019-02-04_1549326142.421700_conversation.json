{
  "id": "ch_C06FA6A23_2019-02-04_1549326142.421700_conversation",
  "type": "channel",
  "channel_name": "discuss-engineering",
  "conversation_type": "conversation",
  "participants": [
    "shaunak",
    "Ted"
  ],
  "messages": [
    {
      "sender": "Ted",
      "user_id": "UAEM2MEGJ",
      "message": "------\nNaive suggestion — I’m not sure if this is simple in our software / infra stack…\n\nCould we bake in some sort of serialized auto-batching in all variants of flow…\nAnd if that works, then add some sort of exponential (*EDIT I meant to say “iterative”) batch-size finder where we start with batch of N and measure performance.. then move to size 2N… etc etc until we start seeing degraded performance",
      "time": "16:22",
      "timestamp": "1549326142.421700",
      "is_reply": false
    },
    {
      "sender": "Ted",
      "user_id": "UAEM2MEGJ",
      "message": "There’s a decent amount of human labor being expended over at C1 right now just copying files around trying to find sets of `input/` folders that work..",
      "time": "16:23",
      "timestamp": "1549326212.423400",
      "is_reply": false
    },
    {
      "sender": "Ted",
      "user_id": "UAEM2MEGJ",
      "message": "And at the file counts which cause this to be necessary, that file copying takes a bit of time",
      "time": "16:23",
      "timestamp": "1549326231.424100",
      "is_reply": false
    },
    {
      "sender": "shaunak",
      "user_id": "UCY6SA014",
      "message": "batching already works with Flow V2.  We are planning to move all our software to Flow V2 eventually",
      "time": "16:24",
      "timestamp": "1549326248.424500",
      "is_reply": false
    },
    {
      "sender": "Ted",
      "user_id": "UAEM2MEGJ",
      "message": "Anant seemed to think Flow V2 was not a good idea here",
      "time": "16:24",
      "timestamp": "1549326270.425000",
      "is_reply": false
    },
    {
      "sender": "Ted",
      "user_id": "UAEM2MEGJ",
      "message": "I’m not sure why.",
      "time": "16:24",
      "timestamp": "1549326275.425200",
      "is_reply": false
    },
    {
      "sender": "Ted",
      "user_id": "UAEM2MEGJ",
      "message": "But :thumbsup: in terms of batching",
      "time": "16:24",
      "timestamp": "1549326295.426400",
      "is_reply": false
    },
    {
      "sender": "shaunak",
      "user_id": "UCY6SA014",
      "message": "I think that in Flow V2 there is no way to skip the process files",
      "time": "16:25",
      "timestamp": "1549326307.426900",
      "is_reply": false
    },
    {
      "sender": "Ted",
      "user_id": "UAEM2MEGJ",
      "message": "Ah.",
      "time": "16:25",
      "timestamp": "1549326312.427200",
      "is_reply": false
    },
    {
      "sender": "Ted",
      "user_id": "UAEM2MEGJ",
      "message": "yes, we need to skip it",
      "time": "16:25",
      "timestamp": "1549326319.427500",
      "is_reply": false
    },
    {
      "sender": "Ted",
      "user_id": "UAEM2MEGJ",
      "message": "cool cool",
      "time": "16:25",
      "timestamp": "1549326321.427800",
      "is_reply": false
    },
    {
      "sender": "shaunak",
      "user_id": "UCY6SA014",
      "message": "Once we have Apply Classifier as the step, this should work automatically!!",
      "time": "16:25",
      "timestamp": "1549326321.428000",
      "is_reply": false
    },
    {
      "sender": "shaunak",
      "user_id": "UCY6SA014",
      "message": "I just saw your PR, and I was super excited about it",
      "time": "16:25",
      "timestamp": "1549326336.428600",
      "is_reply": false
    },
    {
      "sender": "Ted",
      "user_id": "UAEM2MEGJ",
      "message": "It sounds like the existing dev plan takes care of this then",
      "time": "16:25",
      "timestamp": "1549326340.428800",
      "is_reply": false
    },
    {
      "sender": "Ted",
      "user_id": "UAEM2MEGJ",
      "message": "!",
      "time": "16:25",
      "timestamp": "1549326341.429000",
      "is_reply": false
    },
    {
      "sender": "Ted",
      "user_id": "UAEM2MEGJ",
      "message": "@shaunak it just runs classifier though… it doesn’t support forking/branching :slightly_smiling_face:",
      "time": "16:26",
      "timestamp": "1549326363.429300",
      "is_reply": false
    },
    {
      "sender": "Ted",
      "user_id": "UAEM2MEGJ",
      "message": "Going to add a Apply Cluster one next",
      "time": "16:26",
      "timestamp": "1549326385.430300",
      "is_reply": false
    },
    {
      "sender": "shaunak",
      "user_id": "UCY6SA014",
      "message": "Ah - need to understand more about this use-case",
      "time": "16:26",
      "timestamp": "1549326392.430500",
      "is_reply": false
    },
    {
      "sender": "shaunak",
      "user_id": "UCY6SA014",
      "message": "and how to integrate it",
      "time": "16:26",
      "timestamp": "1549326401.430900",
      "is_reply": false
    },
    {
      "sender": "Ted",
      "user_id": "UAEM2MEGJ",
      "message": "In their case, the desired output of the flow is literally just the document class",
      "time": "16:26",
      "timestamp": "1549326406.431300",
      "is_reply": false
    },
    {
      "sender": "Ted",
      "user_id": "UAEM2MEGJ",
      "message": "But the only way to get this information right now is to set up a metaflow and then steal some of its intermediate output",
      "time": "16:27",
      "timestamp": "1549326432.432200",
      "is_reply": false
    },
    {
      "sender": "shaunak",
      "user_id": "UCY6SA014",
      "message": "OK, got it.  Why do we need forking / branching then?  To read from various input directories?",
      "time": "16:27",
      "timestamp": "1549326435.432400",
      "is_reply": false
    },
    {
      "sender": "Ted",
      "user_id": "UAEM2MEGJ",
      "message": "So I’m just rearranging the code so that we can invoke classification as an explicit step",
      "time": "16:27",
      "timestamp": "1549326442.432600",
      "is_reply": false
    },
    {
      "sender": "Ted",
      "user_id": "UAEM2MEGJ",
      "message": "The forking/branching would be a nice logical follow-on, though, in which you basically added an option to the Apply Classifier step which was",
      "time": "16:27",
      "timestamp": "1549326470.433300",
      "is_reply": false
    },
    {
      "sender": "Ted",
      "user_id": "UAEM2MEGJ",
      "message": "“…. and then run the flow in this directory named the same thing as the predicted class label”",
      "time": "16:28",
      "timestamp": "1549326484.433800",
      "is_reply": false
    },
    {
      "sender": "Ted",
      "user_id": "UAEM2MEGJ",
      "message": "Once we have that, then metaflow is just a flow with an “Apply Classifier + Branch” step",
      "time": "16:28",
      "timestamp": "1549326498.434200",
      "is_reply": false
    },
    {
      "sender": "Ted",
      "user_id": "UAEM2MEGJ",
      "message": "(~ hand wavy… I realize metaflow also does a ton of other things)",
      "time": "16:28",
      "timestamp": "1549326515.434500",
      "is_reply": false
    },
    {
      "sender": "Ted",
      "user_id": "UAEM2MEGJ",
      "message": "Anyway.. thanks for the info re: batching! V2 everywhere will be awesome",
      "time": "16:28",
      "timestamp": "1549326538.435000",
      "is_reply": false
    },
    {
      "sender": "shaunak",
      "user_id": "UCY6SA014",
      "message": "yup yup, apply classifier is an implicit step today inside the metaflow V2 binary; based on the classifier we run the appropriate flow.",
      "time": "16:31",
      "timestamp": "1549326662.436200",
      "is_reply": false
    }
  ],
  "metadata": {
    "channel_id": "C06FA6A23",
    "channel_name": "discuss-engineering",
    "date_file": "2019-02-04.json",
    "message_count": 29,
    "start_time": "1549326142.421700",
    "end_time": "1549326662.436200",
    "is_thread": false
  }
}