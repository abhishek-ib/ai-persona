{
  "id": "ch_C06FA6A23_2021-09-14_1631642981.026700_thread",
  "type": "channel",
  "channel_name": "discuss-engineering",
  "conversation_type": "thread",
  "participants": [
    "Heymian",
    "Yash Aggarwal",
    "Erick"
  ],
  "messages": [
    {
      "sender": "Yash Aggarwal",
      "user_id": "U016JSBAD4K",
      "message": "Hi team,\n\nDoes anyone know how to access the API’s from apps-server directly. I can to make requests to API’s in api-server-apps directly (postman/local-scripts), but when trying to make requests to API’s like `review_batch/<path>/load_records`, I am getting an empty html page.",
      "time": "11:09",
      "timestamp": "1631642981.026700",
      "is_reply": false
    },
    {
      "sender": "Erick",
      "user_id": "ULQK30Z7V",
      "message": "What’s the full URL you’re trying to access? I think it should start with something like `/apps/ocr/…` instead of `review_batch`",
      "time": "11:30",
      "timestamp": "1631644248.026800",
      "is_reply": true
    },
    {
      "sender": "Yash Aggarwal",
      "user_id": "U016JSBAD4K",
      "message": "This is the complete url I am trying with: `https://localhost/apps/ocr/review-batch/yash_aggarwal/my-repo/fs/Instabase Drive/refiner-load-time/out/s2_map_records/load_records?fields=layouts&limit=1`",
      "time": "11:31",
      "timestamp": "1631644318.027000",
      "is_reply": true
    },
    {
      "sender": "Erick",
      "user_id": "ULQK30Z7V",
      "message": "Hm that URL is working for me. Are you running apps-server,  server-nginx, file-tservice?",
      "time": "11:33",
      "timestamp": "1631644387.027200",
      "is_reply": true
    },
    {
      "sender": "Erick",
      "user_id": "ULQK30Z7V",
      "message": "What HTTP code are you getting back from your request?",
      "time": "11:33",
      "timestamp": "1631644415.027700",
      "is_reply": true
    },
    {
      "sender": "Yash Aggarwal",
      "user_id": "U016JSBAD4K",
      "message": ":lolcry:",
      "time": "11:34",
      "timestamp": "1631644454.027900",
      "is_reply": true
    },
    {
      "sender": "Yash Aggarwal",
      "user_id": "U016JSBAD4K",
      "message": "I am getting an html page with no content:\n```<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n\t<meta charset=\"UTF-8\" />\n\t<meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n\t<link rel=\"icon\" type=\"image/png\" href=\"/static/assets/images/favicon.png\" />\n\t<title>\n\t\tInstabase\n\t</title>\n\t<script src=\"/static/output/ib_global_styles.bundle.js?v=1631177284.784953\"></script>\n\t<script src=\"/static/output/ib_vendor_styles.bundle.js?v=1631177284.784953\"></script>\n\n</head>\n\n<body>\n\t<div class=\"layoutv2__container\">\n\t\t<div id=\"launcher-container\"></div>\n\t\t<div class=\"launcher-page-container\">\n\t\t\t<!-- content start -->\n\n\t\t\t<div id=\"wrapper\">\n\t\t\t\t<div id=\"content-wrapper\">\n\t\t\t\t\t<div id=\"root\"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\n\t\t\t<!-- content end -->\n\t\t</div>\n\t</div>\n\t<!-- Context -->\n\t<script>\n\t\twindow.WEBPACK_V2 = true;\n      window.context = {\"globals\": {\"detailed_ui_error_boundaries\": true, \"disable_signup\": false, \"enable_client_side_encryption\": true, \"enable_groups\": true, \"enable_search\": true, \"is_onprem\": false, \"reload\": false}, \"launcher\": {\"is_guest\": true, \"logged_in_user\": \"guest\", \"profile_photo_url\": \"/static/assets/images/profile-default.png\"}, \"next\": \"/apps/ocr/review-batch/yash_aggarwal/my-repo/fs/Instabase%20Drive/refiner-load-time/out/s2_map_records/load_records?fields=layouts\\u0026limit=1\", \"viewer_context\": {\"can_create\": {\"orgs\": false}, \"can_see\": {\"beta_apps\": false, \"flow_admin\": false}, \"email\": null}};\n\t</script>\n\t<!-- Third-party JavaScript Files -->\n\t<script src=\"/static/output/ib_vendor_scripts.bundle.js?v=1631177284.784953\"></script>\n\t<!-- IB Vendor JavaScript Files -->\n\t<!-- <script src=\"/static/output/ibvendors.bundle.js?v=1631177284.784953\"></script> -->\n\t<!-- IB Core/App JavaScript Files -->\n\n\n\t<script src=\"/static/output/ibcoreui_account.bundle.js?v=1631177284.784953\"></script>\n\n\n\t<script>\n\t\t(function (i, s, o, g, r, a, m) {\n        i[\"GoogleAnalyticsObject\"] = r;\n        (i[r] =\n          i[r] ||\n          function () {\n            (i[r].q = i[r].q || []).push(arguments);\n          }),\n          (i[r].l = 1 * new Date());\n        (a = s.createElement(o)), (m = s.getElementsByTagName(o)[0]);\n        a.async = 1;\n        a.src = g;\n        m.parentNode.insertBefore(a, m);\n      })(\n        window,\n        document,\n        \"script\",\n        \"//www.google-analytics.com/analytics.js\",\n        \"ga\"\n      );\n\n      ga(\"create\", \"UA-65844348-3\", \"auto\");\n      ga(\"send\", \"pageview\");\n\t</script>\n\n\n\t<script type=\"text/javascript\">\n\t\tconst IB_CSRF_TOKEN = \"\";\n      window.IB_CSRF_TOKEN = IB_CSRF_TOKEN;\n      $.ajaxSetup({\n        beforeSend: function (xhr, settings) {\n          if (\n            !/^(GET|HEAD|OPTIONS|TRACE)$/i.test(settings.type) &&\n            !this.crossDomain\n          ) {\n            xhr.setRequestHeader(\"X-CSRFToken\", IB_CSRF_TOKEN);\n          }\n        },\n      });\n\t</script>\n</body>\n\n</html>```",
      "time": "11:34",
      "timestamp": "1631644464.028100",
      "is_reply": true
    },
    {
      "sender": "Erick",
      "user_id": "ULQK30Z7V",
      "message": "webapp maybe?",
      "time": "11:34",
      "timestamp": "1631644483.028300",
      "is_reply": true
    },
    {
      "sender": "Yash Aggarwal",
      "user_id": "U016JSBAD4K",
      "message": "This api is working file if I open ocr app :disappointed:\n\nI am using bearer token for authorization, is that the correct approach?",
      "time": "11:35",
      "timestamp": "1631644532.028500",
      "is_reply": true
    },
    {
      "sender": "Erick",
      "user_id": "ULQK30Z7V",
      "message": "This seems like nginx might be routing something strangely. What do your logs in server-nginx look like?",
      "time": "11:35",
      "timestamp": "1631644536.028700",
      "is_reply": true
    },
    {
      "sender": "Erick",
      "user_id": "ULQK30Z7V",
      "message": "Ohh",
      "time": "11:35",
      "timestamp": "1631644537.028900",
      "is_reply": true
    },
    {
      "sender": "Erick",
      "user_id": "ULQK30Z7V",
      "message": "What happens if you go to that URL in your browser?",
      "time": "11:35",
      "timestamp": "1631644556.029100",
      "is_reply": true
    },
    {
      "sender": "Erick",
      "user_id": "ULQK30Z7V",
      "message": "Using cookie instead of bearer token",
      "time": "11:36",
      "timestamp": "1631644562.029300",
      "is_reply": true
    },
    {
      "sender": "Yash Aggarwal",
      "user_id": "U016JSBAD4K",
      "message": "Its working fine :sweat_smile: in browser. I should’ve tried this earlier",
      "time": "11:37",
      "timestamp": "1631644623.029500",
      "is_reply": true
    },
    {
      "sender": "Yash Aggarwal",
      "user_id": "U016JSBAD4K",
      "message": "Should I create a new token?",
      "time": "11:37",
      "timestamp": "1631644636.029700",
      "is_reply": true
    },
    {
      "sender": "Erick",
      "user_id": "ULQK30Z7V",
      "message": "Some of the apps-server apis might not support bearer token auth also. I can check after my interview and meeting",
      "time": "11:37",
      "timestamp": "1631644668.030000",
      "is_reply": true
    },
    {
      "sender": "Yash Aggarwal",
      "user_id": "U016JSBAD4K",
      "message": "Got it. Thanks for the help, I can continue my testing :dancing-penguin:. I’ll use cookies for authentication for this API.\n> Some of the apps-server apis might not support bearer token auth also\nI think this could be the case. It didn’t work on @Rahul Rawal’s system either.",
      "time": "11:41",
      "timestamp": "1631644899.030200",
      "is_reply": true
    },
    {
      "sender": "Erick",
      "user_id": "ULQK30Z7V",
      "message": "Awesome",
      "time": "11:41",
      "timestamp": "1631644912.030400",
      "is_reply": true
    },
    {
      "sender": "Heymian",
      "user_id": "UADQ9V8PK",
      "message": "apps-server and webapp are internal routes for serving our webpages, they’re not mean to be public APIs, which is why you use a cookie to call them. api-server-apps and api-server are our public APIs and you use oauth2 tokens to call them.",
      "time": "13:14",
      "timestamp": "1631650451.031000",
      "is_reply": true
    },
    {
      "sender": "Yash Aggarwal",
      "user_id": "U016JSBAD4K",
      "message": "Got it. Thanks!",
      "time": "13:14",
      "timestamp": "1631650487.031300",
      "is_reply": true
    }
  ],
  "metadata": {
    "channel_id": "C06FA6A23",
    "channel_name": "discuss-engineering",
    "date_file": "2021-09-14.json",
    "message_count": 20,
    "start_time": "1631642981.026700",
    "end_time": "1631650487.031300",
    "is_thread": true
  }
}