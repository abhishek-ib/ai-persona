{
  "id": "ch_C05L87V014J_2024-10-23_1729696983.585919_thread",
  "type": "channel",
  "channel_name": "ask-crafting",
  "conversation_type": "thread",
  "participants": [
    "sean.donohoe",
    "Udit"
  ],
  "messages": [
    {
      "sender": "Udit",
      "user_id": "U03M519DVKR",
      "message": "What steps do I take if my sandbox is running correctly but it is not getting any of the local changes I make on webpack",
      "time": "08:23",
      "timestamp": "1729696983.585919",
      "is_reply": false
    },
    {
      "sender": "Udit",
      "user_id": "U03M519DVKR",
      "message": "tried running `workspace service enable webpack` but it ended up breaking the sandbox more so it wouldn't load",
      "time": "08:23",
      "timestamp": "1729697037.303259",
      "is_reply": true
    },
    {
      "sender": "sean.donohoe",
      "user_id": "U04JYSDMV63",
      "message": "Do you have anything running with ppy in your sandbox? Also what are the errors you see when trying to enable?",
      "time": "08:25",
      "timestamp": "1729697156.385929",
      "is_reply": true
    },
    {
      "sender": "Udit",
      "user_id": "U03M519DVKR",
      "message": "nothing running with ppy. This is the output after the command above:\n\n```owner@dev:~$ workspace service enable webpack\n2024-10-23T15:27:14Z    INFO    Ensuring enabled service webpack is configured and running\n2024-10-23T15:27:14Z    INFO    Ensuring disabled service apps-server is stopped\n2024-10-23T15:27:14Z    INFO    Ensuring disabled service webapp is stopped\n2024-10-23T15:27:14Z    INFO    Ensuring disabled service api-server is stopped\n2024-10-23T15:27:15Z    INFO    Creating self-signed certificate\n2024-10-23T15:27:15Z    INFO    Installing node and node modules\nyarn install v1.22.22\n[1/5] Resolving packages...\nsuccess Already up-to-date.\nDone in 0.45s.\n2024-10-23T15:27:16Z    INFO    Writing webserver/shared/src/js/webpacked/.ib-dev.json\n2024-10-23T15:27:17Z    INFO    Service apps-server turn down complete!\n2024-10-23T15:27:17Z    INFO    Pulling 549230430157.dkr.ecr.us-east-2.amazonaws.com/instabase-dev/server-nginx:sean.donohoe-crafting-aihub-24.10.23-1c3ad465c35271344b6f2658988000b897cbbddf (http://549230430157.dkr.ecr.us-east-2.amazonaws.com/instabase-dev/server-nginx:sean.donohoe-crafting-aihub-24.10.23-1c3ad465c35271344b6f2658988000b897cbbddf)\nsean.donohoe-crafting-aihub-24.10.23-1c3ad465c35271344b6f2658988000b897cbbddf: Pulling from instabase-dev/server-nginx\nDigest: sha256:4e4d46ee937b6f97b174843cbdb55d43e8102a94fff0d5784fc0a1103425b754\nStatus: Image is up to date for 549230430157.dkr.ecr.us-east-2.amazonaws.com/instabase-dev/server-nginx:sean.donohoe-crafting-aihub-24.10.23-1c3ad465c35271344b6f2658988000b897cbbddf (http://549230430157.dkr.ecr.us-east-2.amazonaws.com/instabase-dev/server-nginx:sean.donohoe-crafting-aihub-24.10.23-1c3ad465c35271344b6f2658988000b897cbbddf)\n549230430157.dkr.ecr.us-east-2.amazonaws.com/instabase-dev/server-nginx:sean.donohoe-crafting-aihub-24.10.23-1c3ad465c35271344b6f2658988000b897cbbddf (http://549230430157.dkr.ecr.us-east-2.amazonaws.com/instabase-dev/server-nginx:sean.donohoe-crafting-aihub-24.10.23-1c3ad465c35271344b6f2658988000b897cbbddf)\n2024-10-23T15:27:17Z    INFO    Finished pulling 549230430157.dkr.ecr.us-east-2.amazonaws.com/instabase-dev/server-nginx:sean.donohoe-crafting-aihub-24.10.23-1c3ad465c35271344b6f2658988000b897cbbddf (http://549230430157.dkr.ecr.us-east-2.amazonaws.com/instabase-dev/server-nginx:sean.donohoe-crafting-aihub-24.10.23-1c3ad465c35271344b6f2658988000b897cbbddf)\n2024-10-23T15:27:19Z    INFO    Service api-server turn down complete!\n2024-10-23T15:27:19Z    INFO    Service webapp turn down complete!\n2024-10-23T15:27:25Z    INFO    Service webpack turn up complete!```",
      "time": "08:27",
      "timestamp": "1729697273.323149",
      "is_reply": true
    },
    {
      "sender": "Udit",
      "user_id": "U03M519DVKR",
      "message": "seems like the other services all got turned down?",
      "time": "08:28",
      "timestamp": "1729697287.690559",
      "is_reply": true
    },
    {
      "sender": "sean.donohoe",
      "user_id": "U04JYSDMV63",
      "message": "yeah you only have webpack enabled in your environment (controlled via the environment variable `WEBPACK_ENABLED=1` )",
      "time": "08:29",
      "timestamp": "1729697345.687229",
      "is_reply": true
    },
    {
      "sender": "Udit",
      "user_id": "U03M519DVKR",
      "message": "so should i run workspace setup in the terminal again? How do I end up in the correct state",
      "time": "08:30",
      "timestamp": "1729697404.565649",
      "is_reply": true
    },
    {
      "sender": "Udit",
      "user_id": "U03M519DVKR",
      "message": "essentially, felt like for a few months the frontend template i was using for crafting was working really well on a day to day basis but now after switching to ib-dev since frontend is outdated, been having trouble getting the sandbox working as I'd like where i just need my frontend updates to sync and closing, restarting, and resuming the sandbox not messing with that",
      "time": "08:32",
      "timestamp": "1729697538.414949",
      "is_reply": true
    },
    {
      "sender": "sean.donohoe",
      "user_id": "U04JYSDMV63",
      "message": "gotcha gotcha -- if you want to put your sandbox into the same configuration as the frontend template, I'd run the following (bit faster than running each `workspace service enable ...` command)\n```% cs sandbox update -D 'dev/env[WEBAPP_LITE_ENABLED]=1' -D 'dev/env[WEBAPP_ENABLED]=0' -D 'dev/env[APPS_SERVER_LITE_ENABLED]=1' -D 'dev/env[APPS_SERVER_ENABLED]=0' -D 'dev/env[API_SERVER_LITE_ENABLED]=0' -D 'dev/env[API_SERVER_ENABLED]=0' -D 'dev/env[WEBPACK_ENABLED]=1'\n\n% workspace setup```",
      "time": "08:33",
      "timestamp": "1729697628.346429",
      "is_reply": true
    },
    {
      "sender": "sean.donohoe",
      "user_id": "U04JYSDMV63",
      "message": "the primary difference between the frontend and ibdev templates are that the frontend template enables webapp/apps-server in \"lite\" mode by default, which pulls those images using the URLs deployed to crafting-aihub rather than building from your branch",
      "time": "08:34",
      "timestamp": "1729697688.060239",
      "is_reply": true
    },
    {
      "sender": "Udit",
      "user_id": "U03M519DVKR",
      "message": "ouh, will try this. It seems promising!\n\nDoes me running `workspace service enable ...` for 1 service always turn the other ones off?",
      "time": "08:35",
      "timestamp": "1729697716.972499",
      "is_reply": true
    },
    {
      "sender": "sean.donohoe",
      "user_id": "U04JYSDMV63",
      "message": "no, it's just very heavy handed so \"enabling\" is really a \"set the corresponding environment variable `<SERVICE>_ENABLED=1` and rebuild and restart each of the daemons\"",
      "time": "08:36",
      "timestamp": "1729697793.420469",
      "is_reply": true
    },
    {
      "sender": "sean.donohoe",
      "user_id": "U04JYSDMV63",
      "message": "it's quite annoying and isn't something we need anymore, but was written that way way back when we were first exploring crafting to help mitigate some frequent errors that have since been resolved",
      "time": "08:37",
      "timestamp": "1729697836.002059",
      "is_reply": true
    },
    {
      "sender": "Udit",
      "user_id": "U03M519DVKR",
      "message": "makes sense",
      "time": "08:37",
      "timestamp": "1729697863.800649",
      "is_reply": true
    },
    {
      "sender": "Udit",
      "user_id": "U03M519DVKR",
      "message": "after running the commands you sent above, it seems like webapp, apps server, and webpack are running, but nginx and api-server are not so the sandbox does not work still",
      "time": "08:38",
      "timestamp": "1729697891.835509",
      "is_reply": true
    },
    {
      "sender": "Udit",
      "user_id": "U03M519DVKR",
      "message": "and i see those were set to 0 while webapp, apps-server, and webpack are set to 1",
      "time": "08:39",
      "timestamp": "1729697992.453909",
      "is_reply": true
    },
    {
      "sender": "sean.donohoe",
      "user_id": "U04JYSDMV63",
      "message": "do you need api-server? and \"webpack\" is really nginx + webpack",
      "time": "08:40",
      "timestamp": "1729698011.723939",
      "is_reply": true
    },
    {
      "sender": "Udit",
      "user_id": "U03M519DVKR",
      "message": "hm, i dont need api-server as something i edit locally, but it should still be running for aihub to work",
      "time": "08:41",
      "timestamp": "1729698082.211709",
      "is_reply": true
    },
    {
      "sender": "sean.donohoe",
      "user_id": "U04JYSDMV63",
      "message": "right but you're running these with interception so they'll just use the api-server instances deployed to crafting-aihub, yeah?",
      "time": "08:42",
      "timestamp": "1729698127.062619",
      "is_reply": true
    },
    {
      "sender": "Udit",
      "user_id": "U03M519DVKR",
      "message": "i think so? In the past anytime my sandbox has worked properly though, it would show the 5 main services as running",
      "time": "08:44",
      "timestamp": "1729698264.517569",
      "is_reply": true
    },
    {
      "sender": "Udit",
      "user_id": "U03M519DVKR",
      "message": "maybe the interception is gone?",
      "time": "08:44",
      "timestamp": "1729698299.824089",
      "is_reply": true
    },
    {
      "sender": "sean.donohoe",
      "user_id": "U04JYSDMV63",
      "message": "yeah iirc the frontend template had api-server enabled by default because someone who worked on the service regularly requested it be enabled, but you should only ever have to run services you're changing with the rest running in crafting-aihub",
      "time": "08:45",
      "timestamp": "1729698331.899969",
      "is_reply": true
    },
    {
      "sender": "sean.donohoe",
      "user_id": "U04JYSDMV63",
      "message": "I'll take a peek at your sandbox :slightly_smiling_face:",
      "time": "08:45",
      "timestamp": "1729698336.825049",
      "is_reply": true
    },
    {
      "sender": "Udit",
      "user_id": "U03M519DVKR",
      "message": "thank you",
      "time": "08:46",
      "timestamp": "1729698372.526799",
      "is_reply": true
    },
    {
      "sender": "sean.donohoe",
      "user_id": "U04JYSDMV63",
      "message": "ah kk so I'm actively looking into what changes are contributing to this behavior, but you're experiencing the same failures as https://instabase.slack.com/archives/C05L87V014J/p1729535824964379?thread_ts=1729529491.208329&cid=C05L87V014J\n\nhttps://instabase.sandboxes.site/logviewx/instabase/udit-dev/dev/daemon/nginx%40instabase",
      "time": "08:47",
      "timestamp": "1729698463.941369",
      "is_reply": true
    },
    {
      "sender": "sean.donohoe",
      "user_id": "U04JYSDMV63",
      "message": "updated and restarting your services now",
      "time": "08:48",
      "timestamp": "1729698537.058399",
      "is_reply": true
    },
    {
      "sender": "sean.donohoe",
      "user_id": "U04JYSDMV63",
      "message": "should be up now :slightly_smiling_face:",
      "time": "08:49",
      "timestamp": "1729698588.823269",
      "is_reply": true
    },
    {
      "sender": "Udit",
      "user_id": "U03M519DVKR",
      "message": "yah! In the future though I'll stick with those 2 commands you sent above when I run into some issue",
      "time": "08:52",
      "timestamp": "1729698721.927029",
      "is_reply": true
    },
    {
      "sender": "sean.donohoe",
      "user_id": "U04JYSDMV63",
      "message": "yep for sure -- we've been very tight on developer availability for the past several months so idk when we can expect improvements to `workspace`, but this is a priority item I have ticketed for improvements",
      "time": "08:53",
      "timestamp": "1729698787.147199",
      "is_reply": true
    }
  ],
  "metadata": {
    "channel_id": "C05L87V014J",
    "channel_name": "ask-crafting",
    "date_file": "2024-10-23.json",
    "message_count": 29,
    "start_time": "1729696983.585919",
    "end_time": "1729698787.147199",
    "is_thread": true
  }
}