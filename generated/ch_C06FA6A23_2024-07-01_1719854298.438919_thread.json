{
  "id": "ch_C06FA6A23_2024-07-01_1719854298.438919_thread",
  "type": "channel",
  "channel_name": "discuss-engineering",
  "conversation_type": "thread",
  "participants": [
    "Cody Boggs",
    "jayasooryan",
    "Aaron Tami",
    "Sunny Khatri",
    "sean.donohoe"
  ],
  "messages": [
    {
      "sender": "Sunny Khatri",
      "user_id": "U06KR4QB6E5",
      "message": "Hi, new sandbox deploy seems to be failing with this error. Could someone help have a look. Thanks ! https://jenkins.instabase.com/job/SAAS-AWS/job/saas-pipelines/job/aws-landing-zone-provisioner/15990/console",
      "time": "10:18",
      "timestamp": "1719854298.438919",
      "is_reply": false
    },
    {
      "sender": "jayasooryan",
      "user_id": "U0162F348KB",
      "message": "Related thread: https://instabase.slack.com/archives/C01N7DV1137/p1718982536546839.\nSetting this param in advanced args fixed it for me recently.\n\n```{\n  \"ENABLE_WAF\": false\n} ```",
      "time": "10:28",
      "timestamp": "1719854896.417369",
      "is_reply": true
    },
    {
      "sender": "Sunny Khatri",
      "user_id": "U06KR4QB6E5",
      "message": "Thanks. Could you tell me where to set this advanced args, not that familiar. Sandbox settings isn't showing me anything. Or it has to be set during sandbox creation.",
      "time": "10:32",
      "timestamp": "1719855176.936319",
      "is_reply": true
    },
    {
      "sender": "Sunny Khatri",
      "user_id": "U06KR4QB6E5",
      "message": "Looks like I can use update option. Let me try that.",
      "time": "10:33",
      "timestamp": "1719855226.363249",
      "is_reply": true
    },
    {
      "sender": "Sunny Khatri",
      "user_id": "U06KR4QB6E5",
      "message": "",
      "time": "10:34",
      "timestamp": "1719855299.033299",
      "is_reply": true
    },
    {
      "sender": "jayasooryan",
      "user_id": "U0162F348KB",
      "message": "I have added this under the advanced -> advanced args while creating the sandbox. Not sure about the update option. Maybe delete and start fresh?",
      "time": "10:37",
      "timestamp": "1719855433.482469",
      "is_reply": true
    },
    {
      "sender": "Sunny Khatri",
      "user_id": "U06KR4QB6E5",
      "message": "Got it. Didn't noticed Advanced args below had to scroll.",
      "time": "10:38",
      "timestamp": "1719855497.235539",
      "is_reply": true
    },
    {
      "sender": "Sunny Khatri",
      "user_id": "U06KR4QB6E5",
      "message": "Don't see that error, but hitting a new one now. Wondering if someone have idea about this ?\n```11:19:05  ------\n11:19:05  ERROR: failed to solve: failed to push 549230430157.dkr.ecr.us-east-2.amazonaws.com/instabase-dev/alertmanager:sunny.khatri-sunny-24.07.01-4f3f6ea66d (http://549230430157.dkr.ecr.us-east-2.amazonaws.com/instabase-dev/alertmanager:sunny.khatri-sunny-24.07.01-4f3f6ea66d): failed commit on ref \"manifest-sha256:2857a0a5aedb5f329e86197f413fa71aa1ec72500a14df311b90b05c0f39202e\": unexpected status from PUT request to https://549230430157.dkr.ecr.us-east-2.amazonaws.com/v2/instabase-dev/alertmanager/manifests/sunny.khatri-sunny-24.07.01-4f3f6ea66d: 403 Forbidden\n11:19:05  make: *** [Makefile:15: build-docker] Error 1```",
      "time": "12:29",
      "timestamp": "1719862183.949319",
      "is_reply": true
    },
    {
      "sender": "Sunny Khatri",
      "user_id": "U06KR4QB6E5",
      "message": "@sean.donohoe Would you have info about this ?",
      "time": "12:37",
      "timestamp": "1719862631.809599",
      "is_reply": true
    },
    {
      "sender": "sean.donohoe",
      "user_id": "U04JYSDMV63",
      "message": "looks like it could be the too many tags error again <!subteam^S038TM462UX> / @Aaron Tami",
      "time": "12:38",
      "timestamp": "1719862698.790809",
      "is_reply": true
    },
    {
      "sender": "Cody Boggs",
      "user_id": "U037PKN4USZ",
      "message": ":eyes:\nI didn't have much luck getting my hack script to be 'smarter', will run manually if needed",
      "time": "12:39",
      "timestamp": "1719862767.024319",
      "is_reply": true
    },
    {
      "sender": "sean.donohoe",
      "user_id": "U04JYSDMV63",
      "message": "@Cody Boggs I'm happy to run it as well -- do we have that stored in the repo?",
      "time": "12:40",
      "timestamp": "1719862834.966599",
      "is_reply": true
    },
    {
      "sender": "Cody Boggs",
      "user_id": "U037PKN4USZ",
      "message": "No, I was gonna add it to the releng scripts once I had it doing something slightly less nuclear than now, but then... didn't. lol\n\nI'll run it for now and then push a PR in a minute",
      "time": "12:48",
      "timestamp": "1719863308.929299",
      "is_reply": true
    },
    {
      "sender": "Sunny Khatri",
      "user_id": "U06KR4QB6E5",
      "message": "Thanks @Cody Boggs. Let me know once that is done. I can retry.",
      "time": "12:49",
      "timestamp": "1719863365.010589",
      "is_reply": true
    },
    {
      "sender": "Cody Boggs",
      "user_id": "U037PKN4USZ",
      "message": "@Sunny Khatri try again :slightly_smiling_face:",
      "time": "12:51",
      "timestamp": "1719863471.078269",
      "is_reply": true
    },
    {
      "sender": "Sunny Khatri",
      "user_id": "U06KR4QB6E5",
      "message": "https://sandbox.console.instabase.com/customer/Engineering/tenant/sunny/info",
      "time": "12:51",
      "timestamp": "1719863518.313389",
      "is_reply": true
    },
    {
      "sender": "Sunny Khatri",
      "user_id": "U06KR4QB6E5",
      "message": "",
      "time": "13:03",
      "timestamp": "1719864222.456359",
      "is_reply": true
    },
    {
      "sender": "Cody Boggs",
      "user_id": "U037PKN4USZ",
      "message": "I'd suggest adding\n`\"PIPELINE_UPDATE_AWS_AMI\": false\"`\nto the advanced args of your sandbox in ICC",
      "time": "13:22",
      "timestamp": "1719865353.073789",
      "is_reply": true
    },
    {
      "sender": "Sunny Khatri",
      "user_id": "U06KR4QB6E5",
      "message": "Still failed:\n```13:52:27  python3 -u _scripts/install.py \\\n13:52:27  \t--command=update \\\n13:52:27  \t--control-plane-token-secret-arn=arn:aws:secretsmanager:us-east-2:591759939757:secret:insan-use2-sunny-control-plane-creds-intimate-mollusk-gS77Fq \\\n13:52:27  \t--control-plane-endpoint=https://sunny.internal.instabase.com \\\n13:52:27  \t--aws-profile=instabase-sandbox \\\n13:52:27  \t--aws-region=us-east-2 \\\n13:52:27  \t--release-version=-1719867147 \\\n13:52:27  \t--base-config-zip-file=/home/ib-build/workspace/saas-pipeline-install-ib-platform-10858/install-artifacts/base_configs.zip\n13:52:27  2024-07-01 20:52:27,785 - botocore.credentials - INFO - Found credentials in shared credentials file: /home/ib-build/workspace/saas-pipeline-install-ib-platform-10858/.aws/credentials\n13:52:27  Starting base config update\n13:52:27  500 Server Error: Internal Server Error for url: https://sunny.internal.instabase.com/api/v1/control_plane/base_configs/upload\n13:52:27  Database connection has not been initialized.\n13:52:27  make: *** [Makefile:338: run-update] Error 1```",
      "time": "13:55",
      "timestamp": "1719867346.376309",
      "is_reply": true
    },
    {
      "sender": "Sunny Khatri",
      "user_id": "U06KR4QB6E5",
      "message": "Did we change something ? I was able to work with sandboxes just fine couple of weeks back.",
      "time": "13:56",
      "timestamp": "1719867390.102789",
      "is_reply": true
    },
    {
      "sender": "Aaron Tami",
      "user_id": "UGG8PLD2P",
      "message": "Is this a new sandbox?",
      "time": "13:57",
      "timestamp": "1719867443.233079",
      "is_reply": true
    },
    {
      "sender": "Aaron Tami",
      "user_id": "UGG8PLD2P",
      "message": "Looks like you’re trying to upgrade a sandbox that hasn’t been installed yet.",
      "time": "13:57",
      "timestamp": "1719867470.518149",
      "is_reply": true
    },
    {
      "sender": "Sunny Khatri",
      "user_id": "U06KR4QB6E5",
      "message": "I spinned up a new sandbox and there were all these issues. The way I'm been trying to resolve is using \"update\" to add what is being suggested. Let me know if I should try with a new sandbox.",
      "time": "14:02",
      "timestamp": "1719867759.438059",
      "is_reply": true
    },
    {
      "sender": "Aaron Tami",
      "user_id": "UGG8PLD2P",
      "message": "can you link the jenkins job?",
      "time": "14:03",
      "timestamp": "1719867806.085849",
      "is_reply": true
    },
    {
      "sender": "Sunny Khatri",
      "user_id": "U06KR4QB6E5",
      "message": "https://jenkins.instabase.com/job/SAAS-AWS/job/deploy-saas-aws-preprod/17775/console",
      "time": "14:03",
      "timestamp": "1719867826.453799",
      "is_reply": true
    },
    {
      "sender": "Aaron Tami",
      "user_id": "UGG8PLD2P",
      "message": "Until the first install is successful, this needs to be unchecked.  I thikn the issue is when you try to \"Update\" from cloud console after an failed install, it automatically checks this",
      "time": "14:05",
      "timestamp": "1719867947.095859",
      "is_reply": true
    },
    {
      "sender": "Aaron Tami",
      "user_id": "UGG8PLD2P",
      "message": "im rerunning the last part of the job for you with this unchecked",
      "time": "14:05",
      "timestamp": "1719867955.001009",
      "is_reply": true
    },
    {
      "sender": "Aaron Tami",
      "user_id": "UGG8PLD2P",
      "message": "https://jenkins.instabase.com/job/SAAS-AWS/job/saas-pipelines/job/install-ib-platform/10861/",
      "time": "14:06",
      "timestamp": "1719867968.625759",
      "is_reply": true
    },
    {
      "sender": "Sunny Khatri",
      "user_id": "U06KR4QB6E5",
      "message": "That worked. Thanks !",
      "time": "14:22",
      "timestamp": "1719868938.754449",
      "is_reply": true
    }
  ],
  "metadata": {
    "channel_id": "C06FA6A23",
    "channel_name": "discuss-engineering",
    "date_file": "2024-07-01.json",
    "message_count": 29,
    "start_time": "1719854298.438919",
    "end_time": "1719868938.754449",
    "is_thread": true
  }
}