{
  "id": "ch_CSY11CK7T_2024-11-22_1732295483.031919_thread",
  "type": "channel",
  "channel_name": "discuss-frontend",
  "conversation_type": "thread",
  "participants": [
    "Serena",
    "Udit"
  ],
  "messages": [
    {
      "sender": "Udit",
      "user_id": "U03M519DVKR",
      "message": "Hey team I've run a script to delete all runs in the crafting-cyp environment that were more than 1 week old. It was about 4050 runs so even more docs in the docs table as a result. Hopefully this speeds it up.\n\nI know `view-batch-results` was using old runs so I'm going to edit the test to fix that. If anyone else's tests start failing as a result of old runs being deleted, please fix the tests to use new runs! Shoutout @tony.shi and @Jag for helping me figure out how to do this haha",
      "time": "09:11",
      "timestamp": "1732295483.031919",
      "is_reply": false
    },
    {
      "sender": "Serena",
      "user_id": "U01CZ3LBFU4",
      "message": "thank you so much for looking into this! :blob_excited:\n\nis your script reusable? i assume it’s only a matter of time before we need to delete runs again",
      "time": "09:30",
      "timestamp": "1732296651.681779",
      "is_reply": true
    },
    {
      "sender": "Udit",
      "user_id": "U03M519DVKR",
      "message": "not very reuseable because you have to copy and paste the run ids from mysql into a text file :disappointed:\n\nAlso, a lot of these runs im deleting don't seem to have docs associated with them. There are about 20k+ rows in the docs table which doesn't seem like a lot but so far after deleting 1.5k runs of the 4k runs, no docs have been deleted?",
      "time": "09:34",
      "timestamp": "1732296873.382129",
      "is_reply": true
    },
    {
      "sender": "Serena",
      "user_id": "U01CZ3LBFU4",
      "message": "@tony.shi i assume that we do have cascade deletes for docs associated with a deleted run?",
      "time": "09:36",
      "timestamp": "1732296969.046639",
      "is_reply": true
    },
    {
      "sender": "Udit",
      "user_id": "U03M519DVKR",
      "message": "yah we do! Abhishek worked on that",
      "time": "09:36",
      "timestamp": "1732296993.553189",
      "is_reply": true
    },
    {
      "sender": "Udit",
      "user_id": "U03M519DVKR",
      "message": "I think most of these runs were app runs or runs without validation errors meaning so docs were generated",
      "time": "09:36",
      "timestamp": "1732297007.678269",
      "is_reply": true
    },
    {
      "sender": "Udit",
      "user_id": "U03M519DVKR",
      "message": "i see some docs being deleted now actually :moneybag:",
      "time": "09:37",
      "timestamp": "1732297040.063499",
      "is_reply": true
    },
    {
      "sender": "Serena",
      "user_id": "U01CZ3LBFU4",
      "message": "based on Matt’s message, even if the docs table has 20k+ rows (which i agree isn’t a lot), the problem is the big join db queries (https://instabase.slack.com/archives/CSY11CK7T/p1732056424973759?thread_ts=1731720507.167389&cid=CSY11CK7T)",
      "time": "09:37",
      "timestamp": "1732297047.634349",
      "is_reply": true
    },
    {
      "sender": "Serena",
      "user_id": "U01CZ3LBFU4",
      "message": "> not very reuseable because you have to copy and paste the run ids from mysql into a text file :disappointed:\nthen can you add the instructions for this to the cypress on-call doc for future on-call folks? so that we don’t need to bother you/Tony/Jag again :sweat_smile:",
      "time": "09:38",
      "timestamp": "1732297103.213929",
      "is_reply": true
    },
    {
      "sender": "Udit",
      "user_id": "U03M519DVKR",
      "message": "yes! I will",
      "time": "09:38",
      "timestamp": "1732297137.574819",
      "is_reply": true
    },
    {
      "sender": "Udit",
      "user_id": "U03M519DVKR",
      "message": "seems like something is wrong with the delete operation because it has deleted the runs and doc_reviews but not the actual docs. Will keep investigating!",
      "time": "10:35",
      "timestamp": "1732300500.516829",
      "is_reply": true
    }
  ],
  "metadata": {
    "channel_id": "CSY11CK7T",
    "channel_name": "discuss-frontend",
    "date_file": "2024-11-22.json",
    "message_count": 11,
    "start_time": "1732295483.031919",
    "end_time": "1732300500.516829",
    "is_thread": true
  }
}