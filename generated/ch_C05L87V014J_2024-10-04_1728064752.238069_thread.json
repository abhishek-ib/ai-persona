{
  "id": "ch_C05L87V014J_2024-10-04_1728064752.238069_thread",
  "type": "channel",
  "channel_name": "ask-crafting",
  "conversation_type": "thread",
  "participants": [
    "Paul H",
    "sean.donohoe",
    "Udit"
  ],
  "messages": [
    {
      "sender": "Udit",
      "user_id": "U03M519DVKR",
      "message": "hey, getting the following error when tryng to enable webpack so I can do updates:\n\n`FATAL   Failed to enable service webpack        {\"error\": \"could not successfully configure all services\"}`\n\nThis is a new IB Classic enteprise sandbox built off ibdev",
      "time": "10:59",
      "timestamp": "1728064752.238069",
      "is_reply": false
    },
    {
      "sender": "Paul H",
      "user_id": "U011UPRAPNV",
      "message": "What’s the full output for the command you ran?",
      "time": "11:20",
      "timestamp": "1728066023.914769",
      "is_reply": true
    },
    {
      "sender": "Udit",
      "user_id": "U03M519DVKR",
      "message": "```2024-10-04T18:22:06Z    INFO    Ensuring disabled service webapp is stopped\n2024-10-04T18:22:06Z    INFO    Ensuring enabled service webpack is configured and running\n2024-10-04T18:22:06Z    INFO    Ensuring disabled service api-server is stopped\n2024-10-04T18:22:06Z    INFO    Ensuring disabled service apps-server is stopped\n2024-10-04T18:22:08Z    INFO    Service webapp turn down complete!\n2024-10-04T18:22:10Z    INFO    Creating self-signed certificate\nopenssl req -subj '/CN=Instabase, Inc/C=US/ST=CA/L=San Francisco/O=Instabase, Inc' -new -newkey rsa:2048 -days 365 -nodes -x509 -keyout /home/owner/instabase/webserver/server-nginx/build/certificates/default.key -out /home/owner/instabase/webserver/server-nginx/build/certificates/default.crt\n2024-10-04T18:22:10Z    INFO    Installing node and node modules\nyarn install v1.22.22\n[1/5] Resolving packages...\nsuccess Already up-to-date.\nDone in 0.53s.\n2024-10-04T18:22:11Z    INFO    Writing webserver/shared/src/js/webpacked/.ib-dev.json\n2024-10-04T18:22:11Z    INFO    Service api-server turn down complete!\n2024-10-04T18:22:11Z    INFO    Service webpack turn up complete!\n2024-10-04T18:22:12Z    INFO    Service apps-server turn down complete!\n2024-10-04T18:22:12Z    ERROR   Failed to setup webpack {\"error\": \"starting service: running service setup: fetching service image URL from kubernetes: stat /usr/local/etc/kubeconfig: no such file or directory\"}\ngithub.com/instabase/releng/crafting/workspace/services.Setup (http://github.com/instabase/releng/crafting/workspace/services.Setup)\n        releng/crafting/workspace/services/registry.go:160\ngithub.com/instabase/releng/crafting/workspace/services.Enable (http://github.com/instabase/releng/crafting/workspace/services.Enable)\n        releng/crafting/workspace/services/registry.go:65\ngithub.com/instabase/releng/crafting/workspace/cmd/service.enableService (http://github.com/instabase/releng/crafting/workspace/cmd/service.enableService)\n        releng/crafting/workspace/cmd/service/enable.go:31\ngithub.com/spf13/cobra.(*Command).execute (http://github.com/spf13/cobra.(*Command).execute)\n        external/com_github_spf13_cobra/command.go:944\ngithub.com/spf13/cobra.(*Command).ExecuteC (http://github.com/spf13/cobra.(*Command).ExecuteC)\n        external/com_github_spf13_cobra/command.go:1068\ngithub.com/spf13/cobra.(*Command).Execute (http://github.com/spf13/cobra.(*Command).Execute)\n        external/com_github_spf13_cobra/command.go:992\ngithub.com/instabase/releng/crafting/workspace/cmd.Execute (http://github.com/instabase/releng/crafting/workspace/cmd.Execute)\n        releng/crafting/workspace/cmd/root.go:39\nmain.main\n        releng/crafting/workspace/main.go:9\nruntime.main\n        GOROOT/src/runtime/proc.go:267\n2024-10-04T18:22:12Z    FATAL   Failed to enable service webpack        {\"error\": \"could not successfully configure all services\"}\ngithub.com/instabase/releng/crafting/workspace/cmd/service.enableService (http://github.com/instabase/releng/crafting/workspace/cmd/service.enableService)\n        releng/crafting/workspace/cmd/service/enable.go:32\ngithub.com/spf13/cobra.(*Command).execute (http://github.com/spf13/cobra.(*Command).execute)\n        external/com_github_spf13_cobra/command.go:944\ngithub.com/spf13/cobra.(*Command).ExecuteC (http://github.com/spf13/cobra.(*Command).ExecuteC)\n        external/com_github_spf13_cobra/command.go:1068\ngithub.com/spf13/cobra.(*Command).Execute (http://github.com/spf13/cobra.(*Command).Execute)\n        external/com_github_spf13_cobra/command.go:992\ngithub.com/instabase/releng/crafting/workspace/cmd.Execute (http://github.com/instabase/releng/crafting/workspace/cmd.Execute)\n        releng/crafting/workspace/cmd/root.go:39\nmain.main\n        releng/crafting/workspace/main.go:9\nruntime.main\n        GOROOT/src/runtime/proc.go:267```",
      "time": "11:22",
      "timestamp": "1728066148.057039",
      "is_reply": true
    },
    {
      "sender": "Paul H",
      "user_id": "U011UPRAPNV",
      "message": "Can you try running `touch /usr/local/etc/kubeconfig`?",
      "time": "11:23",
      "timestamp": "1728066185.011629",
      "is_reply": true
    },
    {
      "sender": "Udit",
      "user_id": "U03M519DVKR",
      "message": "still get the same error after running `workspace service enable webpack` after running the line you sent above",
      "time": "11:25",
      "timestamp": "1728066305.127319",
      "is_reply": true
    },
    {
      "sender": "Paul H",
      "user_id": "U011UPRAPNV",
      "message": "Can you give the full output of that command? I suspect something else is breaking it now :sweat_smile:",
      "time": "11:25",
      "timestamp": "1728066358.978659",
      "is_reply": true
    },
    {
      "sender": "Udit",
      "user_id": "U03M519DVKR",
      "message": "it was the same full output i think",
      "time": "11:28",
      "timestamp": "1728066489.698689",
      "is_reply": true
    },
    {
      "sender": "Paul H",
      "user_id": "U011UPRAPNV",
      "message": "Even with this line?\n```{\"error\": \"starting service: running service setup: fetching service image URL from kubernetes: stat /usr/local/etc/kubeconfig: no such file or directory\"}```",
      "time": "11:28",
      "timestamp": "1728066530.317229",
      "is_reply": true
    },
    {
      "sender": "Udit",
      "user_id": "U03M519DVKR",
      "message": "oh wait",
      "time": "11:29",
      "timestamp": "1728066572.906729",
      "is_reply": true
    },
    {
      "sender": "Udit",
      "user_id": "U03M519DVKR",
      "message": "`ERROR   Failed to setup webpack {\"error\": \"starting service: running service setup: fetching service image URL from kubernetes: invalid configuration: no configuration has been provided, try setting KUBERNETES_MASTER environment variable\"}`",
      "time": "11:29",
      "timestamp": "1728066581.656259",
      "is_reply": true
    },
    {
      "sender": "Udit",
      "user_id": "U03M519DVKR",
      "message": "it changed to this",
      "time": "11:29",
      "timestamp": "1728066588.825509",
      "is_reply": true
    },
    {
      "sender": "Udit",
      "user_id": "U03M519DVKR",
      "message": "do you know where to get the env var from?",
      "time": "11:30",
      "timestamp": "1728066601.066949",
      "is_reply": true
    },
    {
      "sender": "Paul H",
      "user_id": "U011UPRAPNV",
      "message": "No idea, and it seems like my box doesn’t have that env either.\n\nI think @sean.donohoe will have to help out here.",
      "time": "11:30",
      "timestamp": "1728066627.808049",
      "is_reply": true
    },
    {
      "sender": "Paul H",
      "user_id": "U011UPRAPNV",
      "message": "Just so we know, what does `echo $KUBECONFIG` return?",
      "time": "11:31",
      "timestamp": "1728066697.617299",
      "is_reply": true
    },
    {
      "sender": "Udit",
      "user_id": "U03M519DVKR",
      "message": "`/usr/local/etc/kubeconfig`",
      "time": "11:32",
      "timestamp": "1728066756.854139",
      "is_reply": true
    },
    {
      "sender": "sean.donohoe",
      "user_id": "U04JYSDMV63",
      "message": "hey sorry for taking so long to respond guys! @Paul H is correct, `touch /usr/local/etc/kubeconfig` is the workaround (I deeply apologize this bug hasn't been fixed yet) -- @Udit could you try running `workspace setup` ?",
      "time": "11:42",
      "timestamp": "1728067325.375989",
      "is_reply": true
    },
    {
      "sender": "Udit",
      "user_id": "U03M519DVKR",
      "message": "That fails now as well hmm\n```2024-10-04T18:42:20Z    INFO    Stopping any running daemons\n2024-10-04T18:42:21Z    INFO    Disconnecting from any connected Instabase clusters\n2024-10-04T18:42:21Z    INFO    Configuring generic environment settings\n2024-10-04T18:42:21Z    INFO    Setting up SSL\n\n===========================================================================\n| Output of '/bin/sh /home/owner/instabase/tools/devtools/ssl/setup_ssl.sh'\n---------------------------------------------------------------------------\n\n/bin/sh: 0: cannot open /home/owner/instabase/tools/devtools/ssl/setup_ssl.sh: No such file\n\n---------------------------------------------------------------------------\n| End of Output\n===========================================================================\n\n2024-10-04T18:42:21Z    ERROR   Failed to run base environment setup steps      {\"error\": \"setting up ssl: '/bin/sh /home/owner/instabase/tools/devtools/ssl/setup_ssl.sh' failed with exit status 2\"}\ngithub.com/instabase/releng/crafting/workspace/cmd.setupWorkspace (http://github.com/instabase/releng/crafting/workspace/cmd.setupWorkspace)\n        releng/crafting/workspace/cmd/setup.go:41\ngithub.com/spf13/cobra.(*Command).execute (http://github.com/spf13/cobra.(*Command).execute)\n        external/com_github_spf13_cobra/command.go:944\ngithub.com/spf13/cobra.(*Command).ExecuteC (http://github.com/spf13/cobra.(*Command).ExecuteC)\n        external/com_github_spf13_cobra/command.go:1068\ngithub.com/spf13/cobra.(*Command).Execute (http://github.com/spf13/cobra.(*Command).Execute)\n        external/com_github_spf13_cobra/command.go:992\ngithub.com/instabase/releng/crafting/workspace/cmd.Execute (http://github.com/instabase/releng/crafting/workspace/cmd.Execute)\n        releng/crafting/workspace/cmd/root.go:39\nmain.main\n        releng/crafting/workspace/main.go:9\nruntime.main\n        GOROOT/src/runtime/proc.go:267\n2024-10-04T18:42:21Z    INFO    Configuring any detected user environment preferences\n2024-10-04T18:42:21Z    WARN    No sandbox-preferences config found in /home/user\n2024-10-04T18:42:21Z    INFO    Connecting to Instabase cluster crafting-ent under namespace intes-use2-crafting-master-instabase\n2024-10-04T18:42:28Z    INFO    Ensuring enabled service webpack is configured and running\n2024-10-04T18:42:28Z    INFO    Ensuring disabled service apps-server is stopped\n2024-10-04T18:42:28Z    INFO    Ensuring disabled service webapp is stopped\n2024-10-04T18:42:28Z    INFO    Ensuring disabled service api-server is stopped\n2024-10-04T18:42:29Z    INFO    Creating self-signed certificate\nopenssl req -subj '/CN=Instabase, Inc/C=US/ST=CA/L=San Francisco/O=Instabase, Inc' -new -newkey rsa:2048 -days 365 -nodes -x509 -keyout /home/owner/instabase/webserver/server-nginx/build/certificates/default.key -out /home/owner/instabase/webserver/server-nginx/build/certificates/default.crt\n2024-10-04T18:42:29Z    INFO    Installing node and node modules\nyarn install v1.22.22\n[1/5] Resolving packages...\nsuccess Already up-to-date.\nDone in 0.46s.\n2024-10-04T18:42:30Z    INFO    Writing webserver/shared/src/js/webpacked/.ib-dev.json\n2024-10-04T18:42:30Z    INFO    Service apps-server turn down complete!\n2024-10-04T18:42:30Z    INFO    Service webpack turn up complete!\n2024-10-04T18:42:33Z    INFO    Service api-server turn down complete!\n2024-10-04T18:42:34Z    INFO    Service webapp turn down complete!\n2024-10-04T18:42:34Z    ERROR   Failed to setup webpack {\"error\": \"starting service: running service setup: fetching service image URL from kubernetes: invalid configuration: no configuration has been provided, try setting KUBERNETES_MASTER environment variable\"}\ngithub.com/instabase/releng/crafting/workspace/services.Setup (http://github.com/instabase/releng/crafting/workspace/services.Setup)\n        releng/crafting/workspace/services/registry.go:160\ngithub.com/instabase/releng/crafting/workspace/cmd.setupWorkspace (http://github.com/instabase/releng/crafting/workspace/cmd.setupWorkspace)\n        releng/crafting/workspace/cmd/setup.go:67\ngithub.com/spf13/cobra.(*Command).execute (http://github.com/spf13/cobra.(*Command).execute)\n        external/com_github_spf13_cobra/command.go:944\ngithub.com/spf13/cobra.(*Command).ExecuteC (http://github.com/spf13/cobra.(*Command).ExecuteC)\n        external/com_github_spf13_cobra/command.go:1068\ngithub.com/spf13/cobra.(*Command).Execute (http://github.com/spf13/cobra.(*Command).Execute)\n        external/com_github_spf13_cobra/command.go:992\ngithub.com/instabase/releng/crafting/workspace/cmd.Execute (http://github.com/instabase/releng/crafting/workspace/cmd.Execute)\n        releng/crafting/workspace/cmd/root.go:39\nmain.main\n        releng/crafting/workspace/main.go:9\nruntime.main\n        GOROOT/src/runtime/proc.go:267\n2024-10-04T18:42:34Z    FATAL   Failed to set up enabled local services {\"error\": \"could not successfully configure all services\"}\ngithub.com/instabase/releng/crafting/workspace/cmd.setupWorkspace (http://github.com/instabase/releng/crafting/workspace/cmd.setupWorkspace)\n        releng/crafting/workspace/cmd/setup.go:68\ngithub.com/spf13/cobra.(*Command).execute (http://github.com/spf13/cobra.(*Command).execute)\n        external/com_github_spf13_cobra/command.go:944\ngithub.com/spf13/cobra.(*Command).ExecuteC (http://github.com/spf13/cobra.(*Command).ExecuteC)\n        external/com_github_spf13_cobra/command.go:1068\ngithub.com/spf13/cobra.(*Command).Execute (http://github.com/spf13/cobra.(*Command).Execute)\n        external/com_github_spf13_cobra/command.go:992\ngithub.com/instabase/releng/crafting/workspace/cmd.Execute (http://github.com/instabase/releng/crafting/workspace/cmd.Execute)\n        releng/crafting/workspace/cmd/root.go:39\nmain.main\n        releng/crafting/workspace/main.go:9\nruntime.main\n        GOROOT/src/runtime/proc.go:267```",
      "time": "11:43",
      "timestamp": "1728067409.005099",
      "is_reply": true
    },
    {
      "sender": "sean.donohoe",
      "user_id": "U04JYSDMV63",
      "message": "kk that's super weird, I thought I made that a non-blocking failure >.> Are you on an old release branch?",
      "time": "11:44",
      "timestamp": "1728067461.322389",
      "is_reply": true
    },
    {
      "sender": "Udit",
      "user_id": "U03M519DVKR",
      "message": "oh yes, I changed it to a 24.04 branch because I want to test a change on it",
      "time": "11:49",
      "timestamp": "1728067793.807389",
      "is_reply": true
    },
    {
      "sender": "Udit",
      "user_id": "U03M519DVKR",
      "message": "Maybe I should go back to master, run it all there, and then just switch to 24.04 after its all running?",
      "time": "11:50",
      "timestamp": "1728067810.468889",
      "is_reply": true
    },
    {
      "sender": "sean.donohoe",
      "user_id": "U04JYSDMV63",
      "message": "yeah I think you'll need to do that here unfortunately -- I have https://instabase.atlassian.net/jira/software/c/projects/PRODENG/boards/355?selectedIssue=PRODENG-1430 for fixing this, sorry for the headache :disappointed:",
      "time": "11:53",
      "timestamp": "1728067999.395009",
      "is_reply": true
    }
  ],
  "metadata": {
    "channel_id": "C05L87V014J",
    "channel_name": "ask-crafting",
    "date_file": "2024-10-04.json",
    "message_count": 21,
    "start_time": "1728064752.238069",
    "end_time": "1728067999.395009",
    "is_thread": true
  }
}