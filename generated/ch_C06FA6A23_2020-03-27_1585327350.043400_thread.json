{
  "id": "ch_C06FA6A23_2020-03-27_1585327350.043400_thread",
  "type": "channel",
  "channel_name": "discuss-engineering",
  "conversation_type": "thread",
  "participants": [
    "shaunak",
    "Aaron Tami",
    "Chetan",
    "Matt"
  ],
  "messages": [
    {
      "sender": "Chetan",
      "user_id": "UE3TJAR9U",
      "message": "prod is being really slow in OCR (marx). anything unusual there?",
      "time": "09:42",
      "timestamp": "1585327350.043400",
      "is_reply": false
    },
    {
      "sender": "Chetan",
      "user_id": "UE3TJAR9U",
      "message": "a file a minute…. :dizzy_face:",
      "time": "09:47",
      "timestamp": "1585327652.044000",
      "is_reply": true
    },
    {
      "sender": "shaunak",
      "user_id": "UCY6SA014",
      "message": "@Aaron Tami",
      "time": "09:53",
      "timestamp": "1585328032.044300",
      "is_reply": true
    },
    {
      "sender": "Aaron Tami",
      "user_id": "UGG8PLD2P",
      "message": "The ocr-msft containers were overutilized yesterday, i was debugging it and reached out to the msft team but i didn't see any performance degradation tho. Ill look at it",
      "time": "09:55",
      "timestamp": "1585328107.044700",
      "is_reply": true
    },
    {
      "sender": "Chetan",
      "user_id": "UE3TJAR9U",
      "message": "7 files processed since i posted this :party_crying_blood: @Aaron Tami",
      "time": "10:08",
      "timestamp": "1585328908.045200",
      "is_reply": true
    },
    {
      "sender": "Chetan",
      "user_id": "UE3TJAR9U",
      "message": "i have 70 :disappointed:",
      "time": "10:08",
      "timestamp": "1585328916.045400",
      "is_reply": true
    },
    {
      "sender": "shaunak",
      "user_id": "UCY6SA014",
      "message": "Do you know how large these files are?",
      "time": "10:09",
      "timestamp": "1585328947.045600",
      "is_reply": true
    },
    {
      "sender": "Chetan",
      "user_id": "UE3TJAR9U",
      "message": "few pages. 2 -> 10. a few days ago, all 70 finished in <10/15 minutes.",
      "time": "10:09",
      "timestamp": "1585328988.045800",
      "is_reply": true
    },
    {
      "sender": "Matt",
      "user_id": "UCW8RES8H",
      "message": "@Ashish Have we scaled infra to the level of now running more employees and now more POC’s on Instabase.com (http://Instabase.com)?",
      "time": "10:23",
      "timestamp": "1585329811.046000",
      "is_reply": true
    },
    {
      "sender": "shaunak",
      "user_id": "UCY6SA014",
      "message": "@Matt this doesn’t seem to a problem with scale right now.  We are investigating.",
      "time": "10:24",
      "timestamp": "1585329851.046200",
      "is_reply": true
    },
    {
      "sender": "shaunak",
      "user_id": "UCY6SA014",
      "message": "@Chetan are you sure that it was msft ocr that took a while?  Can you enable log-to-timeline when you run your flows?  It might give us a hint as to what is going wrong.",
      "time": "10:25",
      "timestamp": "1585329920.046400",
      "is_reply": true
    },
    {
      "sender": "Matt",
      "user_id": "UCW8RES8H",
      "message": "Just in general I’ve been curious in general as we’ve doubled the company size and now have a lot of customer’s beginning POC’s on Instabase.com (http://Instabase.com) have we scaled infrastructure for the new load’s we expect or have seen. This may not be the issue but seems n the same vein.",
      "time": "10:25",
      "timestamp": "1585329921.046600",
      "is_reply": true
    },
    {
      "sender": "shaunak",
      "user_id": "UCY6SA014",
      "message": "I don’t think this issue is in the same vein of scalability.  We have been keeping a constant eye out on the cluster and will update some of the numbers.  However, in general the cluster is extremely underutilized :slightly_smiling_face:",
      "time": "10:28",
      "timestamp": "1585330094.046800",
      "is_reply": true
    },
    {
      "sender": "Chetan",
      "user_id": "UE3TJAR9U",
      "message": "will restart with that enabled",
      "time": "10:28",
      "timestamp": "1585330109.047000",
      "is_reply": true
    },
    {
      "sender": "Chetan",
      "user_id": "UE3TJAR9U",
      "message": "yes @shaunak",
      "time": "10:28",
      "timestamp": "1585330109.047200",
      "is_reply": true
    },
    {
      "sender": "shaunak",
      "user_id": "UCY6SA014",
      "message": "Or, at least I don’t think it is :joy:",
      "time": "10:28",
      "timestamp": "1585330113.047600",
      "is_reply": true
    },
    {
      "sender": "Chetan",
      "user_id": "UE3TJAR9U",
      "message": "restarting with log_to_timeline enabled",
      "time": "10:28",
      "timestamp": "1585330125.047900",
      "is_reply": true
    },
    {
      "sender": "shaunak",
      "user_id": "UCY6SA014",
      "message": "@Chetan Map step also includes UDF / Refiner steps.  So that could also result in the increase in file processing.",
      "time": "10:30",
      "timestamp": "1585330236.048100",
      "is_reply": true
    },
    {
      "sender": "Chetan",
      "user_id": "UE3TJAR9U",
      "message": "“map step”? but i’ve re-ran it skipping the last two steps (apply refiner and merge ibocr)",
      "time": "10:32",
      "timestamp": "1585330362.048300",
      "is_reply": true
    },
    {
      "sender": "shaunak",
      "user_id": "UCY6SA014",
      "message": "Oh, this is only the process-files block",
      "time": "10:33",
      "timestamp": "1585330397.048600",
      "is_reply": true
    },
    {
      "sender": "Aaron Tami",
      "user_id": "UGG8PLD2P",
      "message": "The ocr-msft logs appear to have pretty standard looking OCR times",
      "time": "10:42",
      "timestamp": "1585330956.048800",
      "is_reply": true
    },
    {
      "sender": "Aaron Tami",
      "user_id": "UGG8PLD2P",
      "message": "https://console.cloud.google.com/logs/viewer?interval=NO_LIMIT&project=instabase-main&minLogLevel=0&expandAll=false&timestamp=2020-03-27T17:42:21.640000000Z&customFacets=&limitCustomFacetWidth=true&advancedFilter=resource.type%3D%22container%22%0Aresource.labels.cluster_name%3D%22instabase-main-prod-002%22%0Aresource.labels.namespace_id%3D%22instabase-prod%22%0Aresource.labels.project_id%3D%22instabase-main%22%0Aresource.labels.zone:%22us-central1-%22%0Aresource.labels.container_name%3D%22ocr-msft%22%0Aresource.labels.pod_id:%22deployment-ocr-msft-%22&scrollTimestamp=2020-03-27T17:37:09.319068984Z&dateRangeUnbound=forwardInTime",
      "time": "10:42",
      "timestamp": "1585330964.049000",
      "is_reply": true
    },
    {
      "sender": "Aaron Tami",
      "user_id": "UGG8PLD2P",
      "message": "",
      "time": "10:43",
      "timestamp": "1585331022.049300",
      "is_reply": true
    },
    {
      "sender": "Aaron Tami",
      "user_id": "UGG8PLD2P",
      "message": "note that due to resourcing constraints, we are limited at 12 pods for microsoft ocr, so it might be a scaling issue @shaunak",
      "time": "10:44",
      "timestamp": "1585331068.049700",
      "is_reply": true
    },
    {
      "sender": "Chetan",
      "user_id": "UE3TJAR9U",
      "message": "ah i think it might have been the refiner functions have suddenly become way slower :shaking-angry-fist:",
      "time": "10:50",
      "timestamp": "1585331426.049900",
      "is_reply": true
    },
    {
      "sender": "Chetan",
      "user_id": "UE3TJAR9U",
      "message": "thanks for looking into it — the job that just ran the OCR step and map records executed fine",
      "time": "10:50",
      "timestamp": "1585331437.050100",
      "is_reply": true
    },
    {
      "sender": "Aaron Tami",
      "user_id": "UGG8PLD2P",
      "message": ":thumbsup:",
      "time": "10:54",
      "timestamp": "1585331698.051000",
      "is_reply": true
    }
  ],
  "metadata": {
    "channel_id": "C06FA6A23",
    "channel_name": "discuss-engineering",
    "date_file": "2020-03-27.json",
    "message_count": 27,
    "start_time": "1585327350.043400",
    "end_time": "1585331698.051000",
    "is_thread": true
  }
}