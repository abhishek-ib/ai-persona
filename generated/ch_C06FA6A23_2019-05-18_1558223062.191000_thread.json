{
  "id": "ch_C06FA6A23_2019-05-18_1558223062.191000_thread",
  "type": "channel",
  "channel_name": "discuss-engineering",
  "conversation_type": "thread",
  "participants": [
    "Aaron Vontell",
    "Ted"
  ],
  "messages": [
    {
      "sender": "Aaron Vontell",
      "user_id": "UCWNLU6CB",
      "message": "What is our best practice for sending progress updates from the backend to the frontend in a synchronous, non-celery approach? We are creating an in-memory, non-celery one-off computation for NLP Search, but still want to send back progress updates while the request is being completed (i.e. google search finished, html processed, etc…)",
      "time": "16:44",
      "timestamp": "1558223062.191000",
      "is_reply": false
    },
    {
      "sender": "Aaron Vontell",
      "user_id": "UCWNLU6CB",
      "message": "From my understanding the only way to do this **is** to use a celery tasks / threaded approach, but just wanted to double check",
      "time": "16:58",
      "timestamp": "1558223933.191100",
      "is_reply": true
    },
    {
      "sender": "Ted",
      "user_id": "UAEM2MEGJ",
      "message": "Aaron: usually we store a status object in redid. The async task updates this stays object and, disconnectedly, the frontend calls an api which polls it",
      "time": "17:31",
      "timestamp": "1558225918.192600",
      "is_reply": true
    },
    {
      "sender": "Ted",
      "user_id": "UAEM2MEGJ",
      "message": "Results can also be handled this way (visual_refiner.py in api-app-tasks is an example)",
      "time": "17:32",
      "timestamp": "1558225975.194000",
      "is_reply": true
    },
    {
      "sender": "Ted",
      "user_id": "UAEM2MEGJ",
      "message": "Web browser sends request to api, gets back a job_id",
      "time": "17:33",
      "timestamp": "1558225994.194700",
      "is_reply": true
    },
    {
      "sender": "Ted",
      "user_id": "UAEM2MEGJ",
      "message": "Async celery task does work (wether in memory or via disk), updating the status object",
      "time": "17:33",
      "timestamp": "1558226020.195600",
      "is_reply": true
    },
    {
      "sender": "Ted",
      "user_id": "UAEM2MEGJ",
      "message": "When it’s done, web browser realizes it’s done via the status obj poll and fetches results",
      "time": "17:34",
      "timestamp": "1558226042.196400",
      "is_reply": true
    },
    {
      "sender": "Ted",
      "user_id": "UAEM2MEGJ",
      "message": "Visual_refiner.py shows how to serve up these results from redis instead of disk.",
      "time": "17:34",
      "timestamp": "1558226058.197100",
      "is_reply": true
    },
    {
      "sender": "Ted",
      "user_id": "UAEM2MEGJ",
      "message": "Happy to pair code w you if helpful — good news is there is a lot of example code to lean on for this",
      "time": "17:34",
      "timestamp": "1558226078.197900",
      "is_reply": true
    },
    {
      "sender": "Aaron Vontell",
      "user_id": "UCWNLU6CB",
      "message": "Ah I see, so we are fine using celery?",
      "time": "18:02",
      "timestamp": "1558227735.199600",
      "is_reply": true
    },
    {
      "sender": "Ted",
      "user_id": "UAEM2MEGJ",
      "message": "Yeah celery is ok for this as long as it doesn’t create too big a hinderance.",
      "time": "18:04",
      "timestamp": "1558227889.200600",
      "is_reply": true
    },
    {
      "sender": "Ted",
      "user_id": "UAEM2MEGJ",
      "message": "(In fact ideal)",
      "time": "18:06",
      "timestamp": "1558227975.203100",
      "is_reply": true
    }
  ],
  "metadata": {
    "channel_id": "C06FA6A23",
    "channel_name": "discuss-engineering",
    "date_file": "2019-05-18.json",
    "message_count": 12,
    "start_time": "1558223062.191000",
    "end_time": "1558227975.203100",
    "is_thread": true
  }
}