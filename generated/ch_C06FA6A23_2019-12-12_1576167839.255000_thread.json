{
  "id": "ch_C06FA6A23_2019-12-12_1576167839.255000_thread",
  "type": "channel",
  "channel_name": "discuss-engineering",
  "conversation_type": "thread",
  "participants": [
    "Karthik S",
    "dlluncor",
    "lydia",
    "will"
  ],
  "messages": [
    {
      "sender": "lydia",
      "user_id": "UJK4LKYSJ",
      "message": "@Karthik S i think you broke api-server-apps when you added pandas in https://github.com/instabase/instabase/pull/11692/files 6 days ago. also shocked that nothing has alerted us to this until Colin today",
      "time": "08:23",
      "timestamp": "1576167839.255000",
      "is_reply": false
    },
    {
      "sender": "lydia",
      "user_id": "UJK4LKYSJ",
      "message": "@will we are pushing to dogfood every 2 hrs right? will it alert us if any of the docker containers don't run?",
      "time": "08:27",
      "timestamp": "1576168061.255100",
      "is_reply": true
    },
    {
      "sender": "lydia",
      "user_id": "UJK4LKYSJ",
      "message": "api-server-apps hasn't been able to start up since last Friday",
      "time": "08:28",
      "timestamp": "1576168096.255300",
      "is_reply": true
    },
    {
      "sender": "will",
      "user_id": "UJUJC82AG",
      "message": "It’s pushing the release every two hours",
      "time": "08:30",
      "timestamp": "1576168221.255600",
      "is_reply": true
    },
    {
      "sender": "lydia",
      "user_id": "UJK4LKYSJ",
      "message": "is the release working? i imagine it's broken right now?",
      "time": "08:30",
      "timestamp": "1576168247.255800",
      "is_reply": true
    },
    {
      "sender": "will",
      "user_id": "UJUJC82AG",
      "message": "I don’t know. The job currently doesn’t have any insight into the status of the app, it just reports if it could push. Basically if the build succeeds and the kubernetes config is valid, it will pass.",
      "time": "08:31",
      "timestamp": "1576168287.256000",
      "is_reply": true
    },
    {
      "sender": "will",
      "user_id": "UJUJC82AG",
      "message": "Pod monitoring post deploy is coming shortly.",
      "time": "08:31",
      "timestamp": "1576168303.256200",
      "is_reply": true
    },
    {
      "sender": "lydia",
      "user_id": "UJK4LKYSJ",
      "message": "ah i see. i think we have an issue where often it doesn't start up",
      "time": "08:31",
      "timestamp": "1576168307.256400",
      "is_reply": true
    },
    {
      "sender": "lydia",
      "user_id": "UJK4LKYSJ",
      "message": "because of missing python packages",
      "time": "08:31",
      "timestamp": "1576168314.256600",
      "is_reply": true
    },
    {
      "sender": "lydia",
      "user_id": "UJK4LKYSJ",
      "message": "kk sounds like pod monitoring post deploy would answer this",
      "time": "08:32",
      "timestamp": "1576168334.256800",
      "is_reply": true
    },
    {
      "sender": "will",
      "user_id": "UJUJC82AG",
      "message": "and validating after we push something :smile:",
      "time": "08:32",
      "timestamp": "1576168351.257000",
      "is_reply": true
    },
    {
      "sender": "lydia",
      "user_id": "UJK4LKYSJ",
      "message": "this is pushing to dogfood.instabase.com (http://dogfood.instabase.com)? or somewhere else?",
      "time": "08:32",
      "timestamp": "1576168363.257200",
      "is_reply": true
    },
    {
      "sender": "will",
      "user_id": "UJUJC82AG",
      "message": "Yeah, also from master to autobuild every hour",
      "time": "08:33",
      "timestamp": "1576168386.257400",
      "is_reply": true
    },
    {
      "sender": "lydia",
      "user_id": "UJK4LKYSJ",
      "message": "how do i remember what the autobuild url is?",
      "time": "08:34",
      "timestamp": "1576168461.257800",
      "is_reply": true
    },
    {
      "sender": "lydia",
      "user_id": "UJK4LKYSJ",
      "message": "lol",
      "time": "08:34",
      "timestamp": "1576168463.258000",
      "is_reply": true
    },
    {
      "sender": "will",
      "user_id": "UJUJC82AG",
      "message": "https://autobuild.sandbox.instabase.com/",
      "time": "08:34",
      "timestamp": "1576168483.258200",
      "is_reply": true
    },
    {
      "sender": "will",
      "user_id": "UJUJC82AG",
      "message": "I am not sure if it is helpful, but it’s the autobuild sandbox,.",
      "time": "08:35",
      "timestamp": "1576168505.258400",
      "is_reply": true
    },
    {
      "sender": "will",
      "user_id": "UJUJC82AG",
      "message": "Oops, only one period. It is the sandbox named autobuild,",
      "time": "08:35",
      "timestamp": "1576168531.258600",
      "is_reply": true
    },
    {
      "sender": "lydia",
      "user_id": "UJK4LKYSJ",
      "message": "can i log-in with my instabase account?",
      "time": "08:35",
      "timestamp": "1576168533.258800",
      "is_reply": true
    },
    {
      "sender": "will",
      "user_id": "UJUJC82AG",
      "message": "It won’t be the prod one, it has its own DB",
      "time": "08:35",
      "timestamp": "1576168550.259000",
      "is_reply": true
    },
    {
      "sender": "lydia",
      "user_id": "UJK4LKYSJ",
      "message": "so we would need to create a new account?",
      "time": "08:36",
      "timestamp": "1576168573.259300",
      "is_reply": true
    },
    {
      "sender": "lydia",
      "user_id": "UJK4LKYSJ",
      "message": "wait so is https://autobuild.sandbox.instabase.com/ the right url?",
      "time": "08:36",
      "timestamp": "1576168595.259500",
      "is_reply": true
    },
    {
      "sender": "will",
      "user_id": "UJUJC82AG",
      "message": "That depends on what you are looking for. During UAT we push every two hours from release-2019-12-02 branch. All the time autobuild gets once an hour updates from master.",
      "time": "08:37",
      "timestamp": "1576168665.259700",
      "is_reply": true
    },
    {
      "sender": "will",
      "user_id": "UJUJC82AG",
      "message": "Nobody uses it but me as far as I know",
      "time": "08:37",
      "timestamp": "1576168674.259900",
      "is_reply": true
    },
    {
      "sender": "lydia",
      "user_id": "UJK4LKYSJ",
      "message": "ah ok. yea the problem i'm trying to figure out how we can flag issues with broken docker containers earlier sooner than a week later",
      "time": "08:38",
      "timestamp": "1576168707.260100",
      "is_reply": true
    },
    {
      "sender": "lydia",
      "user_id": "UJK4LKYSJ",
      "message": "so i'm trying to get the url where master is pushed",
      "time": "08:38",
      "timestamp": "1576168728.260300",
      "is_reply": true
    },
    {
      "sender": "will",
      "user_id": "UJUJC82AG",
      "message": "I think there are two main things. The pod monitoring will be big from a letting us know without checking, and then the other is that I think when we make code changes we should confirm that they work.",
      "time": "08:39",
      "timestamp": "1576168771.260500",
      "is_reply": true
    },
    {
      "sender": "will",
      "user_id": "UJUJC82AG",
      "message": "I added you to autobuild, you should be able to reset your password and be an admin",
      "time": "08:40",
      "timestamp": "1576168817.260700",
      "is_reply": true
    },
    {
      "sender": "will",
      "user_id": "UJUJC82AG",
      "message": "Also, it looks like there was a regression for SSL config. I’m looking at that now.",
      "time": "08:45",
      "timestamp": "1576169135.260900",
      "is_reply": true
    },
    {
      "sender": "lydia",
      "user_id": "UJK4LKYSJ",
      "message": "ah ok, so if we were to also check status of deployments https://console.cloud.google.com/kubernetes/workload?organizationId=396394272939&project=instabase-dev&workload_list_tablesize=50&workload_list_tablequery=%255B%257B_22k_22_3A_22is_system_22_2C_22t_22_3A11_2C_22v_22_3A_22_5C_22false_5C_22_22_2C_22s_22_3Atrue%257D_2C%257B_22k_22_3A_22metadata%252Fnamespace_22_2C_22t_22_3A10_2C_22v_22_3A_22_5C_22autobuild_5C_22_22_2C_22s_22_3Atrue%257D%255D",
      "time": "08:51",
      "timestamp": "1576169477.261100",
      "is_reply": true
    },
    {
      "sender": "lydia",
      "user_id": "UJK4LKYSJ",
      "message": "then we can see when pods fail?",
      "time": "08:51",
      "timestamp": "1576169483.261400",
      "is_reply": true
    },
    {
      "sender": "will",
      "user_id": "UJUJC82AG",
      "message": "Yeah",
      "time": "08:51",
      "timestamp": "1576169513.261600",
      "is_reply": true
    },
    {
      "sender": "Karthik S",
      "user_id": "UDQNWKX1P",
      "message": "Mypy passed. Unit tests passed locally, in Travis and in Jenkins. If we need to add pandas requirement to docker, we can add it. Looks like there’s a big gap between the development, testing and shippping environments. We should try to make them all consistent to avoid such scenarios in the future.",
      "time": "09:45",
      "timestamp": "1576172734.268000",
      "is_reply": true
    },
    {
      "sender": "Karthik S",
      "user_id": "UDQNWKX1P",
      "message": "Also, can you share the error being seen?",
      "time": "09:47",
      "timestamp": "1576172836.268700",
      "is_reply": true
    },
    {
      "sender": "lydia",
      "user_id": "UJK4LKYSJ",
      "message": "the issue is that pandas doesn't exist in the docker",
      "time": "10:15",
      "timestamp": "1576174501.270000",
      "is_reply": true
    },
    {
      "sender": "lydia",
      "user_id": "UJK4LKYSJ",
      "message": "one way to close that gap is if you test locally in docker :slightly_smiling_face:",
      "time": "10:15",
      "timestamp": "1576174509.270200",
      "is_reply": true
    },
    {
      "sender": "lydia",
      "user_id": "UJK4LKYSJ",
      "message": "you can download pre-built docker images. the overall dev cycle is pretty slick",
      "time": "10:15",
      "timestamp": "1576174526.270400",
      "is_reply": true
    },
    {
      "sender": "lydia",
      "user_id": "UJK4LKYSJ",
      "message": "but yea i agree we need to close the gap on testing here. i over-reacted in my initial message. I think Will's proposal of checking status of deployed pods will address this issue",
      "time": "10:20",
      "timestamp": "1576174822.270600",
      "is_reply": true
    },
    {
      "sender": "Karthik S",
      "user_id": "UDQNWKX1P",
      "message": "@lydia -  This is not the first instance of such a bug occurring. I can point to numerous instances where requirements are accidentally missed, and we catch it during our deploy time during the release. This is a known problem, and is supposed to be caught by a good CI/CD system. Unless you mandate every developer do make build-docker/run-docker as part of every PR, I'm pretty sure this wont be the last instance of such a bug.",
      "time": "10:47",
      "timestamp": "1576176463.271700",
      "is_reply": true
    },
    {
      "sender": "dlluncor",
      "user_id": "U3UA06MFD",
      "message": "we used to have an auto-build which checked to see whether docker containers could build — i think @Karthik S had developed that @will can we get that up and running again?",
      "time": "11:09",
      "timestamp": "1576177778.272700",
      "is_reply": true
    },
    {
      "sender": "dlluncor",
      "user_id": "U3UA06MFD",
      "message": "i think we should make that a requirement to pushing to dogfood every 2 hours — otherwise we don’t know what exactly we are testing on dogfood",
      "time": "11:09",
      "timestamp": "1576177795.272900",
      "is_reply": true
    },
    {
      "sender": "Karthik S",
      "user_id": "UDQNWKX1P",
      "message": "Autobuild was disabled after Okta integration. We  need to enable Okta for build user",
      "time": "11:12",
      "timestamp": "1576177974.273100",
      "is_reply": true
    },
    {
      "sender": "will",
      "user_id": "UJUJC82AG",
      "message": "autobuild is still running",
      "time": "11:13",
      "timestamp": "1576177993.273300",
      "is_reply": true
    },
    {
      "sender": "will",
      "user_id": "UJUJC82AG",
      "message": "Afaik the “build” sandbox is not",
      "time": "11:13",
      "timestamp": "1576178005.273500",
      "is_reply": true
    },
    {
      "sender": "Karthik S",
      "user_id": "UDQNWKX1P",
      "message": "\"build\" sandbox wont send any alerts",
      "time": "11:13",
      "timestamp": "1576178012.273700",
      "is_reply": true
    },
    {
      "sender": "will",
      "user_id": "UJUJC82AG",
      "message": "Autobuild is the one that builds the images the provisioner script now uses",
      "time": "11:13",
      "timestamp": "1576178025.273900",
      "is_reply": true
    },
    {
      "sender": "dlluncor",
      "user_id": "U3UA06MFD",
      "message": "ah gotcha — can we setup alerts on it so we know whether the containers are being built and run succesfully?",
      "time": "11:14",
      "timestamp": "1576178082.274200",
      "is_reply": true
    },
    {
      "sender": "will",
      "user_id": "UJUJC82AG",
      "message": "We can add notifications to the autobuild scripts for sure",
      "time": "11:14",
      "timestamp": "1576178088.274400",
      "is_reply": true
    },
    {
      "sender": "will",
      "user_id": "UJUJC82AG",
      "message": "I am much more confident that it is working correctly now :slightly_smiling_face: building correctly  != running correctly, but we can add notifications to both!",
      "time": "11:15",
      "timestamp": "1576178125.274600",
      "is_reply": true
    },
    {
      "sender": "will",
      "user_id": "UJUJC82AG",
      "message": "Do we want emails or slack messages? Or inclusive “or” :slightly_smiling_face:",
      "time": "11:16",
      "timestamp": "1576178197.274800",
      "is_reply": true
    },
    {
      "sender": "Karthik S",
      "user_id": "UDQNWKX1P",
      "message": "Both",
      "time": "11:16",
      "timestamp": "1576178213.275000",
      "is_reply": true
    },
    {
      "sender": "Karthik S",
      "user_id": "UDQNWKX1P",
      "message": "We should alert for both building and running scenarios.  Build sandbox was supposed to do that, until we switched to Okta",
      "time": "11:18",
      "timestamp": "1576178314.275300",
      "is_reply": true
    },
    {
      "sender": "will",
      "user_id": "UJUJC82AG",
      "message": "SSL on autobuild is fixed!",
      "time": "16:00",
      "timestamp": "1576195258.292300",
      "is_reply": true
    }
  ],
  "metadata": {
    "channel_id": "C06FA6A23",
    "channel_name": "discuss-engineering",
    "date_file": "2019-12-12.json",
    "message_count": 53,
    "start_time": "1576167839.255000",
    "end_time": "1576195258.292300",
    "is_thread": true
  }
}