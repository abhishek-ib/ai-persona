{
  "id": "ch_C06FA6A23_2020-08-04_1596562732.094800_thread",
  "type": "channel",
  "channel_name": "discuss-engineering",
  "conversation_type": "thread",
  "participants": [
    "Justin",
    "Heymian",
    "Youssef",
    "Chetan"
  ],
  "messages": [
    {
      "sender": "Youssef",
      "user_id": "U0133S3BM7E",
      "message": "I’m working on measuring the performance of Refiner with large inputs (>1000 records) and I was wondering how close our production env (instabase.com (http://instabase.com)) is to the actual on premises deployments in terms of processing power, do y’all know who could help me with this info?",
      "time": "10:38",
      "timestamp": "1596562732.094800",
      "is_reply": false
    },
    {
      "sender": "Chetan",
      "user_id": "UE3TJAR9U",
      "message": "typically faster. i could guesstimate a percentage but it might be better to just have some code that benchmarks refiner programs (maybe with selenium?) that we could help run on a few different customer sites",
      "time": "10:39",
      "timestamp": "1596562784.094900",
      "is_reply": true
    },
    {
      "sender": "Youssef",
      "user_id": "U0133S3BM7E",
      "message": "you mean instabase.com (http://instabase.com) is faster?",
      "time": "10:41",
      "timestamp": "1596562897.095400",
      "is_reply": true
    },
    {
      "sender": "Heymian",
      "user_id": "UADQ9V8PK",
      "message": "our customer’s env’s vary quite a bit, for example the bofa cluster is much beefier than say the frb one.",
      "time": "10:42",
      "timestamp": "1596562946.095800",
      "is_reply": true
    },
    {
      "sender": "Chetan",
      "user_id": "UE3TJAR9U",
      "message": "dev vs prod vs staging vs whatever other environments they have also makes a difference",
      "time": "10:42",
      "timestamp": "1596562974.096000",
      "is_reply": true
    },
    {
      "sender": "Chetan",
      "user_id": "UE3TJAR9U",
      "message": "bofa dev was (maybe still is?) so minimal that only one notebook could be open at a time :laughing:",
      "time": "10:43",
      "timestamp": "1596563014.096200",
      "is_reply": true
    },
    {
      "sender": "Youssef",
      "user_id": "U0133S3BM7E",
      "message": "BOFA was asking whether refiner can handle 1200 pages, currently instabase.com (http://instabase.com) can, takes sometime, but manageable. Would it be fair to ask BOFA to pump up the specs to go with their asking?",
      "time": "10:46",
      "timestamp": "1596563163.096500",
      "is_reply": true
    },
    {
      "sender": "Chetan",
      "user_id": "UE3TJAR9U",
      "message": "something programmatic that lets us run benchmarks + compare would be awesome cause it’ll also give us a good idea of how much is enough / how restrictive a deployment is. “look we need more resources cause right now we can only go up to ~15 docs in refiner and we need to be able to go up to ~50 docs otherwise productivity will be 3x slower”",
      "time": "10:46",
      "timestamp": "1596563177.096700",
      "is_reply": true
    },
    {
      "sender": "Chetan",
      "user_id": "UE3TJAR9U",
      "message": "yup for sure",
      "time": "10:46",
      "timestamp": "1596563178.096900",
      "is_reply": true
    },
    {
      "sender": "Justin",
      "user_id": "ULE9A7AHE",
      "message": "cc @Aamir Sayani",
      "time": "10:47",
      "timestamp": "1596563257.097200",
      "is_reply": true
    },
    {
      "sender": "Youssef",
      "user_id": "U0133S3BM7E",
      "message": "that makes total sense, I’ll see what I can do about this, we already have this huge refiner program, so I can just write some performance tests to it",
      "time": "10:47",
      "timestamp": "1596563272.097400",
      "is_reply": true
    },
    {
      "sender": "Chetan",
      "user_id": "UE3TJAR9U",
      "message": "would also definitely recommend a huge one, a medium one, and a small one. the experience can be quite different",
      "time": "10:48",
      "timestamp": "1596563317.097700",
      "is_reply": true
    },
    {
      "sender": "Chetan",
      "user_id": "UE3TJAR9U",
      "message": "but awesome :smile: thanks youssef",
      "time": "10:48",
      "timestamp": "1596563321.097900",
      "is_reply": true
    },
    {
      "sender": "Youssef",
      "user_id": "U0133S3BM7E",
      "message": "it depends on how you define huge vs medium :smile:",
      "time": "10:49",
      "timestamp": "1596563351.098200",
      "is_reply": true
    },
    {
      "sender": "Youssef",
      "user_id": "U0133S3BM7E",
      "message": "this is the one I’m testing now\n```2 docs, 20Mb each, 600 pages each, 26 fields```\n- Loading => 47 seconds\n- Run all fields => 3 mins average\nWhich is not bad I think",
      "time": "10:49",
      "timestamp": "1596563394.098400",
      "is_reply": true
    },
    {
      "sender": "Chetan",
      "user_id": "UE3TJAR9U",
      "message": "agreed, i’m honestly super surprised that’s running that fast",
      "time": "10:52",
      "timestamp": "1596563533.098600",
      "is_reply": true
    },
    {
      "sender": "Chetan",
      "user_id": "UE3TJAR9U",
      "message": "is each document on IBOCR record?",
      "time": "10:52",
      "timestamp": "1596563540.098800",
      "is_reply": true
    },
    {
      "sender": "Chetan",
      "user_id": "UE3TJAR9U",
      "message": "or is each page an IBOCR record?",
      "time": "10:52",
      "timestamp": "1596563548.099000",
      "is_reply": true
    },
    {
      "sender": "Chetan",
      "user_id": "UE3TJAR9U",
      "message": "is provenance tracking turned on?",
      "time": "10:52",
      "timestamp": "1596563557.099200",
      "is_reply": true
    },
    {
      "sender": "Chetan",
      "user_id": "UE3TJAR9U",
      "message": "do the fields use any UDFs?",
      "time": "10:52",
      "timestamp": "1596563564.099400",
      "is_reply": true
    },
    {
      "sender": "Chetan",
      "user_id": "UE3TJAR9U",
      "message": "(sorry for the barrage lol)",
      "time": "10:52",
      "timestamp": "1596563567.099600",
      "is_reply": true
    },
    {
      "sender": "Youssef",
      "user_id": "U0133S3BM7E",
      "message": "Each doc is a separate IBDOC, but each IBDOC has 600+ records\nYes, provenance tracking is on.\nNo UDFs, just 26 fields `scan_right` the corresponding alphabet letter",
      "time": "10:54",
      "timestamp": "1596563698.099800",
      "is_reply": true
    },
    {
      "sender": "Chetan",
      "user_id": "UE3TJAR9U",
      "message": "aaah yea there’s so many dimensions to this :dizzy_face: the super simple regex helps it run very very fast i’m sure — along with the fact that `e` is 0 in those cases (setting it to `1` changes things very quickly)",
      "time": "10:56",
      "timestamp": "1596563796.100000",
      "is_reply": true
    },
    {
      "sender": "Youssef",
      "user_id": "U0133S3BM7E",
      "message": "Here is the program https://instabase.com/apps/refiner-v5/edit/youssef/my-repo/fs/Instabase%20Drive/GEP/Huge%20refiner/prog/refiner.ibrefiner\nbut please don’t edit while I’m testing",
      "time": "10:56",
      "timestamp": "1596563800.100200",
      "is_reply": true
    },
    {
      "sender": "Chetan",
      "user_id": "UE3TJAR9U",
      "message": "here’s another program i’d recommend timing: https://www.instabase.com/apps/refiner-v5/edit/MetLife2020/MetLife/fs/Metlife%20Drive/IB_pilot/workspace-chetan/templates/homecare/master_refiner.ibrefiner#\nhere’s 79 docs for it: https://www.instabase.com/MetLife2020/MetLife/fs/Metlife%20Drive/IB_pilot/workspace-chetan/templates/homecare/data/input/\nthere’s UDFs used here too: https://www.instabase.com/MetLife2020/MetLife/fs/Metlife%20Drive/IB_pilot/workspace-chetan/templates/homecare/scripts/",
      "time": "10:57",
      "timestamp": "1596563864.100400",
      "is_reply": true
    },
    {
      "sender": "Chetan",
      "user_id": "UE3TJAR9U",
      "message": "that might provide a more realistic example. back in march/april, i never actually pointed the refiner program to all 79 docs bc the wait time was way too long (>10 minutes, it might have been >30 minutes :man-shrugging::skin-tone-4: don’t remember exactly)",
      "time": "10:58",
      "timestamp": "1596563906.100600",
      "is_reply": true
    },
    {
      "sender": "Youssef",
      "user_id": "U0133S3BM7E",
      "message": "That makes sense, it’ll take like forever, whoever I don’t think this is a refiner issue, it’s a host performance issue, because most of the time is just the browser is trying to download 79 separate files which will utilize the browsers network pipeline.\nBut something we can do to help here would be, not loading all the documents while loading the program, maybe load the first few ones, then later on based on the user’s actions we can load more",
      "time": "11:01",
      "timestamp": "1596564087.100800",
      "is_reply": true
    },
    {
      "sender": "Chetan",
      "user_id": "UE3TJAR9U",
      "message": "it’s not the loading that’s as painful as just the execution. waiting forever for docs to load is do-able (given that it’s one-time) vs executions happen consistently.",
      "time": "11:04",
      "timestamp": "1596564249.101200",
      "is_reply": true
    },
    {
      "sender": "Chetan",
      "user_id": "UE3TJAR9U",
      "message": "and definitely agreed — it’s not a refiner problem but an instabase problem, but it’s a critical part of the experience of using refiner",
      "time": "11:04",
      "timestamp": "1596564272.101400",
      "is_reply": true
    },
    {
      "sender": "Chetan",
      "user_id": "UE3TJAR9U",
      "message": "and customers (whether client side or internal) will think it’s refiner’s fault. if you all have the info on where scaling breaks, you can help inform your feature requests / product requests from the infra teams",
      "time": "11:05",
      "timestamp": "1596564302.101600",
      "is_reply": true
    }
  ],
  "metadata": {
    "channel_id": "C06FA6A23",
    "channel_name": "discuss-engineering",
    "date_file": "2020-08-04.json",
    "message_count": 30,
    "start_time": "1596562732.094800",
    "end_time": "1596564302.101600",
    "is_thread": true
  }
}