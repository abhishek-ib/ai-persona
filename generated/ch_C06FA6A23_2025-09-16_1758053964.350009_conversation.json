{
  "id": "ch_C06FA6A23_2025-09-16_1758053964.350009_conversation",
  "type": "channel",
  "channel_name": "discuss-engineering",
  "conversation_type": "conversation",
  "participants": [
    "mfichman"
  ],
  "messages": [
    {
      "sender": "mfichman",
      "user_id": "U03DZ9XUE10",
      "message": "Hi all - Victor and I have been moving tests over to the new CI action. Unfortunately, this has exposed many broken (or flaky) tests. (see below)\n\nThese are tests that previosuly broke, but the breakage was not detected by the existing CI pipeline due to its failure to track dependencies across Python modules.\n\nI am going to disable such failing tests, and mark them as TODO per whoever I determine is the proper owner of the test. I'll send out a summary soon, and then I expect us to work through these tests and fix them.\n\nTy!!\n\n```FAILED instabase_unit_tests/instabase/converse_app_utils/test_service_utils.py::TestConverseServiceUtils::test_create_empty_prompts_file - TypeError: the JSON object must be str, bytes or bytearray, not NoneType\nFAILED instabase_unit_tests/instabase/converse_app_utils/test_service_utils.py::TestConverseServiceUtils::test_get_sample_prompts - AssertionError: {'prompts': []} != {'prompts': ['commercial-1', 'commercial-2']}\nFAILED instabase_unit_tests/instabase/flow/test_metaflow_lib.py::TestListClassifiers::test_list_classifiers_with_market_and_custom_folders - AssertionError: 'encodings.cp437' not found in {'tqdm.std', 'importlib_metadata._functools', 'PIL.MspImagePlugin', 'build.test.py.instabase_unit_tests.instabase.test_runner_utils.test_prehooks', 'cryptography.hazmat.primit...\nFAILED instabase_unit_tests/instabase/model_utils/test_classifier_docsplitting.py::KnnClassifierTest::test_junk_page_between_documents - AssertionError: \"{'IRS Form 1040': [(1, 2), (3, 3)], 'IRS Form W-4': [(4, 6)]} != {'IRS Form 1040': [(1, 2)], 'Unknown Template': [(3, 3)], 'IRS Form W-4': [(4, 6)]}\" is not None\nFAILED instabase_unit_tests/instabase/model_utils/test_classifier_docsplitting.py::KnnClassifierTest::test_junk_page_in_documents - AssertionError: \"{'IRS Form 1040': [(1, 2)], 'IRS Form W-4': [(3, 4), (5, 6)]} != {'IRS Form 1040': [(1, 2)], 'IRS Form W-4': [(3, 3), (5, 6)], 'Unknown Template': [(4, 4)]}\" is not None\nFAILED instabase_unit_tests/instabase/nlp_utils/test_similarity.py::TestNLPSimilarityHeuristics::test_antonyms - LookupError:\nFAILED instabase_unit_tests/instabase/nlp_utils/test_similarity.py::TestNLPSimilarityHeuristics::test_similarity - LookupError:\nFAILED instabase_unit_tests/instabase/nlp_utils/token_matchers/test_similarity.py::TestNLPTokenMatchers::test_token_matchers - LookupError:\nFAILED instabase_unit_tests/instabase/flow_step_executors/reduce_udf/test_reduce_udf_step_executor.py::TestReduceUDFStepExecutor::test_reduce_udf_run_legacy - AssertionError: \"Error registering your UDF: No module named 'missingmodule'\" not found in 'Error executing Reduce UDF step s3. Reason: Unknown function process_without_ibmsg_and_summary - make sure that custom functions a...\nFAILED instabase_unit_tests/instabase/flow/runnables/test_apply_refiner_fns.py::TestExtractArgsWithIBDocV2::test_get_output_phrases_with_ibdoc_v2 - IndexError: list index out of range\nFAILED instabase_unit_tests/instabase/flow_step_executors/unified_extractor/test_unified_extractor_step_executor.py::TestMergeOverlappingBoxes::test_edge_case_zero_area_boxes - AssertionError: 2 != 1\nFAILED instabase_unit_tests/instabase/flow_step_executors/doc_gen/test_doc_generation_step_executor.py::TestDocGenExecutor::test_doc_gen_run_legacy - AttributeError: <module 'instabase.flow_step_executors.doc_gen.doc_generation_step_executor' from '/home/owner/instabase/shared-utils/py-utils/utils/src/instabase/flow_step_executors/doc_gen/doc_generation_step_executor.py...\nFAILED instabase_unit_tests/instabase/flow_step_executors/map_udf/test_map_udf_step_executor.py::TestMapUDFStepExecutor::test_map_udf_run - AssertionError: unexpectedly None : Expected error not received for test:udf_with_missing_module_imported\nFAILED instabase_unit_tests/instabase/ocr/client/libs/test_ibocr.py::TestIBDOCv2ClientsE2E::test_with_file_client_v1_ibdoc_pi - AssertionError: 273 != 0\nFAILED instabase_unit_tests/instabase/ocr/client/libs/test_ibocr.py::TestIBDOCv2ClientsE2E::test_with_file_client_v1_ibdoc_pib - AssertionError: 273 != 0\nFAILED instabase_unit_tests/instabase/content/filehandle/test_stats_utils.py::TestStatsCollector::test_collect_stats - AssertionError: 0 != 2\nFAILED instabase_unit_tests/instabase/content/filehandle/test_stats_utils.py::TestStatsUtils::test_capture_stats - AssertionError: 0 != 2\nFAILED instabase_unit_tests/instabase/ocr/client/libs/test_ibocr.py::TestIBDOCv2ClientsE2E::test_with_file_client_v1_str_pi - AssertionError: 273 != 0```",
      "time": "13:19",
      "timestamp": "1758053964.350009",
      "is_reply": false
    }
  ],
  "metadata": {
    "channel_id": "C06FA6A23",
    "channel_name": "discuss-engineering",
    "date_file": "2025-09-16.json",
    "message_count": 1,
    "start_time": "1758053964.350009",
    "end_time": "1758053964.350009",
    "is_thread": false
  }
}