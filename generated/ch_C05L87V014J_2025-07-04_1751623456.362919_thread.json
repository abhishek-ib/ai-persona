{
  "id": "ch_C05L87V014J_2025-07-04_1751623456.362919_thread",
  "type": "channel",
  "channel_name": "ask-crafting",
  "conversation_type": "thread",
  "participants": [
    "abhijnan",
    "Pramod Munemanik"
  ],
  "messages": [
    {
      "sender": "Pramod Munemanik",
      "user_id": "U01486CGC2F",
      "message": "Hi team,\nCrafting sandbox is not working with the master branch.\nIâ€™m seeing the following error in api-server. Ho do I resolve this ?\nSandbox : https://https--pramod1-instabase.instabase.site.sandboxes.run\n\n`AttributeError: 'NoneType' object has no attribute 'span'`\n`172.17.0.1 - - [04/Jul/2025:10:00:32 +0000] \"GET /api/v1/celery-handler/stats HTTP/1.1\" 500 0 \"-\" \"-\"`\n`level=ERROR time=2025-07-04 10:01:02,816 msg=\"Uncaught exception in webserver while handling request: Error='NoneType' object has no attribute 'items'. Traceback=Traceback (most recent call last):;File \"/instabase-api-server/py/instabase/utils/web/handler_util_v2.py\", line 415, in inner_func;return f(*args, **kwargs);File \"/instabase-api-server/py/instabase/api_server_apps/handler/api/v1/celery_handler.py\", line 112, in get;for host, queues in active_queues.items();AttributeError: 'NoneType' object has no attribute 'items';\"  path=\"/instabase-api-server/py/instabase/utils/web/handler_util_v2.py:422\" process=\"MainProcess\" thread=\"ThreadPoolExecutor-0_1\" trace_id=\"\"`\n`[2025-07-04 10:01:02 +0000] [18] [ERROR] Error handling request /api/v1/celery-handler/stats`\n`Traceback (most recent call last):`\n  `File \"/usr/local/lib/python3.9/site-packages/gunicorn/workers/gthread.py\", line 281, in handle`\n    `keepalive = self.handle_request(req, conn)`\n  `File \"/usr/local/lib/python3.9/site-packages/gunicorn/workers/gthread.py\", line 333, in handle_request`\n    `respiter = self.wsgi(environ, resp.start_response)`\n  `File \"/usr/local/lib/python3.9/site-packages/flask/app.py\", line 2213, in __call__`\n    `return self.wsgi_app(environ, start_response)`\n  `File \"/instabase-api-server/py/instabase/utils/web/flask_util.py\", line 308, in __call__`\n    `return self.app (http://self.app)(environ, start_response)`\n  `File \"/instabase-api-server/py/instabase/utils/web/flask_util.py\", line 233, in __call__`\n    `return self.app (http://self.app)(environ, start_response)`\n  `File \"/usr/local/lib/python3.9/site-packages/flask/app.py\", line 2193, in wsgi_app`\n    `response = self.handle_exception(e)`\n  `File \"/usr/local/lib/python3.9/site-packages/flask_cors/extension.py\", line 194, in wrapped_function`\n    `return cors_after_request(app.make_response(f(*args, **kwargs)))`\n  `File \"/usr/local/lib/python3.9/site-packages/flask/app.py\", line 2190, in wsgi_app`\n    `response = self.full_dispatch_request()`\n  `File \"/usr/local/lib/python3.9/site-packages/flask/app.py\", line 1487, in full_dispatch_request`\n    `return self.finalize_request(rv)`\n  `File \"/usr/local/lib/python3.9/site-packages/flask/app.py\", line 1508, in finalize_request`\n    `response = self.process_response(response)`\n  `File \"/usr/local/lib/python3.9/site-packages/flask/app.py\", line 2002, in process_response`\n    `response = self.ensure_sync(func)(response)`\n  `File \"/instabase-api-server/py/manage_api_server.py\", line 115, in trace_after_request`\n    `tracing_utils.trace_after_request(response)`\n  `File \"/instabase-api-server/py/instabase/utils/web/tracing_utils.py\", line 97, in trace_after_request`\n    `span = scope.span`\n`AttributeError: 'NoneType' object has no attribute 'span'`",
      "time": "03:04",
      "timestamp": "1751623456.362919",
      "is_reply": false
    },
    {
      "sender": "abhijnan",
      "user_id": "U056NM536PP",
      "message": "This is probably coming form my change, let me see if it's a quick fix",
      "time": "03:18",
      "timestamp": "1751624331.113259",
      "is_reply": true
    },
    {
      "sender": "Pramod Munemanik",
      "user_id": "U01486CGC2F",
      "message": "Thank you",
      "time": "03:19",
      "timestamp": "1751624368.686539",
      "is_reply": true
    },
    {
      "sender": "abhijnan",
      "user_id": "U056NM536PP",
      "message": "PR: https://github.com/instabase/instabase/pull/72002\ncc: @abhitaker I had tracing enabled locally so this never got caught :sweat_smile:",
      "time": "03:21",
      "timestamp": "1751624507.884769",
      "is_reply": true
    }
  ],
  "metadata": {
    "channel_id": "C05L87V014J",
    "channel_name": "ask-crafting",
    "date_file": "2025-07-04.json",
    "message_count": 4,
    "start_time": "1751623456.362919",
    "end_time": "1751624507.884769",
    "is_thread": true
  }
}